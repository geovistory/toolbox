!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular-redux/store"),require("@angular/core"),require("@cime/ngx-slim-loading-bar"),require("@cime/ngx-toasty"),require("@kleiolab/lib-sdk-lb3"),require("@kleiolab/lib-sdk-lb4"),require("ramda"),require("redux-dynamic-middlewares"),require("redux-observable-es6-compat"),require("rxjs"),require("rxjs/operators"),require("@kleiolab/lib-config"),require("@kleiolab/lib-utils"),require("@angular-redux/form"),require("@angular-redux/router"),require("redux"),require("@angular/cdk/drag-drop")):"function"==typeof define&&define.amd?define("@kleiolab/lib-redux/src/lib/redux-store",["exports","@angular-redux/store","@angular/core","@cime/ngx-slim-loading-bar","@cime/ngx-toasty","@kleiolab/lib-sdk-lb3","@kleiolab/lib-sdk-lb4","ramda","redux-dynamic-middlewares","redux-observable-es6-compat","rxjs","rxjs/operators","@kleiolab/lib-config","@kleiolab/lib-utils","@angular-redux/form","@angular-redux/router","redux","@angular/cdk/drag-drop"],e):e(((t=t||self).kleiolab=t.kleiolab||{},t.kleiolab["lib-redux"]=t.kleiolab["lib-redux"]||{},t.kleiolab["lib-redux"].src=t.kleiolab["lib-redux"].src||{},t.kleiolab["lib-redux"].src.lib=t.kleiolab["lib-redux"].src.lib||{},t.kleiolab["lib-redux"].src.lib["redux-store"]={}),t.store,t.ng.core,t.ngxSlimLoadingBar,t.ngxToasty,t.libSdkLb3,t.libSdkLb4,t.ramda,t.dynamicMiddlewares,t.reduxObservableEs6Compat,t.rxjs,t.rxjs.operators,t.libConfig,t.libUtils,t.form,t.router,t.redux,t.ng.cdk["drag-drop"])}(this,(function(t,e,n,i,r,o,a,c,s,p,u,l,f,d,y,_,g,h){"use strict";s=s&&s.hasOwnProperty("default")?s.default:s;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function E(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var A=function(){return(A=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function v(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function k(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function P(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(S(arguments[e]));return t}var O=function(){function t(){this.startLoading=function(){return{type:t.START,meta:null,payload:null}},this.stopLoading=function(){return{type:t.STOP,meta:null,payload:null}},this.completeLoading=function(){return{type:t.COPMLETE,meta:null,payload:null}}}return t.START="LOADING_BAR_START",t.STOP="LOADING_BAR_STOP",t.COPMLETE="LOADING_BAR_COPMLETE",t.decorators=[{type:n.Injectable}],v([e.dispatch(),k("design:type",Object)],t.prototype,"startLoading",void 0),v([e.dispatch(),k("design:type",Object)],t.prototype,"stopLoading",void 0),v([e.dispatch(),k("design:type",Object)],t.prototype,"completeLoading",void 0),t}();var I=function(){function t(t,e){this.service=t,this.actions=e}return t.prototype.createEpics=function(){return p.combineEpics(this.createStartLoadingBarEpic(),this.createCompleteLoadingBarEpic())},t.prototype.createCompleteLoadingBarEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(O.COPMLETE),l.switchMap((function(){return u.Observable.create((function(e){t.service.complete()}))})))})},t.prototype.createStartLoadingBarEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(O.START),l.switchMap((function(){return u.Observable.create((function(e){t.service.start()}))})))})},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:i.SlimLoadingBarService},{type:O}]},t}();var T=function(){function t(){this.addToast=function(e){return{type:t.ADD_TOAST,meta:null,payload:e}}}return t.ADD_TOAST="Notifications::ADD_TOAST",t.decorators=[{type:n.Injectable}],t}();var x=function(){function t(t,e){this.toastyService=t,this.toastyConfig=e,this.toastyConfig.theme="bootstrap"}return t.prototype.createEpics=function(){return p.combineEpics(this.createAddToastEpic())},t.prototype.createAddToastEpic=function(){var t=this;return(function(e,n){return e.pipe(l.filter((function(t){return t})),p.ofType(T.ADD_TOAST),l.switchMap((function(e){return new u.Observable((function(n){var i=e;i.payload.options.title||i.payload.options.msg||"error"===i.payload.type&&(i.payload.options.title="Oops, something went wrong!"),t.toastyService[i.payload.type](i.payload.options)}))})))})},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:r.ToastyService},{type:r.ToastyConfig}]},t}();var R=function(){function t(){}return t.prototype.loadProjectBasics=function(e){return{type:t.LOAD_PROJECT_BASICS,payload:null,meta:{pk_project:e}}},t.prototype.loadProjectBasiscsSucceded=function(e){return{type:t.LOAD_PROJECT_BASICS_SUCCEEDED,payload:null,meta:{projectPreview:e}}},t.prototype.loadProjectConfig=function(e){return{type:t.LOAD_PROJECT_CONFIG,payload:null,meta:{pk_project:e}}},t.prototype.loadProjectConfigSucceeded=function(){return{type:t.LOAD_PROJECT_CONFIG_SUCCEEDED,payload:{},meta:null}},t.prototype.setListType=function(e){return{type:t.SET_LIST_TYPE,payload:null,meta:{list:e}}},t.prototype.setPanels=function(e,n,i,r){return{type:t.SET_PANELS,payload:null,meta:{panels:e,uiIdSerial:n,panelSerial:i,focusedPanel:r}}},t.prototype.activateTab=function(e,n){return{type:t.ACTIVATE_TAB,payload:null,meta:{panelIndex:e,tabIndex:n}}},t.prototype.moveTab=function(e,n,i,r){return{type:t.MOVE_TAB,payload:null,meta:{previousPanelIndex:e,currentPanelIndex:n,previousTabIndex:i,currentTabIndex:r}}},t.prototype.closeTab=function(e,n){return{type:t.CLOSE_TAB,payload:null,meta:{panelIndex:e,tabIndex:n}}},t.prototype.addTab=function(e){return{type:t.ADD_TAB,payload:null,meta:{tab:e}}},t.prototype.splitPanel=function(e,n,i){return{type:t.SPLIT_PANEL,payload:null,meta:{previousPanelIndex:e,tabIndex:n,currentPanelIndex:i}}},t.prototype.closePanel=function(e){return{type:t.CLOSE_PANEL,payload:null,meta:{panelIndex:e}}},t.prototype.focusPanel=function(e){return{type:t.FOCUS_PANEL,payload:null,meta:{panelIndex:e}}},t.prototype.setRefiningChunk=function(e){return{type:t.SET_REFINING_CHUNK,payload:{refiningChunk:e},meta:null}},t.prototype.setCreatingMentioning=function(e){return{type:t.SET_CREATING_MENTIONING,payload:{creatingMentioning:e},meta:null}},t.prototype.setMentioningsFocusedInText=function(e){return{type:t.SET_MENTIONINGS_FOCUSED_IN_TEXT,payload:{mentioningsFocusedInText:e},meta:null}},t.prototype.setMentioningsFocusedInTable=function(e){return{type:t.SET_MENTIONINGS_FOCUSED_IN_TABLE,payload:{mentioningsFocusedInTable:e},meta:null}},t.prototype.destroy=function(){return{type:t.DESTROY,payload:null,meta:null}},t.LOAD_PROJECT_BASICS="ActiveProject::LOAD_PROJECT_BASICS",t.LOAD_PROJECT_BASICS_FAILED="ActiveProject::LOAD_PROJECT_BASICS_FAILED",t.LOAD_PROJECT_BASICS_SUCCEEDED="ActiveProject::LOAD_PROJECT_BASICS_SUCCEEDED",t.LOAD_PROJECT_CONFIG="ActiveProject::LOAD_PROJECT_CONFIG",t.LOAD_PROJECT_CONFIG_SUCCEEDED="ActiveProject::LOAD_PROJECT_CONFIG_SUCCEEDED",t.SET_LIST_TYPE="ActiveProject::SET_LIST_TYPE",t.SET_PANELS="ActiveProject::SET_PANELS",t.ACTIVATE_TAB="ActiveProject::ACTIVATE_TAB",t.MOVE_TAB="ActiveProject::MOVE_TAB",t.CLOSE_TAB="ActiveProject::CLOSE_TAB",t.ADD_TAB="ActiveProject::ADD_TAB",t.SPLIT_PANEL="ActiveProject::SPLIT_PANEL",t.CLOSE_PANEL="ActiveProject::CLOSE_PANEL",t.FOCUS_PANEL="ActiveProject::FOCUS_PANEL",t.UPDATE_SELECTED_CHUNK="ActiveProject::UPDATE_SELECTED_CHUNK",t.SET_REFINING_CHUNK="ActiveProject::SET_REFINING_CHUNK",t.SET_CREATING_MENTIONING="ActiveProject::SET_CREATING_MENTIONING",t.SET_MENTIONINGS_FOCUSED_IN_TEXT="ActiveProject::SET_MENTIONINGS_FOCUSED_IN_TEXT",t.SET_MENTIONINGS_FOCUSED_IN_TABLE="ActiveProject::SET_MENTIONINGS_FOCUSED_IN_TABLE",t.DESTROY="ActiveProject::DESTROY",t.decorators=[{type:n.Injectable}],t}();var b="dat",j={digital:{equals:function(t,e){return!(!e.quill_doc&&t.quill_doc)&&(t.pk_entity===e.pk_entity&&t.entity_version===e.entity_version)},indexBy:{keyInStore:"pk_entity__entity_version",indexByFn:function(t){return t.pk_entity.toString()+"_"+t.entity_version.toString()}},groupBy:[{keyInStore:"pk_entity",groupByFn:function(t){return t.pk_entity.toString()}},{keyInStore:"pk_text",groupByFn:function(t){return t.pk_text.toString()}}]},chunk:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_text",groupByFn:function(t){return t.fk_text.toString()}}]},column:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_digital",groupByFn:function(t){return t.fk_digital.toString()}}]},class_column_mapping:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_column",groupByFn:function(t){return t.fk_column.toString()}}]},text_property:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_entity__fk_system_type",groupByFn:function(t){return t.fk_entity+"_"+t.fk_system_type}}]},namespace:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_project",groupByFn:function(t){return t.fk_project.toString()}}]}};var C=function(){function t(t){this.ngRedux=t}return t.prototype.createCrudActions=function(t,e){var n=this;return this.actionPrefix=t,this.modelName=e,this.load=function(t,e){void 0===t&&(t="");var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::LOAD"+(t?"::"+t:""),meta:{addPending:i,pk:e},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]),key:i}},this.loadSucceeded=function(t,e,i){var r={type:n.actionPrefix+"."+n.modelName+"::LOAD_SUCCEEDED",meta:{items:t,removePending:e,pk:i},payload:null};n.ngRedux.dispatch(r)},this.upsert=function(t,e){var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::UPSERT",meta:{items:t,addPending:i,pk:e},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]),key:i}},this.upsertSucceeded=function(t,e,i){var r={type:n.actionPrefix+"."+n.modelName+"::UPSERT_SUCCEEDED",meta:{items:t,removePending:e,pk:i},payload:null};n.ngRedux.dispatch(r)},this.succeeded=function(t,e,i){var r={type:"general::UPSERT_SUCCEEDED",meta:{items:t,removePending:e,pk:i},payload:null};n.ngRedux.dispatch(r)},this.delete=function(t,e){var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::DELETE",meta:{items:t,addPending:i,pk:e},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this.deleteSucceeded=function(t,e,i){var r={type:n.actionPrefix+"."+n.modelName+"::DELETE_SUCCEEDED",meta:{items:t,removePending:e,pk:i},payload:null};n.ngRedux.dispatch(r)},this.failed=function(t,e,i){var r={type:n.actionPrefix+"."+n.modelName+"::FAILED",meta:{removePending:e,pk:i},payload:null,error:t};n.ngRedux.dispatch(r)},this.loadPage=function(t,e,i,r){var o={type:n.actionPrefix+"."+n.modelName+"::LOAD_PAGE",meta:{paginateBy:t,limit:e,offset:i,pk:r},payload:null};n.ngRedux.dispatch(o)},this.loadPageSucceeded=function(t,e,i,r,o,a){var c={type:n.actionPrefix+"."+n.modelName+"::LOAD_PAGE_SUCCEEDED",meta:{pks:t,paginateBy:i,count:e,limit:r,offset:o,pk:a},payload:null};n.ngRedux.dispatch(c)},this.loadPageFailed=function(t,e,i,r){var o={type:n.actionPrefix+"."+n.modelName+"::LOAD_PAGE_FAILED",meta:{paginateBy:t,limit:e,offset:i,pk:r},payload:null};n.ngRedux.dispatch(o)},this},t}();var D=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(b,"digital")),this.loadVersion=function(n,i){var r=d.U.uuid(),o={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.LOAD_VERSION,meta:{addPending:r,pkEntity:n,entityVersion:i},payload:null};return t.ngRedux.dispatch(o),{pending$:t.ngRedux.select(["pending",r]),resolved$:t.ngRedux.select(["resolved",r]),key:r}},this},e.LOAD_VERSION="LOAD_VERSION",e}(C);var L=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(b,"chunk")),this.loadChunksOfDigital=function(n,i){var r=d.U.uuid(),o={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.CHUNKS_OF_DIGITAL,meta:{addPending:r,pkDigital:n,pk:i},payload:null};return t.ngRedux.dispatch(o),{pending$:t.ngRedux.select(["pending",r]),resolved$:t.ngRedux.select(["resolved",r]),key:r}},this},e.CHUNKS_OF_DIGITAL="CHUNKS_OF_DIGITAL",e}(C);var B=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(b,"column")),this.loadColumnsOfTable=function(n,i){var r=d.U.uuid(),o={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.COLUMNS_OF_TABLE,meta:{addPending:r,pkDigital:n,pk:i},payload:null};return t.ngRedux.dispatch(o),{pending$:t.ngRedux.select(["pending",r]),resolved$:t.ngRedux.select(["resolved",r]),key:r}},this},e.COLUMNS_OF_TABLE="COLUMNS_OF_TABLE",e}(C);var F=function(){function t(t){this.ngRedux=t,this.digital=new D(this.ngRedux).createActions(),this.chunk=new L(this.ngRedux).createActions(),this.column=new B(this.ngRedux).createActions(),this.class_column_mapping=new C(this.ngRedux).createCrudActions(b,"class_column_mapping"),this.namespace=new C(this.ngRedux).createCrudActions(b,"namespace"),this.text_property=new C(this.ngRedux).createCrudActions(b,"text_property")}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var N=function(t){return(t.type||null)+"_"+(t.language||null)+"_"+(t.fk_class||null)+"_"+(t.fk_profile||null)+"_"+(t.fk_property||null)+"_"+(t.fk_project||null)},w={profile:{indexBy:{keyInStore:"pk_profile",indexByFn:function(t){return t.pk_profile.toString()}}},klass:{indexBy:{keyInStore:"pk_class",indexByFn:function(t){return t.pk_class.toString()}},groupBy:[{keyInStore:"basic_type",groupByFn:function(t){return t.basic_type.toString()}}]},property:{indexBy:{keyInStore:"pk_property__has_domain__has_range",indexByFn:function(t){return t.pk_property+"_"+t.has_domain+"_"+t.has_range}},groupBy:[{keyInStore:"pk_property",groupByFn:function(t){return t.pk_property.toString()}},{keyInStore:"has_domain",groupByFn:function(t){return t.has_domain.toString()}},{keyInStore:"has_range",groupByFn:function(t){return t.has_range.toString()}},{keyInStore:"has_domain__fk_property",groupByFn:function(t){return t.has_domain+"_"+t.pk_property}},{keyInStore:"has_range__fk_property",groupByFn:function(t){return t.has_range+"_"+t.pk_property}},{keyInStore:"is_has_type_subproperty",groupByFn:function(t){return t.is_has_type_subproperty?t.is_has_type_subproperty.toString():void 0}}]},label:{indexBy:{keyInStore:"fks",indexByFn:N},groupBy:[{keyInStore:"fk_class__type",groupByFn:function(t){return t.fk_class?t.fk_class+"_"+t.type:void 0}},{keyInStore:"fk_property__type",groupByFn:function(t){return t.fk_property?t.fk_property+"_"+t.type:void 0}},{keyInStore:"fk_profile__type",groupByFn:function(t){return t.fk_profile?t.fk_profile+"_"+t.type:void 0}}]}},U=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions("dfh","profile")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var M=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions("dfh","klass")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var G=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions("dfh","property")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var $=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions("dfh","label")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var J=function(){function t(t){this.ngRedux=t,this.profile=new U(this.ngRedux).createActions(),this.klass=new M(this.ngRedux).createActions(),this.property=new G(this.ngRedux).createActions(),this.label=new $(this.ngRedux).createActions()}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var K="inf",V={persistent_item:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_class",groupByFn:function(t){return t.fk_class.toString()}}]},temporal_entity:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_class",groupByFn:function(t){return t.fk_class.toString()}}]},statement:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"subject",groupByFn:function(t){return Y(t)}},{keyInStore:"subject+property",groupByFn:function(t){return H(t)}},{keyInStore:"object",groupByFn:function(t){return q(t)}},{keyInStore:"object+property",groupByFn:function(t){return X(t)}},{keyInStore:"fk_subject_data",groupByFn:function(t){return d.U.toStr0undef(t.fk_subject_data)}}]},text_property:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_concerned_entity__fk_class_field",groupByFn:function(t){return t.fk_concerned_entity+"_"+t.fk_class_field}},{keyInStore:"fk_concerned_entity",groupByFn:function(t){return t.fk_concerned_entity.toString()}}]},lang_string:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[]},appellation:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[]},time_primitive:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[]},place:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[]},language:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[]},dimension:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[]}};function Y(t){return void 0===t&&(t={}),(t.fk_subject_info||"0")+"-"+(t.fk_subject_data||"0")+"-"+(t.fk_subject_tables_row||"0")+"-"+(t.fk_subject_tables_cell||"0")}function q(t){return void 0===t&&(t={}),(t.fk_object_info||"0")+"-"+(t.fk_object_data||"0")+"-"+(t.fk_object_tables_row||"0")+"-"+(t.fk_object_tables_cell||"0")}function H(t){return void 0===t&&(t={}),(t.fk_subject_info||"0")+"-"+(t.fk_subject_data||"0")+"-"+(t.fk_subject_tables_row||"0")+"-"+(t.fk_subject_tables_cell||"0")+"-"+(t.fk_property||"0")+"-"+(t.fk_property_of_property||"0")}function X(t){return void 0===t&&(t={}),(t.fk_object_info||"0")+"-"+(t.fk_object_data||"0")+"-"+(t.fk_object_tables_row||"0")+"-"+(t.fk_object_tables_cell||"0")+"-"+(t.fk_property||"0")+"-"+(t.fk_property_of_property||"0")}var W=function(t){function i(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(i,t),i.prototype.createInfActions=function(t,e){var n=this;return this.createCrudActions(t,e),this.remove=function(t,e){var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::REMOVE",meta:{items:t,addPending:i,pk:e},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]),key:i}},this.removeSucceeded=function(t,e,i){var r={type:n.actionPrefix+"."+n.modelName+"::REMOVE_SUCCEEDED",meta:{items:t,removePending:e,pk:i},payload:null};n.ngRedux.dispatch(r)},this},i.decorators=[{type:n.Injectable}],i.ctorParameters=function(){return[{type:e.NgRedux}]},i}(C);var Z=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createInfActions(K,"persistent_item")),this.loadMinimal=function(n,i){var r=d.U.uuid(),o={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.MINIMAL_BY_PK,meta:{addPending:r,pk:n,pkEntity:i},payload:null};return t.ngRedux.dispatch(o),{pending$:t.ngRedux.select(["pending",r]),resolved$:t.ngRedux.select(["resolved",r]).pipe(l.filter((function(t){return!!t}))),key:r}},this.typesOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.TYPES_OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.MINIMAL_BY_PK="MINIMAL_BY_PK",e.TYPES_OF_PROJECT="TYPES_OF_PROJECT",e.TYPE_OF_PROJECT="TYPE_OF_PROJECT",e}(W);var z=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createInfActions(K,"temporal_entity")),this.loadNestedObject=function(n,i){var r=d.U.uuid(),o={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OWN_PROPERTIES,meta:{addPending:r,pk:n,pkEntity:i},payload:null};return t.ngRedux.dispatch(o),{pending$:t.ngRedux.select(["pending",r]),resolved$:t.ngRedux.select(["resolved",r]).pipe(l.filter((function(t){return!!t}))),key:r}},this.loadPaginatedList=function(n,i,r,o,a,c,s){var p=d.U.uuid(),u={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.PAGINATED_LIST,meta:{addPending:p,pk:n,pkSourceEntity:i,fkTargetClass:o,pkProperty:r,isOutgoing:a,limit:c,offset:s,alternatives:!1},payload:null};return t.ngRedux.dispatch(u),{pending$:t.ngRedux.select(["pending",p]),resolved$:t.ngRedux.select(["resolved",p]).pipe(l.filter((function(t){return!!t}))),key:p}},this.loadPaginatedAlternativeList=function(n,i,r,o,a,c,s){var p=d.U.uuid(),u={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.PAGINATED_ALTERNATIVE_LIST,meta:{addPending:p,pk:n,pkSourceEntity:i,pkProperty:r,fkTargetClass:o,isOutgoing:a,limit:c,offset:s,alternatives:!0},payload:null};return t.ngRedux.dispatch(u),{pending$:t.ngRedux.select(["pending",p]),resolved$:t.ngRedux.select(["resolved",p]).pipe(l.filter((function(t){return!!t}))),key:p}},this},e.OWN_PROPERTIES="OWN_PROPERTIES",e.PAGINATED_LIST="PAGINATED_LIST",e.PAGINATED_ALTERNATIVE_LIST="PAGINATED_ALTERNATIVE_LIST",e}(W);var Q=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createInfActions(K,"statement")),this.findByParams=function(n,i,r,o,a,c){var s={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.BY_PARAMS,meta:{addPending:d.U.uuid(),pk:i,ofProject:n,pkEntity:r,pkInfoRange:o,pkInfoDomain:a,pkProperty:c},payload:null};t.ngRedux.dispatch(s)},this.loadIngoingAlternatives=function(n,i,r){var o=d.U.uuid(),a={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.ALTERNATIVES_INGOING,meta:{addPending:o,pk:r,pkEntity:n,pkProperty:i},payload:null};return t.ngRedux.dispatch(a),{pending$:t.ngRedux.select(["pending",o]),resolved$:t.ngRedux.select(["resolved",o]).pipe(l.filter((function(t){return!!t}))),key:o}},this.loadPaginatedList=function(n,i,r,o,a,c,s){var p=d.U.uuid(),u={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.PAGINATED_LIST,meta:{addPending:p,pk:n,pkSourceEntity:i,fkTargetClass:o,pkProperty:r,isOutgoing:a,limit:c,offset:s,alternatives:!1},payload:null};return t.ngRedux.dispatch(u),{pending$:t.ngRedux.select(["pending",p]),resolved$:t.ngRedux.select(["resolved",p]).pipe(l.filter((function(t){return!!t}))),key:p}},this.sourcesAndDigitalsOfEntity=function(n,i,r){var o=d.U.uuid(),a={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.SOURCES_AND_DIGITALS_OF_ENTITY,meta:{addPending:o,ofProject:n,pk:i,pkEntity:r},payload:null};return t.ngRedux.dispatch(a),{pending$:t.ngRedux.select(["pending",o]),resolved$:t.ngRedux.select(["resolved",o]).pipe(l.filter((function(t){return!!t}))),key:o}},this},e.ALTERNATIVES_INGOING="ALTERNATIVES_INGOING",e.PAGINATED_LIST="PAGINATED_LIST",e.CONTENT_TREE="CONTENT_TREE",e.SOURCES_AND_DIGITALS_OF_ENTITY="SOURCES_AND_DIGITALS_OF_ENTITY",e.BY_PARAMS="BY_PARAMS",e}(W);var tt=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createInfActions(K,"text_property")),this.loadAlternatives=function(n,i,r){var o=d.U.uuid(),a={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.ALTERNATIVES,meta:{addPending:o,pk:r,fkEntity:n,fkClassField:i},payload:null};return t.ngRedux.dispatch(a),{pending$:t.ngRedux.select(["pending",o]),resolved$:t.ngRedux.select(["resolved",o]).pipe(l.filter((function(t){return!!t}))),key:o}},this},e.ALTERNATIVES="ALTERNATIVES",e}(W);var et=function(){function t(t){this.ngRedux=t,this.persistent_item=new Z(this.ngRedux).createActions(),this.temporal_entity=new z(this.ngRedux).createActions(),this.statement=new Q(this.ngRedux).createActions(),this.language=new C(this.ngRedux).createCrudActions(K,"language"),this.appellation=new C(this.ngRedux).createCrudActions(K,"appellation"),this.lang_string=new C(this.ngRedux).createCrudActions(K,"lang_string"),this.dimension=new C(this.ngRedux).createCrudActions(K,"dimension"),this.place=new C(this.ngRedux).createCrudActions(K,"place"),this.time_primitive=new C(this.ngRedux).createCrudActions(K,"time_primitive"),this.text_property=new tt(this.ngRedux).createActions()}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var nt="pro",it=function(t){return(t.fk_project||null)+"_"+(t.fk_system_type||null)+"_"+(t.fk_language||null)+"_"+(t.fk_dfh_class||null)+"_"+(t.fk_dfh_property||null)+"_"+(t.fk_dfh_property_domain||null)+"_"+(t.fk_dfh_property_range||null)},rt=function(t){return(t.fk_project||null)+"_"+(t.fk_system_type||null)+"_"+(t.fk_dfh_class||null)+"_"+(t.fk_dfh_property||null)+"_"+(t.fk_dfh_property_domain||null)+"_"+(t.fk_dfh_property_range||null)},ot=function(t){var e=t.fk_range_class||t.fk_domain_class||t.fk_class_for_class_field;return(t.fk_project||null)+"_"+(e||null)},at={project:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}}},info_proj_rel:{indexBy:{keyInStore:"fk_project__fk_entity",indexByFn:function(t){return t.fk_project.toString()+"_"+t.fk_entity.toString()}}},class_field_config:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_project__fk_class",groupByFn:ot}]},dfh_class_proj_rel:{indexBy:{keyInStore:"fk_project__fk_class",indexByFn:function(t){return t.fk_project+"_"+t.fk_class}},groupBy:[{keyInStore:"fk_project__enabled_in_entities",groupByFn:function(t){return t.fk_project+"_"+t.enabled_in_entities}},{keyInStore:"fk_project",groupByFn:function(t){return t.fk_project.toString()}}]},dfh_profile_proj_rel:{indexBy:{keyInStore:"fk_project__fk_profile",indexByFn:function(t){return t.fk_project+"_"+t.fk_profile}},groupBy:[{keyInStore:"fk_project__enabled",groupByFn:function(t){return t.fk_project+"_"+t.enabled}},{keyInStore:"fk_project",groupByFn:function(t){return t.fk_project.toString()}}]},text_property:{indexBy:{keyInStore:"fks",indexByFn:it},groupBy:[{keyInStore:"fks_without_lang",groupByFn:rt}]},analysis:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}}}},ct=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"project")),this.loadOfAccount=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_ACCOUNT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this.loadBasics=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.LOAD_BASICS,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_ACCOUNT="OF_ACCOUNT",e.LOAD_BASICS="LOAD_BASICS",e}(C);var st=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"info_proj_rel")),this.markStatementAsFavorite=function(n,i,r){var o=d.U.uuid(),a={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.MARK_ROLE_AS_FAVORITE,meta:{addPending:o,pk:n,pkStatement:i,isOutgoing:r},payload:null};return t.ngRedux.dispatch(a),{pending$:t.ngRedux.select(["pending",o]),resolved$:t.ngRedux.select(["resolved",o]).pipe(l.filter((function(t){return!!t}))),key:o}},this},e.MARK_ROLE_AS_FAVORITE="MARK_ROLE_AS_FAVORITE",e}(C);var pt=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"dfh_class_proj_rel")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var ut=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"dfh_profile_proj_rel")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var lt=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"class_field_config")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var ft=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"text_property")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return t.ngRedux.dispatch(r),{pending$:t.ngRedux.select(["pending",i]),resolved$:t.ngRedux.select(["resolved",i]).pipe(l.filter((function(t){return!!t}))),key:i}},this},e.OF_PROJECT="OF_PROJECT",e}(C);var dt=function(t){function e(e){var n=t.call(this,e)||this;return n.ngRedux=e,n}return E(e,t),e.prototype.createActions=function(){var t=this;return Object.assign(this,this.createCrudActions(nt,"analysis")),this.loadByIdAndVersion=function(n,i,r){var o=d.U.uuid(),a={type:t.actionPrefix+"."+t.modelName+"::LOAD::"+e.BY_PK_AND_VERSION,meta:{addPending:o,pk:n,pkEntity:i,version:r},payload:null};return t.ngRedux.dispatch(a),{pending$:t.ngRedux.select(["pending",o]),resolved$:t.ngRedux.select(["resolved",o]).pipe(l.filter((function(t){return!!t}))),key:o}},this},e.BY_PK_AND_VERSION="BY_PK_AND_VERSION",e}(C);var yt=function(){function t(t){this.ngRedux=t,this.project=new ct(this.ngRedux).createActions(),this.info_proj_rel=new st(this.ngRedux).createActions(),this.text_property=new ft(this.ngRedux).createActions(),this.dfh_class_proj_rel=new pt(this.ngRedux).createActions(),this.dfh_profile_proj_rel=new ut(this.ngRedux).createActions(),this.class_field_config=new lt(this.ngRedux).createActions(),this.analysis=new dt(this.ngRedux).createActions()}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var _t="sys",gt={system_relevant_class:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}},groupBy:[{keyInStore:"fk_class",groupByFn:function(t){return t.fk_class.toString()}},{keyInStore:"required_by_sources",groupByFn:function(t){return t.required_by_sources.toString()}},{keyInStore:"required",groupByFn:function(t){return t.required_by_sources||t.required_by_entities||t.required_by_basics?"true":"false"}}]},config:{indexBy:{keyInStore:"main",indexByFn:function(){return"main"}}}};var ht=function(){function t(t){this.ngRedux=t,this.system_relevant_class=new C(this.ngRedux).createCrudActions(_t,"system_relevant_class"),this.config=new C(this.ngRedux).createCrudActions(_t,"config")}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var mt=function(){function t(t,e,n,i,r,o,a,c,s,p){this.sys=t,this.dat=e,this.dfh=n,this.pro=i,this.inf=r,this.projectApi=o,this.actions=a,this.notificationActions=c,this.loadingBarActions=s,this.ngRedux=p}return t.prototype.createEpics=function(){return p.combineEpics(this.createLoadProjectBasicsEpic(),this.createLoadProjectConfigEpic(),this.createLoadProjectUpdatedEpic(),this.createClosePanelEpic(),this.createActivateTabFocusPanelEpic(),this.createMoveTabFocusPanelEpic(),this.createClosePanelFocusPanelEpic(),this.createSplitPanelActivateTabEpic(),this.createAddTabCloseListEpic())},t.prototype.createLoadProjectBasicsEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.LOAD_PROJECT_BASICS),l.switchMap((function(e){return new u.Observable((function(n){n.next(t.loadingBarActions.startLoading()),t.projectApi.getBasics(e.meta.pk_project).subscribe((function(e){n.next(t.actions.loadProjectBasiscsSucceded(function(t){return{label:this.firstProTextPropStringOfType(t.text_properties,f.SysConfig.PK_SYSTEM_TYPE__TEXT_PROPERTY__LABEL),description:this.firstProTextPropStringOfType(t.text_properties,f.SysConfig.PK_SYSTEM_TYPE__TEXT_PROPERTY__DESCRIPTION),default_language:t.default_language,pk_project:t.pk_entity}}(e[0])))}),(function(e){n.next(t.notificationActions.addToast({type:"error",options:{title:e.message}}))}))}))})))})},t.prototype.createLoadProjectUpdatedEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.LOAD_PROJECT_BASICS_SUCCEEDED),l.mapTo(t.loadingBarActions.completeLoading()))})},t.prototype.createLoadProjectConfigEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.LOAD_PROJECT_CONFIG),l.switchMap((function(e){return new u.Observable((function(n){n.next(t.loadingBarActions.startLoading()),u.combineLatest(t.dfh.profile.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.dfh.klass.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.dfh.property.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.dfh.label.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.sys.system_relevant_class.load().resolved$.pipe(l.filter((function(t){return!!t}))),t.sys.config.load().resolved$.pipe(l.filter((function(t){return!!t}))),t.dat.namespace.load("",e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.pro.text_property.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.pro.dfh_class_proj_rel.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.pro.dfh_profile_proj_rel.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.pro.class_field_config.loadOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t}))),t.inf.persistent_item.typesOfProject(e.meta.pk_project).resolved$.pipe(l.filter((function(t){return!!t})))).pipe(l.filter((function(t){return!t.includes(void 0)}))).subscribe((function(e){n.next(t.actions.loadProjectConfigSucceeded()),n.next(t.loadingBarActions.completeLoading())}),(function(t){}))}))})))})},t.prototype.createClosePanelEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.CLOSE_TAB,R.MOVE_TAB,R.SPLIT_PANEL),l.mergeMap((function(e){return new u.Observable((function(e){t.ngRedux.getState().activeProject.panels.forEach((function(n,i){0===n.tabs.length&&e.next(t.actions.closePanel(i))}))}))})))})},t.prototype.createSplitPanelActivateTabEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.SPLIT_PANEL),l.map((function(e){var n=t.ngRedux.getState().activeProject,i=e.meta.currentPanelIndex,r=n.panels.length<i+1?i-1:i;return t.actions.activateTab(r,0)})))})},t.prototype.createActivateTabFocusPanelEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.ACTIVATE_TAB),l.mergeMap((function(e){return new u.Observable((function(n){t.ngRedux.getState().activeProject.focusedPanel!==e.meta.panelIndex&&n.next(t.actions.focusPanel(e.meta.panelIndex))}))})))})},t.prototype.createMoveTabFocusPanelEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.MOVE_TAB),l.mergeMap((function(e){return new u.Observable((function(n){t.ngRedux.getState().activeProject.focusedPanel!==e.meta.currentPanelIndex&&n.next(t.actions.focusPanel(e.meta.currentPanelIndex))}))})))})},t.prototype.createClosePanelFocusPanelEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.CLOSE_PANEL),l.mergeMap((function(e){return new u.Observable((function(e){t.ngRedux.getState().activeProject.focusedPanel>t.ngRedux.getState().activeProject.panels.length-1&&e.next(t.actions.focusPanel(0))}))})))})},t.prototype.createAddTabCloseListEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(R.ADD_TAB),l.mapTo(t.actions.setListType("")))})},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:ht},{type:F},{type:J},{type:yt},{type:et},{type:o.ProProjectApi},{type:R},{type:T},{type:O},{type:e.NgRedux}]},t}();var Et=function(){function t(){}return t.prototype.login=function(){return{type:t.LOGIN,payload:null,meta:null}},t.prototype.loginSucceeded=function(e){return{type:t.LOGIN_SUCCEEDED,payload:null,meta:{account:e}}},t.prototype.loginFailed=function(e){return{type:t.LOGIN_FAILED,payload:null,meta:null,error:e}},t.prototype.accountUpdated=function(e){return{type:t.ACCOUNT_UPDATED,payload:null,meta:{account:e}}},t.prototype.loadRoles=function(e){return{type:t.LOAD_ROLES,payload:null,meta:{accountId:e}}},t.prototype.loadRolesSucceeded=function(e){return{type:t.LOAD_ROLES_SUCCEEDED,payload:null,meta:{accountRoles:e}}},t.prototype.loadRolesFailed=function(e){return{type:t.LOAD_ROLES_FAILED,payload:null,meta:null}},t.LOGIN="Account::LOGIN",t.LOGIN_SUCCEEDED="Account::LOGIN_SUCCEEDED",t.LOGIN_FAILED="Account::LOGIN_FAILED",t.LOAD_ROLES="Account::LOAD_ROLES",t.LOAD_ROLES_SUCCEEDED="Account::LOAD_ROLES_SUCCEEDED",t.LOAD_ROLES_FAILED="Account::LOAD_ROLES_FAILED",t.ACCOUNT_UPDATED="Account::ACCOUNT_UPDATED",t.decorators=[{type:n.Injectable}],t}();var At=function(){function t(t,e,n,i){this.actions=t,this.loadingBarActions=e,this.accountApi=n,this.notificationActions=i}return t.prototype.createEpics=function(){return p.combineEpics(this.loadRoles())},t.prototype.loadRoles=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(Et.LOAD_ROLES),l.mergeMap((function(e){return new u.Observable((function(n){n.next(t.loadingBarActions.startLoading()),t.accountApi.getRoles(e.meta.accountId).subscribe((function(e){n.next(t.loadingBarActions.completeLoading()),n.next(t.actions.loadRolesSucceeded(e))}),(function(e){n.next(t.notificationActions.addToast({type:"error",options:{title:e}}))}))}))})))})},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:Et},{type:O},{type:o.PubAccountApi},{type:T}]},t}();var vt=function(){function t(t,e,n,i){this.actionPrefix=t,this.modelName=e,this.actions=n,this.notifications=i}return t.prototype.createLoadEpic=function(t,e,n){var i=this;return(function(r,o){return r.pipe(p.ofType(i.type("LOAD",e)),l.mergeMap((function(e){return new u.Observable((function(r){var o=e.meta.addPending,a=e.meta;t(a).subscribe((function(t){n?(n(t,e.meta.pk,a),i.actions.succeeded(t,o,e.meta.pk)):i.actions.loadSucceeded(t,o,e.meta.pk)}),(function(t){i.onError(r,t,o,e.meta.pk)}))}))})))})},t.prototype.createUpsertEpic=function(t,e){var n=this;return(function(i,r){return i.pipe(p.ofType(n.actionPrefix+"."+n.modelName+"::UPSERT"),l.mergeMap((function(i){return new u.Observable((function(r){var o=i.meta.addPending,a=i.meta;t(a).subscribe((function(t){e?(e(t,i.meta.pk),n.actions.succeeded(t,o,i.meta.pk)):n.actions.upsertSucceeded(t,o,i.meta.pk)}),(function(t){n.onError(r,t,o,i.meta.pk)}))}))})))})},t.prototype.createDeleteEpic=function(t){var e=this;return(function(n,i){return n.pipe(p.ofType(e.actionPrefix+"."+e.modelName+"::DELETE"),l.mergeMap((function(n){return new u.Observable((function(i){var r=n.meta.addPending;t(n.meta).subscribe((function(t){e.actions.deleteSucceeded(n.meta.items,r,n.meta.pk)}),(function(t){e.onError(i,t,r,n.meta.pk)}))}))})))})},t.prototype.type=function(t,e){return this.actionPrefix+"."+this.modelName+"::"+t+(e?"::"+e:"")},t.prototype.onError=function(t,e,n,i){t.next(this.notifications.addToast({type:"error",options:{title:e.message}})),this.actions.failed({status:""+e.status},n,i)},t}();var kt=function(){function t(t,e,n,i){this.actions=t,this.notification=e,this.sysRelevantClassApi=n,this.sysConfigApi=i}return t.prototype.createEpics=function(){var t=this,e=new vt(_t,"system_relevant_class",this.actions.system_relevant_class,this.notification),n=new vt(_t,"config",this.actions.config,this.notification);return p.combineEpics(e.createLoadEpic((function(e){return t.sysRelevantClassApi.find()}),""),e.createUpsertEpic((function(e){return t.sysRelevantClassApi.bulkReplaceOrCreate(e.items)})),n.createLoadEpic((function(){return t.sysConfigApi.sysConfigControllerGetSystemConfig().pipe(l.map((function(t){return[t]})))}),""))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:ht},{type:T},{type:o.SysSystemRelevantClassApi},{type:a.SystemConfigurationService}]},t}();var St=function(){function t(t,e,n,i,r,o){this.actions=t,this.notification=e,this.profileApi=n,this.classApi=i,this.propertyApi=r,this.labelApi=o}return t.prototype.createEpics=function(){var t=this,e=new vt("dfh","profile",this.actions.profile,this.notification),n=new vt("dfh","klass",this.actions.klass,this.notification),i=new vt("dfh","label",this.actions.label,this.notification),r=new vt("dfh","property",this.actions.property,this.notification);return p.combineEpics(e.createLoadEpic((function(e){return t.profileApi.ofProject(e.pk)}),U.OF_PROJECT),r.createLoadEpic((function(e){return t.propertyApi.dfhPropertyControllerOfProject(e.pk)}),G.OF_PROJECT),n.createLoadEpic((function(e){return t.classApi.dfhClassControllerOfProject(e.pk)}),M.OF_PROJECT),i.createLoadEpic((function(e){return t.labelApi.ofProject(e.pk)}),$.OF_PROJECT))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:J},{type:T},{type:o.DfhProfileApi},{type:a.DfhClassControllerService},{type:a.DfhPropertyControllerService},{type:o.DfhLabelApi}]},t}();var Pt="tab",Ot={cell:{indexBy:{keyInStore:"pk_cell",indexByFn:function(t){return t.pk_cell.toString()}},groupBy:[{keyInStore:"fk_column_fk_row",groupByFn:function(t){return t.fk_column+"_"+t.fk_row}}]}},It=function(){function t(t){this.ngRedux=t,this.cell=new C(this.ngRedux).createCrudActions(Pt,"cell")}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var Tt="war",xt={entity_preview:{indexBy:{keyInStore:"pk_entity",indexByFn:function(t){return t.pk_entity.toString()}}}},Rt=function(){function t(t){this.ngRedux=t,this.entity_preview=new C(this.ngRedux).createCrudActions(Tt,"entity_preview")}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:e.NgRedux}]},t}();var bt=function(){function t(t,e,n,i,r,o,a,c,s){this.api=t,this.infActions=e,this.proActions=n,this.datActions=i,this.warActions=r,this.tabActions=o,this.dfhActions=a,this.sysActions=c,this.notifications=s}return t.prototype.store=function(t,e){var n=this,i=new u.Subject;return t.subscribe((function(t){n.storeSchemaObject(t,"ofRepo"===e?null:e),i.next(t)}),(function(t){n.notifications.addToast({type:"error",options:{title:t.message}}),i.error(t)})),i},t.prototype.storeGv=function(t,e){var n=this,i=new u.Subject;return t.subscribe((function(t){n.storeSchemaObjectGv(t,"ofRepo"===e?null:e),i.next(t)}),(function(t){n.notifications.addToast({type:"error",options:{title:t.message}}),i.error(t)})),i},t.prototype.storeSchemaObject=function(t,e){var n=this;t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(i){var r;"inf"===i?r=n.infActions:"pro"===i?r=n.proActions:"dat"===i?r=n.datActions:"war"===i&&(r=n.warActions),r&&Object.keys(t[i]).forEach((function(n){r[n].loadSucceeded(t[i][n],void 0,e)}))}))},t.prototype.storeSchemaObjectGv=function(t,e){var n=this;t&&Object.keys(t).length>0&&(Object.keys(t).forEach((function(i){var r;"inf"===i?r=n.infActions:"pro"===i?r=n.proActions:"dat"===i?r=n.datActions:"war"===i?r=n.warActions:"tab"===i?r=n.tabActions:"dfh"===i?r=n.dfhActions:"sys"===i&&(r=n.sysActions),r&&Object.keys(t[i]).forEach((function(n){r[n].loadSucceeded(t[i][n],void 0,e)}))})),console.warn("!!!!!!!! Need to call this.extendEntityPreviewStream(object, pkProject);"))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:o.SchemaObjectApi},{type:et},{type:yt},{type:F},{type:Rt},{type:It},{type:J},{type:ht},{type:T}]},t}();var jt=function(){function t(t,e,n){this.actions=t,this.modelDefinition=e,this.flattenCb=n}return t.prototype.flatten=function(t){if(t&&t.length>0){this.flattenCb(t);var e=c.keys(this.modelDefinition.relations).map((function(t){return t.toString()}));this.items=P(this.items||[],t.filter((function(t){return!!t&&Object.keys(t).length>0})).map((function(t){return c.omit(e,t)})))}return!0},t}();var Ct=function(){function t(t,e,n){var i=this;this.infActions=t,this.datActions=e,this.proActions=n,this.info_proj_rel=new jt(this.proActions.info_proj_rel,o.ProInfoProjRel.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.ProInfoProjRel(t)}))})),this.pro_dfh_class_proj_rel=new jt(this.proActions.dfh_class_proj_rel,o.ProDfhClassProjRel.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.ProDfhClassProjRel(t)}))})),this.pro_dfh_profile_proj_rel=new jt(this.proActions.dfh_profile_proj_rel,o.ProDfhProfileProjRel.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.ProDfhProfileProjRel(t)}))})),this.persistent_item=new jt(this.infActions.persistent_item,o.InfPersistentItem.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfPersistentItem(t),i.statement.flatten(t.incoming_statements),i.statement.flatten(t.outgoing_statements),i.text_property.flatten(t.text_properties),i.info_proj_rel.flatten(t.entity_version_project_rels)}))})),this.temporal_entity=new jt(this.infActions.temporal_entity,o.InfTemporalEntity.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfTemporalEntity(t),i.statement.flatten(t.outgoing_statements),i.statement.flatten(t.incoming_statements),i.text_property.flatten(t.text_properties),i.info_proj_rel.flatten(t.entity_version_project_rels)}))})),this.statement=new jt(this.infActions.statement,o.InfStatement.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfStatement(t),i.info_proj_rel.flatten(t.entity_version_project_rels),t.subject_temporal_entity?i.temporal_entity.flatten([t.subject_temporal_entity]):t.subject_statement&&i.statement.flatten([t.subject_statement]),t.object_persistent_item?i.persistent_item.flatten([t.object_persistent_item]):t.object_appellation?i.appellation.flatten([t.object_appellation]):t.object_place?i.place.flatten([t.object_place]):t.object_time_primitive?i.time_primitive.flatten([t.object_time_primitive]):t.object_language?i.language.flatten([t.object_language]):t.subject_chunk?i.chunk.flatten([t.subject_chunk]):t.object_lang_string?i.lang_string.flatten([t.object_lang_string]):t.object_dimension&&i.dimension.flatten([t.object_dimension])}))})),this.appellation=new jt(this.infActions.appellation,o.InfAppellation.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfAppellation(t)}))})),this.place=new jt(this.infActions.place,o.InfPlace.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfPlace(t)}))})),this.time_primitive=new jt(this.infActions.time_primitive,o.InfTimePrimitive.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfTimePrimitive(t)}))})),this.language=new jt(this.infActions.language,o.InfLanguage.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfLanguage(t)}))})),this.lang_string=new jt(this.infActions.lang_string,o.InfLangString.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfLangString(t),i.language.flatten([t.language]),i.info_proj_rel.flatten(t.entity_version_project_rels)}))})),this.dimension=new jt(this.infActions.dimension,o.InfDimension.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfDimension(t),i.info_proj_rel.flatten(t.entity_version_project_rels)}))})),this.text_property=new jt(this.infActions.text_property,o.InfTextProperty.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.InfTextProperty(t),i.language.flatten([t.language]),i.info_proj_rel.flatten(t.entity_version_project_rels)}))})),this.digital=new jt(this.datActions.digital,o.DatDigital.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.DatDigital(t)}))})),this.chunk=new jt(this.datActions.chunk,o.DatChunk.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.DatChunk(t),i.statement.flatten(t.outgoing_statements)}))})),this.pro_project=new jt(this.proActions.project,o.ProProject.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.ProProject(t),i.language.flatten([t.default_language])}))})),this.pro_text_property=new jt(this.proActions.text_property,o.ProTextProperty.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.ProTextProperty(t),i.language.flatten([t.language])}))})),this.pro_class_field_config=new jt(this.proActions.class_field_config,o.ProClassFieldConfig.getModelDefinition(),(function(t){t.forEach((function(t){t=new o.ProClassFieldConfig(t)}))})),this.analysis=new jt(this.proActions.analysis,{relations:[]},(function(t){t.forEach((function(t){}))}))}return t.prototype.getFlattened=function(){return{pro_project:this.pro_project,pro_text_property:this.pro_text_property,pro_class_field_config:this.pro_class_field_config,pro_dfh_profile_proj_rel:this.pro_dfh_profile_proj_rel,pro_dfh_class_proj_rel:this.pro_dfh_class_proj_rel,info_proj_rel:this.info_proj_rel,analysis:this.analysis,persistent_item:this.persistent_item,temporal_entity:this.temporal_entity,statement:this.statement,appellation:this.appellation,place:this.place,time_primitive:this.time_primitive,language:this.language,text_property:this.text_property,lang_string:this.lang_string,dimension:this.dimension,digital:this.digital,chunk:this.chunk}},t}();var Dt=function(t,e,n){c.values(t).forEach((function(t){t.items&&("UPSERT"===n?t.actions.upsertSucceeded(t.items,void 0,e):t.actions.loadSucceeded(t.items,void 0,e))}))},Lt=function(t){function e(e,n,i,r,o,a){var c=t.call(this,e,n,i,r)||this;return c.actionPrefix=e,c.modelName=n,c.actions=i,c.notifications=r,c.infoProjRelApi=o,c.proActions=a,c}return E(e,t),e.prototype.createUpsertEpic=function(t,e){var n=this;return(function(i,r){return i.pipe(p.ofType(n.actionPrefix+"."+n.modelName+"::UPSERT"),l.mergeMap((function(i){return new u.Observable((function(r){var o=i.meta.addPending,a=i.meta;a.items=a.items.map((function(t){return A({},t,{entity_version_project_rels:[A({},c.pathOr({},["entity_version_project_rels",0],t),{is_in_project:!0})]})})),t(a).subscribe((function(t){e?(e(t,i.meta.pk),n.actions.succeeded(t,o,i.meta.pk)):n.actions.upsertSucceeded(t,o,i.meta.pk)}),(function(t){r.next(n.notifications.addToast({type:"error",options:{title:t.message}})),n.actions.failed({status:""+t.status},o,i.meta.pk)}))}))})))})},e.prototype.createRemoveEpic=function(){var t=this;return(function(e,n){return e.pipe(p.ofType(t.actionPrefix+"."+t.modelName+"::REMOVE"),l.mergeMap((function(e){return new u.Observable((function(n){var i=e.meta.addPending;t.infoProjRelApi.bulkUpdateEprAttributes(e.meta.pk,e.meta.items.map((function(t){return{fk_entity:t.pk_entity,is_in_project:!1}}))).subscribe((function(n){n.length&&t.proActions.info_proj_rel.upsertSucceeded(n,void 0,e.meta.pk),t.actions.removeSucceeded(e.meta.items,i,e.meta.pk)}),(function(r){n.next(t.notifications.addToast({type:"error",options:{title:r.message}})),t.actions.failed({status:""+r.status},i,e.meta.pk)}))}))})))})},e.prototype.createCustomUpsertEpic=function(t,e,n){var i=this;return(function(r,o){return r.pipe(p.ofType(i.actionPrefix+"."+i.modelName+"::UPSERT"+(e?"::"+e:"")),l.mergeMap((function(e){return new u.Observable((function(r){var o=e.meta.addPending,a=e.meta;t(a).subscribe((function(t){n?(n(t,e.meta.pk),i.actions.upsertSucceeded([],o,e.meta.pk)):i.actions.upsertSucceeded(t,o,e.meta.pk)}),(function(t){r.next(i.notifications.addToast({type:"error",options:{title:t.message}})),i.actions.failed({status:""+t.status},o,e.meta.pk)}))}))})))})},e}(vt);var Bt=function(){function t(t,e,n,i,r,o,a,c,s,p){this.notification=t,this.peItApi=e,this.teEnApi=n,this.statementApi=i,this.textPropertyApi=r,this.infActions=o,this.proActions=a,this.datActions=c,this.infoProjRelApi=s,this.schemaObjectService=p}return t.prototype.createEpics=function(){var t=this,e=new Lt(K,"persistent_item",this.infActions.persistent_item,this.notification,this.infoProjRelApi,this.proActions),n=new Lt(K,"temporal_entity",this.infActions.temporal_entity,this.notification,this.infoProjRelApi,this.proActions),i=new Lt(K,"statement",this.infActions.statement,this.notification,this.infoProjRelApi,this.proActions),r=new Lt(K,"text_property",this.infActions.text_property,this.notification,this.infoProjRelApi,this.proActions);return p.combineEpics(e.createLoadEpic((function(e){return t.peItApi.ownProperties(e.pk,e.pkEntity)}),Z.MINIMAL_BY_PK,(function(e,n){var i=e;Object.keys(i).forEach((function(e){var r;"inf"===e?r=t.infActions:"pro"===e&&(r=t.proActions),r&&Object.keys(i[e]).forEach((function(t){r[t].loadSucceeded(i[e][t],void 0,n)}))}))})),e.createLoadEpic((function(e){return t.peItApi.typesOfProject(e.pk)}),Z.TYPES_OF_PROJECT,(function(e,n){var i=e;t.schemaObjectService.storeSchemaObject(i,n)})),e.createUpsertEpic((function(e){return t.peItApi.findOrCreateInfPersistentItems(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.persistent_item.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),e.createRemoveEpic(),n.createLoadEpic((function(e){return t.teEnApi.ownProperties(e.pk,e.pkEntity)}),z.OWN_PROPERTIES,(function(e,n){var i=e;t.schemaObjectService.storeSchemaObject(i,n)})),(function(e,i){return e.pipe(p.ofType(n.type("LOAD",z.PAGINATED_LIST)),l.mergeMap((function(e){return new u.Observable((function(i){var r=e.meta,o=t.teEnApi.temporalEntityList(r.pk,r.pkSourceEntity,r.pkProperty,r.fkTargetClass,r.isOutgoing,r.limit,r.offset),a=r.pk;t.handleTemporalEntityListAction(e,n,i,o,a)}))})))}),(function(e,i){return e.pipe(p.ofType(n.type("LOAD",z.PAGINATED_ALTERNATIVE_LIST)),l.mergeMap((function(e){return new u.Observable((function(i){var r=e.meta,o=t.teEnApi.alternativeTemporalEntityList(r.pk,r.pkSourceEntity,r.pkProperty,r.fkTargetClass,r.isOutgoing,r.limit,r.offset);t.handleTemporalEntityListAction(e,n,i,o,null)}))})))}),n.createUpsertEpic((function(e){return t.teEnApi.findOrCreateInfTemporalEntities(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.temporal_entity.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),n.createRemoveEpic(),i.createLoadEpic((function(e){return t.statementApi.alternativesNotInProjectByEntityPk(e.pkEntity,e.pkProperty,e.pk)}),Q.ALTERNATIVES_INGOING,(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.statement.flatten(e),Dt(i.getFlattened(),null)})),i.createUpsertEpic((function(e){return t.statementApi.findOrCreateInfStatements(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.statement.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),(function(e,n){return e.pipe(p.ofType(i.type("LOAD",z.PAGINATED_LIST)),l.mergeMap((function(e){return new u.Observable((function(n){var r=e.meta,o=t.statementApi.paginatedListTargetingEntityPreviews(r.pk,r.pkSourceEntity,r.pkProperty,r.fkTargetClass,r.isOutgoing,r.limit,r.offset),a=r.pk;t.handleTemporalEntityListAction(e,i,n,o,a)}))})))}),i.createRemoveEpic(),i.createLoadEpic((function(e){return t.statementApi.queryByParams(e.ofProject,e.pk,e.pkEntity,e.pkInfoRange,e.pkInfoDomain,e.pkProperty)}),Q.BY_PARAMS,(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.statement.flatten(e),Dt(i.getFlattened(),n,"LOAD")})),i.createLoadEpic((function(e){return t.statementApi.sourcesAndDigitalsOfEntity(e.ofProject,e.pk,e.pkEntity)}),Q.SOURCES_AND_DIGITALS_OF_ENTITY,(function(e,n){var i=e,r=new Ct(t.infActions,t.datActions,t.proActions);r.statement.flatten(i.statements),Dt(r.getFlattened(),n);var o=new Ct(t.infActions,t.datActions,t.proActions);o.digital.flatten(i.digitals),Dt(o.getFlattened(),n)})),r.createLoadEpic((function(e){return t.textPropertyApi.findAlternativeTextProperties(e.pk,e.fkEntity,e.fkClassField)}),tt.ALTERNATIVES,(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.text_property.flatten(e),Dt(i.getFlattened(),null)})),r.createUpsertEpic((function(e){return t.textPropertyApi.findOrCreateInfTextProperties(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.text_property.flatten(e),Dt(i.getFlattened(),n)})),r.createRemoveEpic())},t.prototype.handleTemporalEntityListAction=function(t,e,n,i,r){var o,a,c=this,s=t.meta,p=s.addPending,u=[{fk_property:s.pkProperty},{fk_target_class:s.fkTargetClass},(o={},o[s.isOutgoing?"fk_subject_info":"fk_object_info"]=s.pkSourceEntity,o),(a={},a[s.alternatives?"alternatives":"ofProject"]=s.alternatives,a)];this.infActions.statement.loadPage(u,s.limit,s.offset,r),i.subscribe((function(t){c.schemaObjectService.storeSchemaObject(t.schemas,r),c.infActions.statement.loadPageSucceeded(t.paginatedStatements,t.count,u,s.limit,s.offset,r),e.actions.loadSucceeded([],p,r)}),(function(t){e.onError(n,t,p,r)}))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:T},{type:o.InfPersistentItemApi},{type:o.InfTemporalEntityApi},{type:o.InfStatementApi},{type:o.InfTextPropertyApi},{type:et},{type:yt},{type:F},{type:o.ProInfoProjRelApi},{type:bt}]},t}();var Ft=function(){function t(t,e,n,i,r,o,a,c,s){this.notification=t,this.datActions=e,this.infActions=n,this.proActions=i,this.digitalApi=r,this.chunkApi=o,this.columnApi=a,this.namespaceApi=c,this.schemaObjectService=s}return t.prototype.createEpics=function(){var t=this,e=new vt(b,"digital",this.datActions.digital,this.notification),n=new vt(b,"chunk",this.datActions.chunk,this.notification),i=new vt(b,"namespace",this.datActions.namespace,this.notification),r=new vt(b,"column",this.datActions.column,this.notification);return p.combineEpics(e.createLoadEpic((function(e){return t.digitalApi.getVersion(e.pkEntity,e.entityVersion?e.entityVersion:null)}),D.LOAD_VERSION),e.createUpsertEpic((function(e){return t.digitalApi.bulkUpsert(e.pk,e.items)})),e.createDeleteEpic((function(e){return t.digitalApi.bulkDelete(e.items.map((function(t){return t.pk_entity})))})),n.createLoadEpic((function(e){return t.chunkApi.ofDigital(e.pk,e.pkDigital)}),L.CHUNKS_OF_DIGITAL,(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.chunk.flatten(e),Dt(i.getFlattened(),n)})),i.createLoadEpic((function(e){return t.namespaceApi.byProject(e.pk)}),""),r.createLoadEpic((function(e){return t.columnApi.ofDigital(e.pk,e.pkDigital)}),B.COLUMNS_OF_TABLE,(function(e,n){var i=e;t.schemaObjectService.storeSchemaObject(i,n)})))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:T},{type:F},{type:et},{type:yt},{type:o.DatDigitalApi},{type:o.DatChunkApi},{type:o.DatColumnApi},{type:o.DatNamespaceApi},{type:bt}]},t}();var Nt=function(){function t(t,e,n,i,r,o,a,c,s,p,u,l){this.notification=t,this.infActions=e,this.proActions=n,this.datActions=i,this.projectApi=r,this.infoProjRelApi=o,this.classProjRelApi=a,this.profileProjRelApi=c,this.classFieldConfApi=s,this.textPropertyApi=p,this.analysisApi=u,this.schemaObjectService=l}return t.prototype.createEpics=function(){var t=this,e=new vt(nt,"project",this.proActions.project,this.notification),n=new vt(nt,"info_proj_rel",this.proActions.info_proj_rel,this.notification),i=new vt(nt,"dfh_class_proj_rel",this.proActions.dfh_class_proj_rel,this.notification),r=new vt(nt,"dfh_profile_proj_rel",this.proActions.dfh_profile_proj_rel,this.notification),o=new vt(nt,"class_field_config",this.proActions.class_field_config,this.notification),a=new vt(nt,"text_property",this.proActions.text_property,this.notification),c=new vt(nt,"analysis",this.proActions.analysis,this.notification);return p.combineEpics(e.createLoadEpic((function(e){return t.projectApi.ofAccount(e.pk)}),ct.OF_ACCOUNT,(function(e){var n=new Ct(t.infActions,t.datActions,t.proActions);n.pro_project.flatten(e),Dt(n.getFlattened())})),e.createLoadEpic((function(e){return t.projectApi.getBasics(e.pk)}),ct.LOAD_BASICS,(function(e){var n=new Ct(t.infActions,t.datActions,t.proActions);n.pro_project.flatten(e),Dt(n.getFlattened())})),n.createUpsertEpic((function(e){return t.infoProjRelApi.bulkUpdateEprAttributes(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.info_proj_rel.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),n.createLoadEpic((function(e){return t.infoProjRelApi.markStatementAsFavorite(e.pk,e.pkStatement,e.isOutgoing)}),st.MARK_ROLE_AS_FAVORITE,(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.info_proj_rel.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),o.createLoadEpic((function(e){return t.classFieldConfApi.ofProject(e.pk)}),lt.OF_PROJECT,(function(e){var n=new Ct(t.infActions,t.datActions,t.proActions);n.pro_class_field_config.flatten(e),Dt(n.getFlattened())})),o.createUpsertEpic((function(e){return t.classFieldConfApi.bulkUpsert(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.pro_class_field_config.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),i.createLoadEpic((function(e){return t.classProjRelApi.ofProject(e.pk)}),pt.OF_PROJECT,(function(e){var n=new Ct(t.infActions,t.datActions,t.proActions);n.pro_dfh_class_proj_rel.flatten(e),Dt(n.getFlattened())})),i.createUpsertEpic((function(e){return t.classProjRelApi.bulkUpsert(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.pro_dfh_class_proj_rel.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),r.createLoadEpic((function(e){return t.profileProjRelApi.ofProject(e.pk)}),ut.OF_PROJECT,(function(e){var n=new Ct(t.infActions,t.datActions,t.proActions);n.pro_dfh_profile_proj_rel.flatten(e),Dt(n.getFlattened())})),r.createUpsertEpic((function(e){return t.profileProjRelApi.bulkUpsert(e.pk,e.items)}),(function(e,n){var i=new Ct(t.infActions,t.datActions,t.proActions);i.pro_dfh_profile_proj_rel.flatten(e),Dt(i.getFlattened(),n,"UPSERT")})),a.createLoadEpic((function(e){return t.textPropertyApi.ofProject(e.pk)}),ft.OF_PROJECT,(function(e,n){var i=e;t.schemaObjectService.storeSchemaObject(i,n)})),a.createUpsertEpic((function(e){return t.textPropertyApi.bulkUpsert(e.pk,e.items)}),(function(e,n){var i=e;t.schemaObjectService.storeSchemaObject(i,n)})),a.createDeleteEpic((function(e){return t.textPropertyApi.bulkDelete(e.pk,e.items)})),c.createDeleteEpic((function(e){return t.analysisApi.analysisControllerBulkDelete(e.pk,e.items.map((function(t){return t.pk_entity})))})))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:T},{type:et},{type:yt},{type:F},{type:o.ProProjectApi},{type:o.ProInfoProjRelApi},{type:o.ProDfhClassProjRelApi},{type:o.ProDfhProfileProjRelApi},{type:o.ProClassFieldConfigApi},{type:o.ProTextPropertyApi},{type:a.AnalysisService},{type:bt}]},t}();var wt=function(){function t(){var t=this;this.createEpics=function(){return p.combineEpics(t.createResolveEpic())}}return t.prototype.createResolveEpic=function(){return function(t,e){return t.pipe(l.filter((function(t){return!!t&&!!t.meta&&!!t.meta.removePending})),l.switchMap((function(t){return u.of({type:"CLEAN_UP_RESOLVED",meta:{uuid:t.meta.removePending}})})))}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();var Ut=function(){function t(t,e,n,i,r,o,a,c,s,f){var d=this;this.loadingBarEpics=t,this.notificationEpics=e,this.activeProjectEpics=n,this.accountEpics=i,this.systemEpics=r,this.dfhEpics=o,this.infEpics=a,this.datEpics=c,this.proEpics=s,this.actionResolver=f,this.rootEpicStream$=new u.BehaviorSubject(p.combineEpics(this.loadingBarEpics.createEpics(),this.notificationEpics.createEpics(),this.systemEpics.createEpics(),this.activeProjectEpics.createEpics(),this.accountEpics.createEpics(),this.dfhEpics.createEpics(),this.infEpics.createEpics(),this.datEpics.createEpics(),this.proEpics.createEpics(),this.actionResolver.createEpics())),this.rootEpic=function(t,e,n){return void 0===n&&(n=void 0),d.rootEpicStream$.pipe(l.mergeMap((function(i){return i(t,e,n)})))}}return t.prototype.getRootEpic=function(){return this.rootEpic},t.prototype.addEpic=function(t){this.rootEpicStream$.next(t)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:I},{type:x},{type:mt},{type:At},{type:kt},{type:St},{type:Bt},{type:Ft},{type:Nt},{type:wt}]},t}();var Mt={account:void 0,roles:void 0},Gt=function(t,e){switch(void 0===t&&(t=Mt),e.type){case Et.LOGIN_SUCCEEDED:case Et.ACCOUNT_UPDATED:t=A({},t,{account:e.meta.account});break;case Et.LOAD_ROLES_SUCCEEDED:t=A({},t,{roles:e.meta.accountRoles});break;case Et.LOAD_ROLES_FAILED:t=A({},t,{roles:[]})}return t},$t={loading:!1,progress:0};function Jt(t,e){switch(void 0===t&&(t=$t),e.type){case O.START:return A({},t,{loading:!0});case O.STOP:case O.COPMLETE:return A({},t,{loading:!1})}return t}var Kt={label:"",list:"",uiIdSerial:0,panelSerial:0,focusedPanel:0,panels:[]},Vt=function(t,e){var n,i,r,o,a,s,p,u,l,f,d,y,_;switch(void 0===t&&(t=Kt),e.type){case R.LOAD_PROJECT_BASICS_SUCCEEDED:t=A({},t,e.meta.projectPreview);break;case R.LOAD_PROJECT_CONFIG:t=A({},t,{loadingConfigData:!0});break;case R.LOAD_PROJECT_CONFIG_SUCCEEDED:t=A({},t,{configDataInitialized:!0,loadingConfigData:!1});break;case R.SET_PANELS:t=A({},t,{panels:e.meta.panels,uiIdSerial:e.meta.uiIdSerial,panelSerial:e.meta.panelSerial,focusedPanel:e.meta.focusedPanel});break;case R.SET_LIST_TYPE:t=A({},t,{list:e.meta.list});break;case R.ACTIVATE_TAB:u=e.meta.panelIndex,l=e.meta.tabIndex,t=A({},t,{panels:Object.assign(P(t.panels),(n={},n[u]=A({},t.panels[u],{tabs:P(t.panels[u].tabs).map((function(t,e){return t.active=e===l,t}))}),n))});break;case R.MOVE_TAB:if(f=e.meta.previousPanelIndex,d=e.meta.currentPanelIndex,y=e.meta.previousTabIndex,_=e.meta.currentTabIndex,f===d){var g=P(t.panels[d].tabs);h.moveItemInArray(g,y,_),t=A({},t,{panels:Object.assign(P(t.panels),(i={},i[d]=A({},t.panels[d],{tabs:g}),i))})}else{var m=P(t.panels[f].tabs),E=P(t.panels[d].tabs);h.transferArrayItem(m,E,y,_),t=A({},t,{panels:Object.assign(P(t.panels),(r={},r[f]=A({},t.panels[f],{tabs:m.map((function(t,e){return t.active=e===(y<m.length?y:y-1),t}))}),r[d]=A({},t.panels[d],{tabs:E.map((function(t,e){return t.active=e===_,t}))}),r))})}break;case R.ADD_TAB:0===t.panels.length&&(t=A({},t,{panels:[{id:t.panelSerial,tabs:[]}],focusedPanel:0,panelSerial:t.panelSerial+1})),u=t.focusedPanel,t=A({},t,{panels:Object.assign(P(t.panels),(o={},o[u]=A({},t.panels[u],{tabs:P(t.panels[u].tabs.map((function(t){return t.active=!1,t})),[A({},c.omit(["pathSegment"],e.meta.tab),{path:["activeProject",e.meta.tab.pathSegment,t.uiIdSerial.toString()]})])}),o)),uiIdSerial:t.uiIdSerial+1});break;case R.CLOSE_TAB:u=e.meta.panelIndex,l=e.meta.tabIndex,(t=A({},t,{panels:Object.assign(P(t.panels),(a={},a[u]=A({},t.panels[u],{tabs:P(t.panels[u].tabs).filter((function(t,e){return e!==l}))}),a))})).panels[u].tabs.find((function(t){return t.active}))||(t=A({},t,{panels:Object.assign(P(t.panels),(s={},s[u]=A({},t.panels[u],{tabs:P(t.panels[u].tabs).map((function(e,n){return e.active=n===(l<t.panels[u].tabs.length?l:l-1),e}))}),s))}));break;case R.CLOSE_PANEL:u=e.meta.panelIndex;var v=P(t.panels);v.splice(u,1),t=A({},t,{panels:v});break;case R.FOCUS_PANEL:t=A({},t,{focusedPanel:e.meta.panelIndex});break;case R.SPLIT_PANEL:f=e.meta.previousPanelIndex,l=e.meta.tabIndex,d=e.meta.currentPanelIndex;var k=t.panels[f].tabs[l];t=A({},t,{panels:Object.assign(P(t.panels),(p={},p[f]=A({},t.panels[f],{tabs:P(t.panels[f].tabs).filter((function(t,e){return e!==l})).map((function(t,e){return 0===e&&(t.active=!0),t}))}),p))});var S=P(t.panels);S.splice(d,0,{id:t.panelSerial,tabs:[k]}),t=A({},t,{panels:S,panelSerial:t.panelSerial+1});break;case R.SET_REFINING_CHUNK:t=A({},t,{refiningChunk:e.payload.refiningChunk});break;case R.SET_CREATING_MENTIONING:t=A({},t,{creatingMentioning:e.payload.creatingMentioning});break;case R.SET_MENTIONINGS_FOCUSED_IN_TEXT:t=A({},t,{mentioningsFocusedInText:e.payload.mentioningsFocusedInText});break;case R.SET_MENTIONINGS_FOCUSED_IN_TABLE:t=A({},t,{mentioningsFocusedInTable:e.payload.mentioningsFocusedInTable});break;case R.DESTROY:t=Kt}return t},Yt=function(t){Object.assign(this,t)};var qt=function(){function t(){this.destroy=function(){return{type:t.DESTROY,meta:null,payload:null}}}return t.DESTROY="Information::DESTROY",t.decorators=[{type:n.Injectable}],v([e.dispatch(),k("design:type",Object)],t.prototype,"destroy",void 0),t}();var Ht=new Yt;function Xt(t,e){switch(void 0===t&&(t=Ht),e.type){case qt.DESTROY:t={}}return t}var Wt=function(){function t(){this.initializeList=function(e){return{type:t.INITIALIZE_LIST,meta:{pkAllowedClasses:e},payload:null}},this.destroy=function(){return{type:t.DESTROY,meta:null,payload:null}}}return t.INITIALIZE_LIST="SourceList::INITIALIZE_LIST",t.DESTROY="SourceList::DESTROY",t.decorators=[{type:n.Injectable}],v([e.dispatch(),k("design:type",Object)],t.prototype,"initializeList",void 0),v([e.dispatch(),k("design:type",Object)],t.prototype,"destroy",void 0),t}();var Zt=function(t){Object.assign(this,t)};var zt=new Zt;function Qt(t,e){void 0===t&&(t=zt);var n=e;switch(n.type){case Wt.INITIALIZE_LIST:t=A({},t,{list:{pkAllowedClasses:n.meta.pkAllowedClasses}});break;case Wt.DESTROY:t={}}return t}var te=function(){function t(){}return t.prototype.loadProjectsSucceeded=function(e){return{type:t.LOAD_PROJECTS_SUCCEEDED,payload:e,meta:null}},t.LOAD_PROJECTS_SUCCEEDED="LOAD_PROJECTS_SUCCEEDED",t.decorators=[{type:n.Injectable}],t}();var ee={records:[]},ne=function(t,e){switch(void 0===t&&(t=ee),e.type){case te.LOAD_PROJECTS_SUCCEEDED:return A({},t,{records:e.payload.map((function(t){return{record:t}}))})}return t},ie=function(){return ne};var re=function(t){return"by_"+t},oe=function(t){return t.map((function(t){return Object.keys(t)[0]})).join("__")},ae=function(t){return"pag_"+t},ce=function(t){return ae(re(t))},se=function(t){return t.map((function(t){return c.values(t)[0]})).join("_")};function pe(t,e){return le(t,e)+"_"+ue(t,e)}function ue(t,e){return le(t,e)+t}function le(t,e){return e}var fe=function(){function t(t,e){this.actionPrefix=t,this.configs=e,this.updatingBy=function(t){return"updating_"+re(t)},this.deletingBy=function(t){return"deleting_"+re(t)},this.removingBy=function(t){return"removing_"+re(t)}}return t.prototype.createReducers=function(){var t=this,e={};d.U.obj2KeyValueArr(this.configs).forEach((function(n){e[n.key]=t.createModelReducers(n.key,n.value)}));var n=c.keys(this.configs).map((function(e){return t.createEntityModelMapReducers(e)}));return e.pkEntityModelMap=y.composeReducers.apply(void 0,P(n)),g.combineReducers(e)},t.prototype.createModelReducers=function(t,e){var n=this,i=this.actionPrefix;return function(r,o){void 0===r&&(r={});var a=n.facette(t,e);if(o.type===i+"."+t+"::LOAD")r=a(o,r,(function(t){return A({},c.omit([re(e.indexBy.keyInStore)],t),{loading:!0})}));else if(o.type===i+"."+t+"::LOAD_SUCCEEDED")r=a(o,r,(function(t){return A({},n.mergeItemsInState(e,t,o),{loading:!1})}));else if(o.type===i+"."+t+"::UPSERT")r=a(o,r,(function(t){var i;return A({},t,((i={})[n.updatingBy(e.indexBy.keyInStore)]=n.indexKeyObject(o,e),i))}));else if(o.type===i+"."+t+"::UPSERT_SUCCEEDED")r=a(o,r,(function(t){var i;return A({},n.mergeItemsInState(e,t,o),((i={})[n.updatingBy(e.indexBy.keyInStore)]=c.omit(c.values(n.indexKeyObject(o,e)),t[n.updatingBy(e.indexBy.keyInStore)]),i))}));else if(o.type===i+"."+t+"::DELETE")r=a(o,r,(function(t){var i;return A({},t,((i={})[n.deletingBy(e.indexBy.keyInStore)]=n.indexKeyObject(o,e),i))}));else if(o.type===i+"."+t+"::DELETE_SUCCEEDED"){var s=n.deletingBy(e.indexBy.keyInStore);r=a(o,r,(function(t){var i;return t=A({},n.deleteItemsFromState(e,o,t),((i={})[s]=c.omit(c.values(n.indexKeyObject(o,e)),t[n.deletingBy(e.indexBy.keyInStore)]),i)),Object.keys(t[s]).length||(t=c.omit([s],t)),t}))}else if(o.type===i+"."+t+"::REMOVE")r=a(o,r,(function(t){var i;return A({},t,((i={})[n.removingBy(e.indexBy.keyInStore)]=n.indexKeyObject(o,e),i))}));else if(o.type===i+"."+t+"::REMOVE_SUCCEEDED"){var p=n.removingBy(e.indexBy.keyInStore);r=a(o,r,(function(t){var i;return t=A({},n.deleteItemsFromState(e,o,t),((i={})[p]=c.omit(c.values(n.indexKeyObject(o,e)),t[n.removingBy(e.indexBy.keyInStore)]),i)),Object.keys(t[p]).length||(t=c.omit([p],t)),t}))}else if(o.type===i+"."+t+"::FAILED")r=a(o,r,(function(t){return A({},t,c.omit([re(e.indexBy.keyInStore)],t),{loading:!1})}));else if(o.type===i+"."+t+"::LOAD_PAGE"){var u=o.meta,l=ce(oe(u.paginateBy)),f=u.paginateBy.map((function(t){return c.values(t)[0]})).join("_"),d=pe(u.limit,u.offset);r=a(o,r,(function(t){var e,n,i;return A({},t,((e={})[l]=A({},t[l],((n={})[f]=A({},(t[l]||{})[f],{loading:A({},((t[l]||{})[f]||{}).loading,(i={},i[d]=!0,i))}),n)),e))}))}else if(o.type===i+"."+t+"::LOAD_PAGE_FAILED"){u=o.meta;var y=ce(oe(u.paginateBy)),_=se(u.paginateBy),g=pe(u.limit,u.offset);r=a(o,r,(function(t){var e,n,i;return A({},t,((e={})[y]=A({},t[y],((n={})[_]=A({},(t[y]||{})[_],{loading:A({},((t[y]||{})[_]||{}).loading,(i={},i[g]=!1,i))}),n)),e))}))}else if(o.type===i+"."+t+"::LOAD_PAGE_SUCCEEDED"){var h=o.meta,m=ce(oe(h.paginateBy)),E=se(h.paginateBy),v=le(h.limit,h.offset),k=pe(h.limit,h.offset),S={};h.pks&&h.pks.forEach((function(t,e){S[v+e]=t})),r=a(o,r,(function(t){var e,n,i;return A({},t,((e={})[m]=A({},t[m],((n={})[E]=A({},(t[m]||{})[E],{count:h.count||0,rows:A({},((t[m]||{})[E]||{}).rows,S),loading:A({},((t[m]||{})[E]||{}).loading,(i={},i[k]=!1,i))}),n)),e))}))}return r}},t.prototype.createEntityModelMapReducers=function(t){var e=this.actionPrefix;return function(n,i){void 0===n&&(n={});var r=e+"."+t;if(!(i&&i.meta&&i.meta.items&&i.meta.items.length))return n;var o=i.meta.items;switch(i.type){case r+"::LOAD_SUCCEEDED":case r+"::UPSERT_SUCCEEDED":for(var a={},s=0;s<o.length;s++){(u=o[s]).pk_entity&&(a[u.pk_entity]={modelName:t,fkClass:u.fkClass})}n=A({},n,a);break;case r+"::DELETE_SUCCEEDED":case r+"::REMOVE_SUCCEEDED":var p=[];for(s=0;s<o.length;s++){var u;(u=o[s]).pk_entity&&p.push(u.pk_entity)}n=c.omit(p,n)}return n}},t.prototype.facette=function(t,e){var n=this;return(function(i,r,o){var a,c;c=(a=n.deFacette(t,e,i,c,r)).outerState;var s=o(r=a.state);return n.enFacette(t,e,i,s,c)})},t.prototype.deFacette=function(t,e,n,i,r){if(this.isFacetteByPk(e,n)){var o=n.meta.pk||"repo";return{outerState:r,state:r[e.facetteByPk]&&r[e.facetteByPk][o]||{}}}return{outerState:i,state:r}},t.prototype.enFacette=function(t,e,n,i,r){var o,a;if(this.isFacetteByPk(e,n)){var c=n.meta.pk||"repo";i=A({},r,((o={})[e.facetteByPk]=A({},r[e.facetteByPk],((a={})[c]=i,a)),o))}return i},t.prototype.isFacetteByPk=function(t,e){if(t.facetteByPk){if(e.meta&&void 0!==e.meta.pk)return!0;throw Error("Facette action must provide pk for facette")}return!1},t.prototype.deleteItemsFromState=function(t,e,n){var i=this,r=e.meta.items,o=(t.groupBy&&t.groupBy.length?t.groupBy:[]).map((function(t){return{groupByKey:re(t.keyInStore),groupByFn:t.groupByFn}})),a=re(t.indexBy.keyInStore);return r.forEach((function(e){var r,s=t.indexBy.indexByFn(e);(n[a]?n[a][s]:void 0)&&(n=A({},n,((r={})[a]=A({},c.omit([s],n[a])),r)),o.forEach((function(t){var r,o,a=i.getGroupKeyOfItem(t.groupByFn,e);n=A({},n,((r={})[t.groupByKey]=A({},n[t.groupByKey],((o={})[a]=A({},c.omit([s],(n[t.groupByKey]||{})[a])),o)),r))})))})),Object.keys(n[a]).length<1&&(n=A({},c.omit([a],n))),o.forEach((function(t){Object.keys(n[t.groupByKey]).forEach((function(e){var i;Object.keys(n[t.groupByKey][e]).length<1&&(n=A({},n,((i={})[t.groupByKey]=c.omit([e],n[t.groupByKey]),i)))})),Object.keys(n[t.groupByKey]).length<1&&(n=A({},c.omit([t.groupByKey],n)))})),n},t.prototype.mergeItemsInState=function(t,e,n){var i=this,r=n.meta.items,o=(t.groupBy&&t.groupBy.length?t.groupBy:[]).map((function(t){return{groupByKey:re(t.keyInStore),groupByFn:t.groupByFn}})),a=re(t.indexBy.keyInStore);return r.forEach((function(n){var r,s,p,u=t.indexBy.indexByFn(n),l=e[a]?e[a][u]:void 0,f=t.equals||c.equals;l&&f(n,l)?p=l:(p=n,e=A({},e,((r={})[a]=A({},e[a],((s={})[u]=p,s)),r)),o.forEach((function(t){var n,r,o,a,s,f=i.getGroupKeyOfItem(t.groupByFn,l);e=A({},e,((n={})[t.groupByKey]=A({},e[t.groupByKey],((r={})[f]=A({},c.omit([u],(e[t.groupByKey]||{})[f])),r)),n));var d=i.getGroupKeyOfItem(t.groupByFn,p);void 0!==d&&(e=A({},e,((o={})[t.groupByKey]=A({},e[t.groupByKey],((a={})[d]=A({},(e[t.groupByKey]||{})[d],((s={})[u]=p,s)),a)),o)))})))})),e},t.prototype.indexKeyObject=function(t,e){return c.indexBy((function(t){return t}),t.meta.items.filter((function(t){try{return e.indexBy.indexByFn(t),!0}catch(t){return!1}})).map((function(t){return e.indexBy.indexByFn(t)})))},t.prototype.groupBy=function(t,e,n){var i=this,r={};return t.forEach((function(t){var o,a=i.getGroupKeyOfItem(e,t);if(a){var c=n(t);r[a]=A({},r[a],((o={})[c]=t,o))}})),r},t.prototype.getGroupKeyOfItem=function(t,e){var n;try{n=t(e)}catch(t){}return n},t}();function de(){return new fe(_t,gt).createReducers()}function ye(){return new fe("dfh",w).createReducers()}function _e(){return new fe(K,V).createReducers()}function ge(){return new fe(b,j).createReducers()}function he(){return new fe(nt,at).createReducers()}function me(){return new fe(Tt,xt).createReducers()}function Ee(){return new fe(Pt,Ot).createReducers()}var Ae=function(t,e){return void 0===t&&(t={}),"INIT_SANDBOX_STATE"===e.type&&(t=A({},t,e.payload)),t},ve=function(t,e){var n;if(void 0===t&&(t={}),e&&e.meta&&e.meta.addPending){var i=e.meta.addPending;t=A({},t,((n={})[i]=!0,n))}if(e&&e.meta&&e.meta.removePending){i=e.meta.removePending;t=A({},c.omit([i],t))}return t},ke=function(t,e){var n;if(void 0===t&&(t={}),e&&e.meta&&e.meta.removePending){var i=e.meta.removePending;t=A({},t,((n={})[i]=e.meta,n))}return t},Se=function(t,e){if(void 0===t&&(t={}),e&&"CLEAN_UP_RESOLVED"===e.type){var n=e.meta.uuid;t=A({},c.omit([n],t))}return t},Pe=function(t,e){return void 0===t&&(t={}),e&&"SET_APP_STATE"===e.type&&(t=e.payload),t},Oe=y.composeReducers(y.defaultFormReducer(),g.combineReducers({account:Gt,loadingBar:Jt,activeProject:Vt,routes:_.routerReducer,information:Xt,sources:Qt,sandboxState:Ae,projects:ie(),sys:de(),dfh:ye(),inf:_e(),dat:ge(),pro:he(),war:me(),tab:Ee(),pending:ve,resolved:y.composeReducers(ke,Se)}),Pe),Ie=function(){function t(){}return t.prototype.createEpics=function(){return p.combineEpics()},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),Te=function(){function t(){}return t.prototype.createEpics=function(){return p.combineEpics()},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),xe=new n.InjectionToken("app.INITIAL_STATE"),Re={},be=function(){function t(t,e,n,i){this.ngRedux=t;var r=p.createEpicMiddleware();t.configureStore(Oe,i,[r,s],e.isEnabled()?[e.enhancer()]:[]),r.run(n.getRootEpic())}return t.decorators=[{type:n.NgModule,args:[{imports:[e.NgReduxModule,i.SlimLoadingBarModule,r.ToastyModule.forRoot(),o.SDKBrowserModule.forRoot(),a.ApiModule],providers:[Et,R,O,T,At,mt,I,x,F,J,et,yt,ht,It,Rt,Ft,St,Bt,Nt,kt,Ie,Te,Ut,bt,{provide:xe,useValue:Re}]}]}],t.ctorParameters=function(){return[{type:e.NgRedux},{type:e.DevToolsExtension},{type:Ut},{type:void 0,decorators:[{type:n.Inject,args:[xe]}]}]},t}();var je=function(t){Object.assign(this,t)};var Ce=function(t){Object.assign(this,t)};var De=function(t){this.showProperties=!1,this.showRightArea=!0,this.rightPanelTabs=[],this.rightPanelActiveTab=0,this.showHeader=!0,Object.assign(this,t)};var Le=function(t){Object.assign(this,t)};var Be=function(t){Object.assign(this,t)};var Fe=function(t){Object.assign(this,t)};var Ne=function(){};var we=function(){};var Ue=function(){};var Me=function(){};var Ge=function(){};var $e=function(){};var Je=function(){};var Ke=function(){};var Ve=function(){};var Ye=function(){};var qe=function(){};var He=function(){};var Xe=function(){};var We=function(){};var Ze=function(){};var ze=function(){};var Qe=function(){};var tn=function(){};var en=function(){};var nn=function(){};var rn=function(){};t.ChunkActionsFactory=L,t.ChunkSlice=we,t.ClassColumnMappingSlice=Me,t.ColumnActionsFactory=B,t.ColumnSlice=Ue,t.DatActions=F,t.DfhActions=J,t.DfhClassActionFactory=M,t.DfhClassSlice=Ke,t.DfhLabelActionFactory=$,t.DfhLabelSlice=Ye,t.DfhProfileActionFactory=U,t.DfhProfileSlice=Je,t.DfhPropertyActionFactory=G,t.DfhPropertySlice=Ve,t.DigitalActionsFactory=D,t.DigitalSlice=Ne,t.EntityDetail=De,t.Flattener=Ct,t.INIT_SANDBOX_STATE="INIT_SANDBOX_STATE",t.InfActionFactory=W,t.InfActions=et,t.InfAppellationSlice=Qe,t.InfDimensionSlice=en,t.InfEpicsFactory=Lt,t.InfLangStringSlice=tn,t.InfLanguageSlice=ze,t.InfPersistentItemActionFactory=Z,t.InfPersistentItemSlice=qe,t.InfPlaceSlice=We,t.InfStatementActionFactory=Q,t.InfStatementSlice=Xe,t.InfTemporalEntityActionFactory=z,t.InfTemporalEntitySlice=He,t.InfTextPropertyActionFactory=tt,t.InfTextPropertySlice=nn,t.InfTimePrimitiveSlice=Ze,t.Information=Yt,t.List=Ce,t.NamespaceSlice=$e,t.Notifications=je,t.PR_ENTITY_MODEL_MAP="pkEntityModelMap",t.ProActions=yt,t.ProAnalysisActionFactory=dt,t.ProClassFieldConfigActionFactory=lt,t.ProDfhClassProjRelActionFactory=pt,t.ProDfhProfileProjRelActionFactory=ut,t.ProInfoProjRelActionFactory=st,t.ProProjectActionFactory=ct,t.ProTextPropertyActionFactory=ft,t.ProjectSettingsData=Le,t.ReducerFactory=fe,t.ReduxStoreModule=be,t.RootEpics=Ut,t.SET_APP_STATE="SET_APP_STATE",t.SchemaActionsFactory=C,t.SchemaEpicsFactory=vt,t.SchemaObjectService=bt,t.SourceList=Zt,t.SysActions=ht,t.TabActions=It,t.TabBase=Be,t.TabCellSlice=rn,t.TextPropertySlice=Ge,t.Types=Fe,t.WarActions=Rt,t.by=re,t.cleanupResolved=Se,t.createDatReducer=ge,t.createDfhReducer=ye,t.createInfReducer=_e,t.createProReducer=he,t.createSysReducer=de,t.createTabReducer=Ee,t.createWarReducer=me,t.datDefinitions=j,t.datRoot=b,t.dfhDefinitions=w,t.dfhLabelByFksKey=N,t.dfhRoot="dfh",t.facetteByPk="by_namespace",t.getEnd=ue,t.getFromTo=pe,t.getStart=le,t.indexStatementByObject=q,t.indexStatementByObjectProperty=X,t.indexStatementBySubject=Y,t.indexStatementBySubjectProperty=H,t.infDefinitions=V,t.infRoot=K,t.pag=ae,t.paginateKey=se,t.paginateName=oe,t.paginatedBy=ce,t.pendingRequestReducer=ve,t.proClassFieldConfgByProjectAndClassKey=ot,t.proDefinitions=at,t.proRoot=nt,t.resolvedRequestReducer=ke,t.rootReducer=Oe,t.sandboxStateReducer=Ae,t.setAppState=Pe,t.storeFlattened=Dt,t.sysDefinitions=gt,t.sysRoot=_t,t.tabDefinitions=Ot,t.tabRoot=Pt,t.textPropertyByFksKey=it,t.textPropertyByFksWithoutLang=rt,t.warDefinitions=xt,t.warRoot=Tt,t.ɵa=xe,t.ɵb=Et,t.ɵc=R,t.ɵd=O,t.ɵe=T,t.ɵf=At,t.ɵg=mt,t.ɵh=I,t.ɵi=x,t.ɵj=Ft,t.ɵk=St,t.ɵl=Bt,t.ɵm=Nt,t.ɵn=kt,t.ɵo=Ie,t.ɵp=Te,t.ɵq=wt,t.ɵr=Gt,t.ɵs=Jt,t.ɵt=Vt,t.ɵu=Xt,t.ɵv=Qt,t.ɵw=ie,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=kleiolab-lib-redux-src-lib-redux-store.umd.min.js.map