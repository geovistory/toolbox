!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular-redux/store"),require("@angular/core"),require("@cime/ngx-slim-loading-bar"),require("@cime/ngx-toasty"),require("@kleiolab/lib-sdk-lb3"),require("@kleiolab/lib-sdk-lb4"),require("ramda"),require("redux-dynamic-middlewares"),require("redux-observable-es6-compat"),require("rxjs"),require("rxjs/operators"),require("@kleiolab/lib-config"),require("@kleiolab/lib-utils"),require("@cime/ngx-slim-loading-bar/src/slim-loading-bar.service"),require("@cime/ngx-toasty/src/toasty.service"),require("@angular-redux/form"),require("@angular-redux/router"),require("redux"),require("@angular/cdk/drag-drop")):"function"==typeof define&&define.amd?define("@kleiolab/lib-redux/src/lib/redux-store",["exports","@angular-redux/store","@angular/core","@cime/ngx-slim-loading-bar","@cime/ngx-toasty","@kleiolab/lib-sdk-lb3","@kleiolab/lib-sdk-lb4","ramda","redux-dynamic-middlewares","redux-observable-es6-compat","rxjs","rxjs/operators","@kleiolab/lib-config","@kleiolab/lib-utils","@cime/ngx-slim-loading-bar/src/slim-loading-bar.service","@cime/ngx-toasty/src/toasty.service","@angular-redux/form","@angular-redux/router","redux","@angular/cdk/drag-drop"],t):t(((e=e||self).kleiolab=e.kleiolab||{},e.kleiolab["lib-redux"]=e.kleiolab["lib-redux"]||{},e.kleiolab["lib-redux"].src=e.kleiolab["lib-redux"].src||{},e.kleiolab["lib-redux"].src.lib=e.kleiolab["lib-redux"].src.lib||{},e.kleiolab["lib-redux"].src.lib["redux-store"]={}),e.store,e.ng.core,e.ngxSlimLoadingBar,e.ngxToasty,e.libSdkLb3,e.libSdkLb4,e.ramda,e.dynamicMiddlewares,e.reduxObservableEs6Compat,e.rxjs,e.rxjs.operators,e.libConfig,e.libUtils,e.slimLoadingBar_service,e.toasty_service,e.form,e.router,e.redux,e.ng.cdk["drag-drop"])}(this,(function(e,t,n,i,r,o,a,c,s,p,u,l,f,d,y,_,g,h,m,A){"use strict";s=s&&s.hasOwnProperty("default")?s.default:s;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function v(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var k=function(){return(k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function S(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function P(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function I(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function j(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(I(arguments[t]));return e}var O=function(){function e(){}return e.prototype.login=function(){return{type:e.LOGIN,payload:null,meta:null}},e.prototype.loginSucceeded=function(t){return{type:e.LOGIN_SUCCEEDED,payload:null,meta:{account:t}}},e.prototype.loginFailed=function(t){return{type:e.LOGIN_FAILED,payload:null,meta:null,error:t}},e.prototype.accountUpdated=function(t){return{type:e.ACCOUNT_UPDATED,payload:null,meta:{account:t}}},e.prototype.loadRoles=function(t){return{type:e.LOAD_ROLES,payload:null,meta:{accountId:t}}},e.prototype.loadRolesSucceeded=function(t){return{type:e.LOAD_ROLES_SUCCEEDED,payload:null,meta:{accountRoles:t}}},e.prototype.loadRolesFailed=function(t){return{type:e.LOAD_ROLES_FAILED,payload:null,meta:null}},e.LOGIN="Account::LOGIN",e.LOGIN_SUCCEEDED="Account::LOGIN_SUCCEEDED",e.LOGIN_FAILED="Account::LOGIN_FAILED",e.LOAD_ROLES="Account::LOAD_ROLES",e.LOAD_ROLES_SUCCEEDED="Account::LOAD_ROLES_SUCCEEDED",e.LOAD_ROLES_FAILED="Account::LOAD_ROLES_FAILED",e.ACCOUNT_UPDATED="Account::ACCOUNT_UPDATED",e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var b=function(){function e(){this.startLoading=function(){return{type:e.START,meta:null,payload:null}},this.stopLoading=function(){return{type:e.STOP,meta:null,payload:null}},this.completeLoading=function(){return{type:e.COPMLETE,meta:null,payload:null}}}return e.START="LOADING_BAR_START",e.STOP="LOADING_BAR_STOP",e.COPMLETE="LOADING_BAR_COPMLETE",e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),S([t.dispatch(),P("design:type",Object)],e.prototype,"startLoading",void 0),S([t.dispatch(),P("design:type",Object)],e.prototype,"stopLoading",void 0),S([t.dispatch(),P("design:type",Object)],e.prototype,"completeLoading",void 0),e}();var x=function(){function e(){this.addToast=function(t){return{type:e.ADD_TOAST,meta:null,payload:t}}}return e.ADD_TOAST="Notifications::ADD_TOAST",e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var T=function(){function e(e,t,n,i){this.actions=e,this.loadingBarActions=t,this.accountApi=n,this.notificationActions=i}return e.prototype.createEpics=function(){return p.combineEpics(this.loadRoles())},e.prototype.loadRoles=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(O.LOAD_ROLES),l.mergeMap((function(t){return new u.Observable((function(n){n.next(e.loadingBarActions.startLoading()),e.accountApi.getRoles(t.meta.accountId).subscribe((function(t){n.next(e.loadingBarActions.completeLoading()),n.next(e.actions.loadRolesSucceeded(t))}),(function(t){n.next(e.notificationActions.addToast({type:"error",options:{title:t}}))}))}))})))})},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:O},{type:b},{type:o.PubAccountApi},{type:x}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(O),n.ɵɵinject(b),n.ɵɵinject(o.PubAccountApi),n.ɵɵinject(x))},token:e,providedIn:"root"}),e}();var R=function(){function e(){}return e.prototype.loadProjectBasics=function(t){return{type:e.LOAD_PROJECT_BASICS,payload:null,meta:{pk_project:t}}},e.prototype.loadProjectBasiscsSucceded=function(t){return{type:e.LOAD_PROJECT_BASICS_SUCCEEDED,payload:null,meta:{projectPreview:t}}},e.prototype.loadProjectConfig=function(t){return{type:e.LOAD_PROJECT_CONFIG,payload:null,meta:{pk_project:t}}},e.prototype.loadProjectConfigSucceeded=function(){return{type:e.LOAD_PROJECT_CONFIG_SUCCEEDED,payload:{},meta:null}},e.prototype.setListType=function(t){return{type:e.SET_LIST_TYPE,payload:null,meta:{list:t}}},e.prototype.setPanels=function(t,n,i,r){return{type:e.SET_PANELS,payload:null,meta:{panels:t,uiIdSerial:n,panelSerial:i,focusedPanel:r}}},e.prototype.activateTab=function(t,n){return{type:e.ACTIVATE_TAB,payload:null,meta:{panelIndex:t,tabIndex:n}}},e.prototype.moveTab=function(t,n,i,r){return{type:e.MOVE_TAB,payload:null,meta:{previousPanelIndex:t,currentPanelIndex:n,previousTabIndex:i,currentTabIndex:r}}},e.prototype.closeTab=function(t,n){return{type:e.CLOSE_TAB,payload:null,meta:{panelIndex:t,tabIndex:n}}},e.prototype.addTab=function(t){return{type:e.ADD_TAB,payload:null,meta:{tab:t}}},e.prototype.splitPanel=function(t,n,i){return{type:e.SPLIT_PANEL,payload:null,meta:{previousPanelIndex:t,tabIndex:n,currentPanelIndex:i}}},e.prototype.closePanel=function(t){return{type:e.CLOSE_PANEL,payload:null,meta:{panelIndex:t}}},e.prototype.focusPanel=function(t){return{type:e.FOCUS_PANEL,payload:null,meta:{panelIndex:t}}},e.prototype.setRefiningChunk=function(t){return{type:e.SET_REFINING_CHUNK,payload:{refiningChunk:t},meta:null}},e.prototype.setCreatingMentioning=function(t){return{type:e.SET_CREATING_MENTIONING,payload:{creatingMentioning:t},meta:null}},e.prototype.setMentioningsFocusedInText=function(t){return{type:e.SET_MENTIONINGS_FOCUSED_IN_TEXT,payload:{mentioningsFocusedInText:t},meta:null}},e.prototype.setMentioningsFocusedInTable=function(t){return{type:e.SET_MENTIONINGS_FOCUSED_IN_TABLE,payload:{mentioningsFocusedInTable:t},meta:null}},e.prototype.destroy=function(){return{type:e.DESTROY,payload:null,meta:null}},e.LOAD_PROJECT_BASICS="ActiveProject::LOAD_PROJECT_BASICS",e.LOAD_PROJECT_BASICS_FAILED="ActiveProject::LOAD_PROJECT_BASICS_FAILED",e.LOAD_PROJECT_BASICS_SUCCEEDED="ActiveProject::LOAD_PROJECT_BASICS_SUCCEEDED",e.LOAD_PROJECT_CONFIG="ActiveProject::LOAD_PROJECT_CONFIG",e.LOAD_PROJECT_CONFIG_SUCCEEDED="ActiveProject::LOAD_PROJECT_CONFIG_SUCCEEDED",e.SET_LIST_TYPE="ActiveProject::SET_LIST_TYPE",e.SET_PANELS="ActiveProject::SET_PANELS",e.ACTIVATE_TAB="ActiveProject::ACTIVATE_TAB",e.MOVE_TAB="ActiveProject::MOVE_TAB",e.CLOSE_TAB="ActiveProject::CLOSE_TAB",e.ADD_TAB="ActiveProject::ADD_TAB",e.SPLIT_PANEL="ActiveProject::SPLIT_PANEL",e.CLOSE_PANEL="ActiveProject::CLOSE_PANEL",e.FOCUS_PANEL="ActiveProject::FOCUS_PANEL",e.UPDATE_SELECTED_CHUNK="ActiveProject::UPDATE_SELECTED_CHUNK",e.SET_REFINING_CHUNK="ActiveProject::SET_REFINING_CHUNK",e.SET_CREATING_MENTIONING="ActiveProject::SET_CREATING_MENTIONING",e.SET_MENTIONINGS_FOCUSED_IN_TEXT="ActiveProject::SET_MENTIONINGS_FOCUSED_IN_TEXT",e.SET_MENTIONINGS_FOCUSED_IN_TABLE="ActiveProject::SET_MENTIONINGS_FOCUSED_IN_TABLE",e.DESTROY="ActiveProject::DESTROY",e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var D="dat",C={digital:{equals:function(e,t){return!(!t.quill_doc&&e.quill_doc)&&(e.pk_entity===t.pk_entity&&e.entity_version===t.entity_version)},indexBy:{keyInStore:"pk_entity__entity_version",indexByFn:function(e){return e.pk_entity.toString()+"_"+e.entity_version.toString()}},groupBy:[{keyInStore:"pk_entity",groupByFn:function(e){return e.pk_entity.toString()}},{keyInStore:"pk_text",groupByFn:function(e){return e.pk_text.toString()}}]},chunk:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_text",groupByFn:function(e){return e.fk_text.toString()}}]},column:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_digital",groupByFn:function(e){return e.fk_digital.toString()}}]},class_column_mapping:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_column",groupByFn:function(e){return e.fk_column.toString()}}]},text_property:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_entity__fk_system_type",groupByFn:function(e){return e.fk_entity+"_"+e.fk_system_type}}]},namespace:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_project",groupByFn:function(e){return e.fk_project.toString()}}]}};var L=function(){function e(e){this.ngRedux=e}return e.prototype.createCrudActions=function(e,t){var n=this;return this.actionPrefix=e,this.modelName=t,this.load=function(e,t){void 0===e&&(e="");var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::LOAD"+(e?"::"+e:""),meta:{addPending:i,pk:t},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]),key:i}},this.loadSucceeded=function(e,t,i){var r={type:n.actionPrefix+"."+n.modelName+"::LOAD_SUCCEEDED",meta:{items:e,removePending:t,pk:i},payload:null};n.ngRedux.dispatch(r)},this.upsert=function(e,t){var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::UPSERT",meta:{items:e,addPending:i,pk:t},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]),key:i}},this.upsertSucceeded=function(e,t,i){var r={type:n.actionPrefix+"."+n.modelName+"::UPSERT_SUCCEEDED",meta:{items:e,removePending:t,pk:i},payload:null};n.ngRedux.dispatch(r)},this.succeeded=function(e,t,i){var r={type:"general::UPSERT_SUCCEEDED",meta:{items:e,removePending:t,pk:i},payload:null};n.ngRedux.dispatch(r)},this.delete=function(e,t){var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::DELETE",meta:{items:e,addPending:i,pk:t},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this.deleteSucceeded=function(e,t,i){var r={type:n.actionPrefix+"."+n.modelName+"::DELETE_SUCCEEDED",meta:{items:e,removePending:t,pk:i},payload:null};n.ngRedux.dispatch(r)},this.failed=function(e,t,i){var r={type:n.actionPrefix+"."+n.modelName+"::FAILED",meta:{removePending:t,pk:i},payload:null,error:e};n.ngRedux.dispatch(r)},this.loadPage=function(e,t,i,r){var o={type:n.actionPrefix+"."+n.modelName+"::LOAD_PAGE",meta:{paginateBy:e,limit:t,offset:i,pk:r},payload:null};n.ngRedux.dispatch(o)},this.loadPageSucceeded=function(e,t,i,r,o,a){var c={type:n.actionPrefix+"."+n.modelName+"::LOAD_PAGE_SUCCEEDED",meta:{pks:e,paginateBy:i,count:t,limit:r,offset:o,pk:a},payload:null};n.ngRedux.dispatch(c)},this.loadPageFailed=function(e,t,i,r){var o={type:n.actionPrefix+"."+n.modelName+"::LOAD_PAGE_FAILED",meta:{paginateBy:e,limit:t,offset:i,pk:r},payload:null};n.ngRedux.dispatch(o)},this},e}();var B=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(D,"digital")),this.loadVersion=function(n,i){var r=d.U.uuid(),o={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.LOAD_VERSION,meta:{addPending:r,pkEntity:n,entityVersion:i},payload:null};return e.ngRedux.dispatch(o),{pending$:e.ngRedux.select(["pending",r]),resolved$:e.ngRedux.select(["resolved",r]),key:r}},this},t.LOAD_VERSION="LOAD_VERSION",t}(L);var N=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(D,"chunk")),this.loadChunksOfDigital=function(n,i){var r=d.U.uuid(),o={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.CHUNKS_OF_DIGITAL,meta:{addPending:r,pkDigital:n,pk:i},payload:null};return e.ngRedux.dispatch(o),{pending$:e.ngRedux.select(["pending",r]),resolved$:e.ngRedux.select(["resolved",r]),key:r}},this},t.CHUNKS_OF_DIGITAL="CHUNKS_OF_DIGITAL",t}(L);var F=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(D,"column")),this.loadColumnsOfTable=function(n,i){var r=d.U.uuid(),o={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.COLUMNS_OF_TABLE,meta:{addPending:r,pkDigital:n,pk:i},payload:null};return e.ngRedux.dispatch(o),{pending$:e.ngRedux.select(["pending",r]),resolved$:e.ngRedux.select(["resolved",r]),key:r}},this},t.COLUMNS_OF_TABLE="COLUMNS_OF_TABLE",t}(L);var w=function(){function e(e){this.ngRedux=e,this.digital=new B(this.ngRedux).createActions(),this.chunk=new N(this.ngRedux).createActions(),this.column=new F(this.ngRedux).createActions(),this.class_column_mapping=new L(this.ngRedux).createCrudActions(D,"class_column_mapping"),this.namespace=new L(this.ngRedux).createCrudActions(D,"namespace"),this.text_property=new L(this.ngRedux).createCrudActions(D,"text_property")}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var U=function(e){return(e.type||null)+"_"+(e.language||null)+"_"+(e.fk_class||null)+"_"+(e.fk_profile||null)+"_"+(e.fk_property||null)+"_"+(e.fk_project||null)},M={profile:{indexBy:{keyInStore:"pk_profile",indexByFn:function(e){return e.pk_profile.toString()}}},klass:{indexBy:{keyInStore:"pk_class",indexByFn:function(e){return e.pk_class.toString()}},groupBy:[{keyInStore:"basic_type",groupByFn:function(e){return e.basic_type.toString()}}]},property:{indexBy:{keyInStore:"pk_property__has_domain__has_range",indexByFn:function(e){return e.pk_property+"_"+e.has_domain+"_"+e.has_range}},groupBy:[{keyInStore:"pk_property",groupByFn:function(e){return e.pk_property.toString()}},{keyInStore:"has_domain",groupByFn:function(e){return e.has_domain.toString()}},{keyInStore:"has_range",groupByFn:function(e){return e.has_range.toString()}},{keyInStore:"has_domain__fk_property",groupByFn:function(e){return e.has_domain+"_"+e.pk_property}},{keyInStore:"has_range__fk_property",groupByFn:function(e){return e.has_range+"_"+e.pk_property}},{keyInStore:"is_has_type_subproperty",groupByFn:function(e){return e.is_has_type_subproperty?e.is_has_type_subproperty.toString():void 0}}]},label:{indexBy:{keyInStore:"fks",indexByFn:U},groupBy:[{keyInStore:"fk_class__type",groupByFn:function(e){return e.fk_class?e.fk_class+"_"+e.type:void 0}},{keyInStore:"fk_property__type",groupByFn:function(e){return e.fk_property?e.fk_property+"_"+e.type:void 0}},{keyInStore:"fk_profile__type",groupByFn:function(e){return e.fk_profile?e.fk_profile+"_"+e.type:void 0}}]}},G=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions("dfh","profile")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var $=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions("dfh","klass")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var J=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions("dfh","property")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var K=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions("dfh","label")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var V=function(){function e(e){this.ngRedux=e,this.profile=new G(this.ngRedux).createActions(),this.klass=new $(this.ngRedux).createActions(),this.property=new J(this.ngRedux).createActions(),this.label=new K(this.ngRedux).createActions()}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var Y="inf",q={persistent_item:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_class",groupByFn:function(e){return e.fk_class.toString()}}]},temporal_entity:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_class",groupByFn:function(e){return e.fk_class.toString()}}]},statement:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"subject",groupByFn:function(e){return H(e)}},{keyInStore:"subject+property",groupByFn:function(e){return W(e)}},{keyInStore:"object",groupByFn:function(e){return X(e)}},{keyInStore:"object+property",groupByFn:function(e){return Z(e)}},{keyInStore:"fk_subject_data",groupByFn:function(e){return d.U.toStr0undef(e.fk_subject_data)}}]},text_property:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_concerned_entity__fk_class_field",groupByFn:function(e){return e.fk_concerned_entity+"_"+e.fk_class_field}},{keyInStore:"fk_concerned_entity",groupByFn:function(e){return e.fk_concerned_entity.toString()}}]},lang_string:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[]},appellation:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[]},time_primitive:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[]},place:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[]},language:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[]},dimension:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[]}};function H(e){return void 0===e&&(e={}),(e.fk_subject_info||"0")+"-"+(e.fk_subject_data||"0")+"-"+(e.fk_subject_tables_row||"0")+"-"+(e.fk_subject_tables_cell||"0")}function X(e){return void 0===e&&(e={}),(e.fk_object_info||"0")+"-"+(e.fk_object_data||"0")+"-"+(e.fk_object_tables_row||"0")+"-"+(e.fk_object_tables_cell||"0")}function W(e){return void 0===e&&(e={}),(e.fk_subject_info||"0")+"-"+(e.fk_subject_data||"0")+"-"+(e.fk_subject_tables_row||"0")+"-"+(e.fk_subject_tables_cell||"0")+"-"+(e.fk_property||"0")+"-"+(e.fk_property_of_property||"0")}function Z(e){return void 0===e&&(e={}),(e.fk_object_info||"0")+"-"+(e.fk_object_data||"0")+"-"+(e.fk_object_tables_row||"0")+"-"+(e.fk_object_tables_cell||"0")+"-"+(e.fk_property||"0")+"-"+(e.fk_property_of_property||"0")}var z=function(e){function i(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(i,e),i.prototype.createInfActions=function(e,t){var n=this;return this.createCrudActions(e,t),this.remove=function(e,t){var i=d.U.uuid(),r={type:n.actionPrefix+"."+n.modelName+"::REMOVE",meta:{items:e,addPending:i,pk:t},payload:null};return n.ngRedux.dispatch(r),{pending$:n.ngRedux.select(["pending",i]),resolved$:n.ngRedux.select(["resolved",i]),key:i}},this.removeSucceeded=function(e,t,i){var r={type:n.actionPrefix+"."+n.modelName+"::REMOVE_SUCCEEDED",meta:{items:e,removePending:t,pk:i},payload:null};n.ngRedux.dispatch(r)},this},i.decorators=[{type:n.Injectable}],i.ctorParameters=function(){return[{type:t.NgRedux}]},i}(L);var Q=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createInfActions(Y,"persistent_item")),this.loadMinimal=function(n,i){var r=d.U.uuid(),o={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.MINIMAL_BY_PK,meta:{addPending:r,pk:n,pkEntity:i},payload:null};return e.ngRedux.dispatch(o),{pending$:e.ngRedux.select(["pending",r]),resolved$:e.ngRedux.select(["resolved",r]).pipe(l.filter((function(e){return!!e}))),key:r}},this.typesOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.TYPES_OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.MINIMAL_BY_PK="MINIMAL_BY_PK",t.TYPES_OF_PROJECT="TYPES_OF_PROJECT",t.TYPE_OF_PROJECT="TYPE_OF_PROJECT",t}(z);var ee=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createInfActions(Y,"temporal_entity")),this.loadNestedObject=function(n,i){var r=d.U.uuid(),o={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OWN_PROPERTIES,meta:{addPending:r,pk:n,pkEntity:i},payload:null};return e.ngRedux.dispatch(o),{pending$:e.ngRedux.select(["pending",r]),resolved$:e.ngRedux.select(["resolved",r]).pipe(l.filter((function(e){return!!e}))),key:r}},this.loadPaginatedList=function(n,i,r,o,a,c,s){var p=d.U.uuid(),u={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.PAGINATED_LIST,meta:{addPending:p,pk:n,pkSourceEntity:i,fkTargetClass:o,pkProperty:r,isOutgoing:a,limit:c,offset:s,alternatives:!1},payload:null};return e.ngRedux.dispatch(u),{pending$:e.ngRedux.select(["pending",p]),resolved$:e.ngRedux.select(["resolved",p]).pipe(l.filter((function(e){return!!e}))),key:p}},this.loadPaginatedAlternativeList=function(n,i,r,o,a,c,s){var p=d.U.uuid(),u={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.PAGINATED_ALTERNATIVE_LIST,meta:{addPending:p,pk:n,pkSourceEntity:i,pkProperty:r,fkTargetClass:o,isOutgoing:a,limit:c,offset:s,alternatives:!0},payload:null};return e.ngRedux.dispatch(u),{pending$:e.ngRedux.select(["pending",p]),resolved$:e.ngRedux.select(["resolved",p]).pipe(l.filter((function(e){return!!e}))),key:p}},this},t.OWN_PROPERTIES="OWN_PROPERTIES",t.PAGINATED_LIST="PAGINATED_LIST",t.PAGINATED_ALTERNATIVE_LIST="PAGINATED_ALTERNATIVE_LIST",t}(z);var te=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createInfActions(Y,"statement")),this.findByParams=function(n,i,r,o,a,c){var s={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.BY_PARAMS,meta:{addPending:d.U.uuid(),pk:i,ofProject:n,pkEntity:r,pkInfoRange:o,pkInfoDomain:a,pkProperty:c},payload:null};e.ngRedux.dispatch(s)},this.loadIngoingAlternatives=function(n,i,r){var o=d.U.uuid(),a={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.ALTERNATIVES_INGOING,meta:{addPending:o,pk:r,pkEntity:n,pkProperty:i},payload:null};return e.ngRedux.dispatch(a),{pending$:e.ngRedux.select(["pending",o]),resolved$:e.ngRedux.select(["resolved",o]).pipe(l.filter((function(e){return!!e}))),key:o}},this.loadPaginatedList=function(n,i,r,o,a,c,s){var p=d.U.uuid(),u={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.PAGINATED_LIST,meta:{addPending:p,pk:n,pkSourceEntity:i,fkTargetClass:o,pkProperty:r,isOutgoing:a,limit:c,offset:s,alternatives:!1},payload:null};return e.ngRedux.dispatch(u),{pending$:e.ngRedux.select(["pending",p]),resolved$:e.ngRedux.select(["resolved",p]).pipe(l.filter((function(e){return!!e}))),key:p}},this.sourcesAndDigitalsOfEntity=function(n,i,r){var o=d.U.uuid(),a={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.SOURCES_AND_DIGITALS_OF_ENTITY,meta:{addPending:o,ofProject:n,pk:i,pkEntity:r},payload:null};return e.ngRedux.dispatch(a),{pending$:e.ngRedux.select(["pending",o]),resolved$:e.ngRedux.select(["resolved",o]).pipe(l.filter((function(e){return!!e}))),key:o}},this},t.ALTERNATIVES_INGOING="ALTERNATIVES_INGOING",t.PAGINATED_LIST="PAGINATED_LIST",t.CONTENT_TREE="CONTENT_TREE",t.SOURCES_AND_DIGITALS_OF_ENTITY="SOURCES_AND_DIGITALS_OF_ENTITY",t.BY_PARAMS="BY_PARAMS",t}(z);var ne=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createInfActions(Y,"text_property")),this.loadAlternatives=function(n,i,r){var o=d.U.uuid(),a={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.ALTERNATIVES,meta:{addPending:o,pk:r,fkEntity:n,fkClassField:i},payload:null};return e.ngRedux.dispatch(a),{pending$:e.ngRedux.select(["pending",o]),resolved$:e.ngRedux.select(["resolved",o]).pipe(l.filter((function(e){return!!e}))),key:o}},this},t.ALTERNATIVES="ALTERNATIVES",t}(z);var ie=function(){function e(e){this.ngRedux=e,this.persistent_item=new Q(this.ngRedux).createActions(),this.temporal_entity=new ee(this.ngRedux).createActions(),this.statement=new te(this.ngRedux).createActions(),this.language=new L(this.ngRedux).createCrudActions(Y,"language"),this.appellation=new L(this.ngRedux).createCrudActions(Y,"appellation"),this.lang_string=new L(this.ngRedux).createCrudActions(Y,"lang_string"),this.dimension=new L(this.ngRedux).createCrudActions(Y,"dimension"),this.place=new L(this.ngRedux).createCrudActions(Y,"place"),this.time_primitive=new L(this.ngRedux).createCrudActions(Y,"time_primitive"),this.text_property=new ne(this.ngRedux).createActions()}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var re="pro",oe=function(e){return(e.fk_project||null)+"_"+(e.fk_system_type||null)+"_"+(e.fk_language||null)+"_"+(e.fk_dfh_class||null)+"_"+(e.fk_dfh_property||null)+"_"+(e.fk_dfh_property_domain||null)+"_"+(e.fk_dfh_property_range||null)},ae=function(e){return(e.fk_project||null)+"_"+(e.fk_system_type||null)+"_"+(e.fk_dfh_class||null)+"_"+(e.fk_dfh_property||null)+"_"+(e.fk_dfh_property_domain||null)+"_"+(e.fk_dfh_property_range||null)},ce=function(e){var t=e.fk_range_class||e.fk_domain_class||e.fk_class_for_class_field;return(e.fk_project||null)+"_"+(t||null)},se={project:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}}},info_proj_rel:{indexBy:{keyInStore:"fk_project__fk_entity",indexByFn:function(e){return e.fk_project.toString()+"_"+e.fk_entity.toString()}}},class_field_config:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_project__fk_class",groupByFn:ce}]},dfh_class_proj_rel:{indexBy:{keyInStore:"fk_project__fk_class",indexByFn:function(e){return e.fk_project+"_"+e.fk_class}},groupBy:[{keyInStore:"fk_project__enabled_in_entities",groupByFn:function(e){return e.fk_project+"_"+e.enabled_in_entities}},{keyInStore:"fk_project",groupByFn:function(e){return e.fk_project.toString()}}]},dfh_profile_proj_rel:{indexBy:{keyInStore:"fk_project__fk_profile",indexByFn:function(e){return e.fk_project+"_"+e.fk_profile}},groupBy:[{keyInStore:"fk_project__enabled",groupByFn:function(e){return e.fk_project+"_"+e.enabled}},{keyInStore:"fk_project",groupByFn:function(e){return e.fk_project.toString()}}]},text_property:{indexBy:{keyInStore:"fks",indexByFn:oe},groupBy:[{keyInStore:"fks_without_lang",groupByFn:ae}]},analysis:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}}}},pe=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"project")),this.loadOfAccount=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_ACCOUNT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this.loadBasics=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.LOAD_BASICS,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_ACCOUNT="OF_ACCOUNT",t.LOAD_BASICS="LOAD_BASICS",t}(L);var ue=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"info_proj_rel")),this.markStatementAsFavorite=function(n,i,r){var o=d.U.uuid(),a={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.MARK_ROLE_AS_FAVORITE,meta:{addPending:o,pk:n,pkStatement:i,isOutgoing:r},payload:null};return e.ngRedux.dispatch(a),{pending$:e.ngRedux.select(["pending",o]),resolved$:e.ngRedux.select(["resolved",o]).pipe(l.filter((function(e){return!!e}))),key:o}},this},t.MARK_ROLE_AS_FAVORITE="MARK_ROLE_AS_FAVORITE",t}(L);var le=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"dfh_class_proj_rel")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var fe=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"dfh_profile_proj_rel")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var de=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"class_field_config")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var ye=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"text_property")),this.loadOfProject=function(n){var i=d.U.uuid(),r={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.OF_PROJECT,meta:{addPending:i,pk:n},payload:null};return e.ngRedux.dispatch(r),{pending$:e.ngRedux.select(["pending",i]),resolved$:e.ngRedux.select(["resolved",i]).pipe(l.filter((function(e){return!!e}))),key:i}},this},t.OF_PROJECT="OF_PROJECT",t}(L);var _e=function(e){function t(t){var n=e.call(this,t)||this;return n.ngRedux=t,n}return v(t,e),t.prototype.createActions=function(){var e=this;return Object.assign(this,this.createCrudActions(re,"analysis")),this.loadByIdAndVersion=function(n,i,r){var o=d.U.uuid(),a={type:e.actionPrefix+"."+e.modelName+"::LOAD::"+t.BY_PK_AND_VERSION,meta:{addPending:o,pk:n,pkEntity:i,version:r},payload:null};return e.ngRedux.dispatch(a),{pending$:e.ngRedux.select(["pending",o]),resolved$:e.ngRedux.select(["resolved",o]).pipe(l.filter((function(e){return!!e}))),key:o}},this},t.BY_PK_AND_VERSION="BY_PK_AND_VERSION",t}(L);var ge=function(){function e(e){this.ngRedux=e,this.project=new pe(this.ngRedux).createActions(),this.info_proj_rel=new ue(this.ngRedux).createActions(),this.text_property=new ye(this.ngRedux).createActions(),this.dfh_class_proj_rel=new le(this.ngRedux).createActions(),this.dfh_profile_proj_rel=new fe(this.ngRedux).createActions(),this.class_field_config=new de(this.ngRedux).createActions(),this.analysis=new _e(this.ngRedux).createActions()}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var he="sys",me={system_relevant_class:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}},groupBy:[{keyInStore:"fk_class",groupByFn:function(e){return e.fk_class.toString()}},{keyInStore:"required_by_sources",groupByFn:function(e){return e.required_by_sources.toString()}},{keyInStore:"required",groupByFn:function(e){return e.required_by_sources||e.required_by_entities||e.required_by_basics?"true":"false"}}]},config:{indexBy:{keyInStore:"main",indexByFn:function(){return"main"}}}};var Ae=function(){function e(e){this.ngRedux=e,this.system_relevant_class=new L(this.ngRedux).createCrudActions(he,"system_relevant_class"),this.config=new L(this.ngRedux).createCrudActions(he,"config")}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var Ee="tab",ve={cell:{indexBy:{keyInStore:"pk_cell",indexByFn:function(e){return e.pk_cell.toString()}},groupBy:[{keyInStore:"fk_column_fk_row",groupByFn:function(e){return e.fk_column+"_"+e.fk_row}}]}},ke=function(){function e(e){this.ngRedux=e,this.cell=new L(this.ngRedux).createCrudActions(Ee,"cell")}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var Se="war",Pe={entity_preview:{indexBy:{keyInStore:"pk_entity",indexByFn:function(e){return e.pk_entity.toString()}}}},Ie=function(){function e(e){this.ngRedux=e,this.entity_preview=new L(this.ngRedux).createCrudActions(Se,"entity_preview")}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgRedux}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(t.NgRedux))},token:e,providedIn:"root"}),e}();var je=function(){function e(e,t,n,i,r,o,a,c,s){this.api=e,this.infActions=t,this.proActions=n,this.datActions=i,this.warActions=r,this.tabActions=o,this.dfhActions=a,this.sysActions=c,this.notifications=s}return e.prototype.store=function(e,t){var n=this,i=new u.Subject;return e.subscribe((function(e){n.storeSchemaObject(e,"ofRepo"===t?null:t),i.next(e)}),(function(e){n.notifications.addToast({type:"error",options:{title:e.message}}),i.error(e)})),i},e.prototype.storeGv=function(e,t){var n=this,i=new u.Subject;return e.subscribe((function(e){n.storeSchemaObjectGv(e,"ofRepo"===t?null:t),i.next(e)}),(function(e){n.notifications.addToast({type:"error",options:{title:e.message}}),i.error(e)})),i},e.prototype.storeSchemaObject=function(e,t){var n=this;e&&Object.keys(e).length>0&&Object.keys(e).forEach((function(i){var r;"inf"===i?r=n.infActions:"pro"===i?r=n.proActions:"dat"===i?r=n.datActions:"war"===i&&(r=n.warActions),r&&Object.keys(e[i]).forEach((function(n){r[n].loadSucceeded(e[i][n],void 0,t)}))}))},e.prototype.storeSchemaObjectGv=function(e,t){var n=this;e&&Object.keys(e).length>0&&(Object.keys(e).forEach((function(i){var r;"inf"===i?r=n.infActions:"pro"===i?r=n.proActions:"dat"===i?r=n.datActions:"war"===i?r=n.warActions:"tab"===i?r=n.tabActions:"dfh"===i?r=n.dfhActions:"sys"===i&&(r=n.sysActions),r&&Object.keys(e[i]).forEach((function(n){r[n].loadSucceeded(e[i][n],void 0,t)}))})),console.warn("!!!!!!!! Need to call this.extendEntityPreviewStream(object, pkProject);"))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.SchemaObjectApi},{type:ie},{type:ge},{type:w},{type:Ie},{type:ke},{type:V},{type:Ae},{type:x}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(o.SchemaObjectApi),n.ɵɵinject(ie),n.ɵɵinject(ge),n.ɵɵinject(w),n.ɵɵinject(Ie),n.ɵɵinject(ke),n.ɵɵinject(V),n.ɵɵinject(Ae),n.ɵɵinject(x))},token:e,providedIn:"root"}),e}();function Oe(e,t){return(e.find((function(e){return e.fk_system_type===t}))||{string:""}).string}var be=function(){function e(e,t,n,i,r,o,a,c,s,p,u){this.sys=e,this.dat=t,this.dfh=n,this.pro=i,this.inf=r,this.projectApi=o,this.actions=a,this.notificationActions=c,this.loadingBarActions=s,this.ngRedux=p,this.schemaObj=u}return e.prototype.createEpics=function(){return p.combineEpics(this.createLoadProjectBasicsEpic(),this.createLoadProjectConfigEpic(),this.createLoadProjectUpdatedEpic(),this.createClosePanelEpic(),this.createActivateTabFocusPanelEpic(),this.createMoveTabFocusPanelEpic(),this.createClosePanelFocusPanelEpic(),this.createSplitPanelActivateTabEpic(),this.createAddTabCloseListEpic())},e.prototype.createLoadProjectBasicsEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.LOAD_PROJECT_BASICS),l.switchMap((function(t){return new u.Observable((function(n){n.next(e.loadingBarActions.startLoading()),e.projectApi.getBasics(t.meta.pk_project).subscribe((function(i){var r;n.next(e.actions.loadProjectBasiscsSucceded({label:Oe((r=i[0]).text_properties,f.SysConfig.PK_SYSTEM_TYPE__TEXT_PROPERTY__LABEL),description:Oe(r.text_properties,f.SysConfig.PK_SYSTEM_TYPE__TEXT_PROPERTY__DESCRIPTION),default_language:r.default_language,pk_project:r.pk_entity})),e.schemaObj.storeSchemaObject({inf:{language:[i[0].default_language]},pro:{project:[c.omit(["default_language"],i[0])]}},t.meta.pk_project)}),(function(t){n.next(e.notificationActions.addToast({type:"error",options:{title:t.message}}))}))}))})))})},e.prototype.createLoadProjectUpdatedEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.LOAD_PROJECT_BASICS_SUCCEEDED),l.mapTo(e.loadingBarActions.completeLoading()))})},e.prototype.createLoadProjectConfigEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.LOAD_PROJECT_CONFIG),l.switchMap((function(t){return new u.Observable((function(n){n.next(e.loadingBarActions.startLoading()),u.combineLatest(e.dfh.profile.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.dfh.klass.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.dfh.property.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.dfh.label.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.sys.system_relevant_class.load().resolved$.pipe(l.filter((function(e){return!!e}))),e.sys.config.load().resolved$.pipe(l.filter((function(e){return!!e}))),e.dat.namespace.load("",t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.pro.text_property.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.pro.dfh_class_proj_rel.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.pro.dfh_profile_proj_rel.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.pro.class_field_config.loadOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e}))),e.inf.persistent_item.typesOfProject(t.meta.pk_project).resolved$.pipe(l.filter((function(e){return!!e})))).pipe(l.filter((function(e){return!e.includes(void 0)}))).subscribe((function(t){n.next(e.actions.loadProjectConfigSucceeded()),n.next(e.loadingBarActions.completeLoading())}),(function(e){}))}))})))})},e.prototype.createClosePanelEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.CLOSE_TAB,R.MOVE_TAB,R.SPLIT_PANEL),l.mergeMap((function(t){return new u.Observable((function(t){e.ngRedux.getState().activeProject.panels.forEach((function(n,i){0===n.tabs.length&&t.next(e.actions.closePanel(i))}))}))})))})},e.prototype.createSplitPanelActivateTabEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.SPLIT_PANEL),l.map((function(t){var n=e.ngRedux.getState().activeProject,i=t.meta.currentPanelIndex,r=n.panels.length<i+1?i-1:i;return e.actions.activateTab(r,0)})))})},e.prototype.createActivateTabFocusPanelEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.ACTIVATE_TAB),l.mergeMap((function(t){return new u.Observable((function(n){e.ngRedux.getState().activeProject.focusedPanel!==t.meta.panelIndex&&n.next(e.actions.focusPanel(t.meta.panelIndex))}))})))})},e.prototype.createMoveTabFocusPanelEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.MOVE_TAB),l.mergeMap((function(t){return new u.Observable((function(n){e.ngRedux.getState().activeProject.focusedPanel!==t.meta.currentPanelIndex&&n.next(e.actions.focusPanel(t.meta.currentPanelIndex))}))})))})},e.prototype.createClosePanelFocusPanelEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.CLOSE_PANEL),l.mergeMap((function(t){return new u.Observable((function(t){e.ngRedux.getState().activeProject.focusedPanel>e.ngRedux.getState().activeProject.panels.length-1&&t.next(e.actions.focusPanel(0))}))})))})},e.prototype.createAddTabCloseListEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(R.ADD_TAB),l.mapTo(e.actions.setListType("")))})},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:Ae},{type:w},{type:V},{type:ge},{type:ie},{type:o.ProProjectApi},{type:R},{type:x},{type:b},{type:t.NgRedux},{type:je}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(Ae),n.ɵɵinject(w),n.ɵɵinject(V),n.ɵɵinject(ge),n.ɵɵinject(ie),n.ɵɵinject(o.ProProjectApi),n.ɵɵinject(R),n.ɵɵinject(x),n.ɵɵinject(b),n.ɵɵinject(t.NgRedux),n.ɵɵinject(je))},token:e,providedIn:"root"}),e}();var xe=function(){function e(e){this.service=e}return e.prototype.createEpics=function(){return p.combineEpics(this.createStartLoadingBarEpic(),this.createCompleteLoadingBarEpic())},e.prototype.createCompleteLoadingBarEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(b.COPMLETE),l.switchMap((function(){return u.Observable.create((function(t){e.service.complete()}))})))})},e.prototype.createStartLoadingBarEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(b.START),l.switchMap((function(){return u.Observable.create((function(t){e.service.start()}))})))})},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:i.SlimLoadingBarService}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(y.SlimLoadingBarService))},token:e,providedIn:"root"}),e}();var Te=function(){function e(e,t){this.toastyService=e,this.toastyConfig=t,this.toastyConfig.theme="bootstrap"}return e.prototype.createEpics=function(){return p.combineEpics(this.createAddToastEpic())},e.prototype.createAddToastEpic=function(){var e=this;return(function(t,n){return t.pipe(l.filter((function(e){return e})),p.ofType(x.ADD_TOAST),l.switchMap((function(t){return new u.Observable((function(n){var i=t;i.payload.options.title||i.payload.options.msg||"error"===i.payload.type&&(i.payload.options.title="Oops, something went wrong!"),e.toastyService[i.payload.type](i.payload.options)}))})))})},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:r.ToastyService},{type:r.ToastyConfig}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(_.ToastyService),n.ɵɵinject(_.ToastyConfig))},token:e,providedIn:"root"}),e}();var Re=function(){function e(){var e=this;this.createEpics=function(){return p.combineEpics(e.createResolveEpic())}}return e.prototype.createResolveEpic=function(){return function(e,t){return e.pipe(l.filter((function(e){return!!e&&!!e.meta&&!!e.meta.removePending})),l.switchMap((function(e){return u.of({type:"CLEAN_UP_RESOLVED",meta:{uuid:e.meta.removePending}})})))}},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var De=function(){function e(e,t,n){this.actions=e,this.modelDefinition=t,this.flattenCb=n}return e.prototype.flatten=function(e){if(e&&e.length>0){this.flattenCb(e);var t=c.keys(this.modelDefinition.relations).map((function(e){return e.toString()}));this.items=j(this.items||[],e.filter((function(e){return!!e&&Object.keys(e).length>0})).map((function(e){return c.omit(t,e)})))}return!0},e}();var Ce=function(){function e(e,t,n){var i=this;this.infActions=e,this.datActions=t,this.proActions=n,this.info_proj_rel=new De(this.proActions.info_proj_rel,o.ProInfoProjRel.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.ProInfoProjRel(e)}))})),this.pro_dfh_class_proj_rel=new De(this.proActions.dfh_class_proj_rel,o.ProDfhClassProjRel.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.ProDfhClassProjRel(e)}))})),this.pro_dfh_profile_proj_rel=new De(this.proActions.dfh_profile_proj_rel,o.ProDfhProfileProjRel.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.ProDfhProfileProjRel(e)}))})),this.persistent_item=new De(this.infActions.persistent_item,o.InfPersistentItem.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfPersistentItem(e),i.statement.flatten(e.incoming_statements),i.statement.flatten(e.outgoing_statements),i.text_property.flatten(e.text_properties),i.info_proj_rel.flatten(e.entity_version_project_rels)}))})),this.temporal_entity=new De(this.infActions.temporal_entity,o.InfTemporalEntity.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfTemporalEntity(e),i.statement.flatten(e.outgoing_statements),i.statement.flatten(e.incoming_statements),i.text_property.flatten(e.text_properties),i.info_proj_rel.flatten(e.entity_version_project_rels)}))})),this.statement=new De(this.infActions.statement,o.InfStatement.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfStatement(e),i.info_proj_rel.flatten(e.entity_version_project_rels),e.subject_temporal_entity?i.temporal_entity.flatten([e.subject_temporal_entity]):e.subject_statement&&i.statement.flatten([e.subject_statement]),e.object_persistent_item?i.persistent_item.flatten([e.object_persistent_item]):e.object_appellation?i.appellation.flatten([e.object_appellation]):e.object_place?i.place.flatten([e.object_place]):e.object_time_primitive?i.time_primitive.flatten([e.object_time_primitive]):e.object_language?i.language.flatten([e.object_language]):e.subject_chunk?i.chunk.flatten([e.subject_chunk]):e.object_lang_string?i.lang_string.flatten([e.object_lang_string]):e.object_dimension&&i.dimension.flatten([e.object_dimension])}))})),this.appellation=new De(this.infActions.appellation,o.InfAppellation.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfAppellation(e)}))})),this.place=new De(this.infActions.place,o.InfPlace.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfPlace(e)}))})),this.time_primitive=new De(this.infActions.time_primitive,o.InfTimePrimitive.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfTimePrimitive(e)}))})),this.language=new De(this.infActions.language,o.InfLanguage.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfLanguage(e)}))})),this.lang_string=new De(this.infActions.lang_string,o.InfLangString.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfLangString(e),i.language.flatten([e.language]),i.info_proj_rel.flatten(e.entity_version_project_rels)}))})),this.dimension=new De(this.infActions.dimension,o.InfDimension.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfDimension(e),i.info_proj_rel.flatten(e.entity_version_project_rels)}))})),this.text_property=new De(this.infActions.text_property,o.InfTextProperty.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.InfTextProperty(e),i.language.flatten([e.language]),i.info_proj_rel.flatten(e.entity_version_project_rels)}))})),this.digital=new De(this.datActions.digital,o.DatDigital.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.DatDigital(e)}))})),this.chunk=new De(this.datActions.chunk,o.DatChunk.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.DatChunk(e),i.statement.flatten(e.outgoing_statements)}))})),this.pro_project=new De(this.proActions.project,o.ProProject.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.ProProject(e),i.language.flatten([e.default_language])}))})),this.pro_text_property=new De(this.proActions.text_property,o.ProTextProperty.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.ProTextProperty(e),i.language.flatten([e.language])}))})),this.pro_class_field_config=new De(this.proActions.class_field_config,o.ProClassFieldConfig.getModelDefinition(),(function(e){e.forEach((function(e){e=new o.ProClassFieldConfig(e)}))})),this.analysis=new De(this.proActions.analysis,{relations:[]},(function(e){e.forEach((function(e){}))}))}return e.prototype.getFlattened=function(){return{pro_project:this.pro_project,pro_text_property:this.pro_text_property,pro_class_field_config:this.pro_class_field_config,pro_dfh_profile_proj_rel:this.pro_dfh_profile_proj_rel,pro_dfh_class_proj_rel:this.pro_dfh_class_proj_rel,info_proj_rel:this.info_proj_rel,analysis:this.analysis,persistent_item:this.persistent_item,temporal_entity:this.temporal_entity,statement:this.statement,appellation:this.appellation,place:this.place,time_primitive:this.time_primitive,language:this.language,text_property:this.text_property,lang_string:this.lang_string,dimension:this.dimension,digital:this.digital,chunk:this.chunk}},e}();var Le=function(e,t,n){c.values(e).forEach((function(e){e.items&&("UPSERT"===n?e.actions.upsertSucceeded(e.items,void 0,t):e.actions.loadSucceeded(e.items,void 0,t))}))},Be=function(){function e(e,t,n,i){this.actionPrefix=e,this.modelName=t,this.actions=n,this.notifications=i}return e.prototype.createLoadEpic=function(e,t,n){var i=this;return(function(r,o){return r.pipe(p.ofType(i.type("LOAD",t)),l.mergeMap((function(t){return new u.Observable((function(r){var o=t.meta.addPending,a=t.meta;e(a).subscribe((function(e){n?(n(e,t.meta.pk,a),i.actions.succeeded(e,o,t.meta.pk)):i.actions.loadSucceeded(e,o,t.meta.pk)}),(function(e){i.onError(r,e,o,t.meta.pk)}))}))})))})},e.prototype.createUpsertEpic=function(e,t){var n=this;return(function(i,r){return i.pipe(p.ofType(n.actionPrefix+"."+n.modelName+"::UPSERT"),l.mergeMap((function(i){return new u.Observable((function(r){var o=i.meta.addPending,a=i.meta;e(a).subscribe((function(e){t?(t(e,i.meta.pk),n.actions.succeeded(e,o,i.meta.pk)):n.actions.upsertSucceeded(e,o,i.meta.pk)}),(function(e){n.onError(r,e,o,i.meta.pk)}))}))})))})},e.prototype.createDeleteEpic=function(e){var t=this;return(function(n,i){return n.pipe(p.ofType(t.actionPrefix+"."+t.modelName+"::DELETE"),l.mergeMap((function(n){return new u.Observable((function(i){var r=n.meta.addPending;e(n.meta).subscribe((function(e){t.actions.deleteSucceeded(n.meta.items,r,n.meta.pk)}),(function(e){t.onError(i,e,r,n.meta.pk)}))}))})))})},e.prototype.type=function(e,t){return this.actionPrefix+"."+this.modelName+"::"+e+(t?"::"+t:"")},e.prototype.onError=function(e,t,n,i){e.next(this.notifications.addToast({type:"error",options:{title:t.message}})),this.actions.failed({status:""+t.status},n,i)},e}();var Ne=function(){function e(e,t,n,i,r,o,a,c,s){this.notification=e,this.datActions=t,this.infActions=n,this.proActions=i,this.digitalApi=r,this.chunkApi=o,this.columnApi=a,this.namespaceApi=c,this.schemaObjectService=s}return e.prototype.createEpics=function(){var e=this,t=new Be(D,"digital",this.datActions.digital,this.notification),n=new Be(D,"chunk",this.datActions.chunk,this.notification),i=new Be(D,"namespace",this.datActions.namespace,this.notification),r=new Be(D,"column",this.datActions.column,this.notification);return p.combineEpics(t.createLoadEpic((function(t){return e.digitalApi.getVersion(t.pkEntity,t.entityVersion?t.entityVersion:null)}),B.LOAD_VERSION),t.createUpsertEpic((function(t){return e.digitalApi.bulkUpsert(t.pk,t.items)})),t.createDeleteEpic((function(t){return e.digitalApi.bulkDelete(t.items.map((function(e){return e.pk_entity})))})),n.createLoadEpic((function(t){return e.chunkApi.ofDigital(t.pk,t.pkDigital)}),N.CHUNKS_OF_DIGITAL,(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.chunk.flatten(t),Le(i.getFlattened(),n)})),i.createLoadEpic((function(t){return e.namespaceApi.byProject(t.pk)}),""),r.createLoadEpic((function(t){return e.columnApi.ofDigital(t.pk,t.pkDigital)}),F.COLUMNS_OF_TABLE,(function(t,n){var i=t;e.schemaObjectService.storeSchemaObject(i,n)})))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:x},{type:w},{type:ie},{type:ge},{type:o.DatDigitalApi},{type:o.DatChunkApi},{type:o.DatColumnApi},{type:o.DatNamespaceApi},{type:je}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(x),n.ɵɵinject(w),n.ɵɵinject(ie),n.ɵɵinject(ge),n.ɵɵinject(o.DatDigitalApi),n.ɵɵinject(o.DatChunkApi),n.ɵɵinject(o.DatColumnApi),n.ɵɵinject(o.DatNamespaceApi),n.ɵɵinject(je))},token:e,providedIn:"root"}),e}();var Fe=function(){function e(e,t,n,i,r,o){this.actions=e,this.notification=t,this.profileApi=n,this.classApi=i,this.propertyApi=r,this.labelApi=o}return e.prototype.createEpics=function(){var e=this,t=new Be("dfh","profile",this.actions.profile,this.notification),n=new Be("dfh","klass",this.actions.klass,this.notification),i=new Be("dfh","label",this.actions.label,this.notification),r=new Be("dfh","property",this.actions.property,this.notification);return p.combineEpics(t.createLoadEpic((function(t){return e.profileApi.ofProject(t.pk)}),G.OF_PROJECT),r.createLoadEpic((function(t){return e.propertyApi.dfhPropertyControllerOfProject(t.pk)}),J.OF_PROJECT),n.createLoadEpic((function(t){return e.classApi.dfhClassControllerOfProject(t.pk)}),$.OF_PROJECT),i.createLoadEpic((function(t){return e.labelApi.ofProject(t.pk)}),K.OF_PROJECT))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:V},{type:x},{type:o.DfhProfileApi},{type:a.DfhClassControllerService},{type:a.DfhPropertyControllerService},{type:o.DfhLabelApi}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(V),n.ɵɵinject(x),n.ɵɵinject(o.DfhProfileApi),n.ɵɵinject(a.DfhClassControllerService),n.ɵɵinject(a.DfhPropertyControllerService),n.ɵɵinject(o.DfhLabelApi))},token:e,providedIn:"root"}),e}();var we=function(e){function t(t,n,i,r,o,a){var c=e.call(this,t,n,i,r)||this;return c.actionPrefix=t,c.modelName=n,c.actions=i,c.notifications=r,c.infoProjRelApi=o,c.proActions=a,c}return v(t,e),t.prototype.createUpsertEpic=function(e,t){var n=this;return(function(i,r){return i.pipe(p.ofType(n.actionPrefix+"."+n.modelName+"::UPSERT"),l.mergeMap((function(i){return new u.Observable((function(r){var o=i.meta.addPending,a=i.meta;a.items=a.items.map((function(e){return k({},e,{entity_version_project_rels:[k({},c.pathOr({},["entity_version_project_rels",0],e),{is_in_project:!0})]})})),e(a).subscribe((function(e){t?(t(e,i.meta.pk),n.actions.succeeded(e,o,i.meta.pk)):n.actions.upsertSucceeded(e,o,i.meta.pk)}),(function(e){r.next(n.notifications.addToast({type:"error",options:{title:e.message}})),n.actions.failed({status:""+e.status},o,i.meta.pk)}))}))})))})},t.prototype.createRemoveEpic=function(){var e=this;return(function(t,n){return t.pipe(p.ofType(e.actionPrefix+"."+e.modelName+"::REMOVE"),l.mergeMap((function(t){return new u.Observable((function(n){var i=t.meta.addPending;e.infoProjRelApi.bulkUpdateEprAttributes(t.meta.pk,t.meta.items.map((function(e){return{fk_entity:e.pk_entity,is_in_project:!1}}))).subscribe((function(n){n.length&&e.proActions.info_proj_rel.upsertSucceeded(n,void 0,t.meta.pk),e.actions.removeSucceeded(t.meta.items,i,t.meta.pk)}),(function(r){n.next(e.notifications.addToast({type:"error",options:{title:r.message}})),e.actions.failed({status:""+r.status},i,t.meta.pk)}))}))})))})},t.prototype.createCustomUpsertEpic=function(e,t,n){var i=this;return(function(r,o){return r.pipe(p.ofType(i.actionPrefix+"."+i.modelName+"::UPSERT"+(t?"::"+t:"")),l.mergeMap((function(t){return new u.Observable((function(r){var o=t.meta.addPending,a=t.meta;e(a).subscribe((function(e){n?(n(e,t.meta.pk),i.actions.upsertSucceeded([],o,t.meta.pk)):i.actions.upsertSucceeded(e,o,t.meta.pk)}),(function(e){r.next(i.notifications.addToast({type:"error",options:{title:e.message}})),i.actions.failed({status:""+e.status},o,t.meta.pk)}))}))})))})},t}(Be);var Ue=function(){function e(e,t,n,i,r,o,a,c,s,p){this.notification=e,this.peItApi=t,this.teEnApi=n,this.statementApi=i,this.textPropertyApi=r,this.infActions=o,this.proActions=a,this.datActions=c,this.infoProjRelApi=s,this.schemaObjectService=p}return e.prototype.createEpics=function(){var e=this,t=new we(Y,"persistent_item",this.infActions.persistent_item,this.notification,this.infoProjRelApi,this.proActions),n=new we(Y,"temporal_entity",this.infActions.temporal_entity,this.notification,this.infoProjRelApi,this.proActions),i=new we(Y,"statement",this.infActions.statement,this.notification,this.infoProjRelApi,this.proActions),r=new we(Y,"text_property",this.infActions.text_property,this.notification,this.infoProjRelApi,this.proActions);return p.combineEpics(t.createLoadEpic((function(t){return e.peItApi.ownProperties(t.pk,t.pkEntity)}),Q.MINIMAL_BY_PK,(function(t,n){var i=t;Object.keys(i).forEach((function(t){var r;"inf"===t?r=e.infActions:"pro"===t&&(r=e.proActions),r&&Object.keys(i[t]).forEach((function(e){r[e].loadSucceeded(i[t][e],void 0,n)}))}))})),t.createLoadEpic((function(t){return e.peItApi.typesOfProject(t.pk)}),Q.TYPES_OF_PROJECT,(function(t,n){var i=t;e.schemaObjectService.storeSchemaObject(i,n)})),t.createUpsertEpic((function(t){return e.peItApi.findOrCreateInfPersistentItems(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.persistent_item.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),t.createRemoveEpic(),n.createLoadEpic((function(t){return e.teEnApi.ownProperties(t.pk,t.pkEntity)}),ee.OWN_PROPERTIES,(function(t,n){var i=t;e.schemaObjectService.storeSchemaObject(i,n)})),(function(t,i){return t.pipe(p.ofType(n.type("LOAD",ee.PAGINATED_LIST)),l.mergeMap((function(t){return new u.Observable((function(i){var r=t.meta,o=e.teEnApi.temporalEntityList(r.pk,r.pkSourceEntity,r.pkProperty,r.fkTargetClass,r.isOutgoing,r.limit,r.offset),a=r.pk;e.handleTemporalEntityListAction(t,n,i,o,a)}))})))}),(function(t,i){return t.pipe(p.ofType(n.type("LOAD",ee.PAGINATED_ALTERNATIVE_LIST)),l.mergeMap((function(t){return new u.Observable((function(i){var r=t.meta,o=e.teEnApi.alternativeTemporalEntityList(r.pk,r.pkSourceEntity,r.pkProperty,r.fkTargetClass,r.isOutgoing,r.limit,r.offset);e.handleTemporalEntityListAction(t,n,i,o,null)}))})))}),n.createUpsertEpic((function(t){return e.teEnApi.findOrCreateInfTemporalEntities(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.temporal_entity.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),n.createRemoveEpic(),i.createLoadEpic((function(t){return e.statementApi.alternativesNotInProjectByEntityPk(t.pkEntity,t.pkProperty,t.pk)}),te.ALTERNATIVES_INGOING,(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.statement.flatten(t),Le(i.getFlattened(),null)})),i.createUpsertEpic((function(t){return e.statementApi.findOrCreateInfStatements(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.statement.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),(function(t,n){return t.pipe(p.ofType(i.type("LOAD",ee.PAGINATED_LIST)),l.mergeMap((function(t){return new u.Observable((function(n){var r=t.meta,o=e.statementApi.paginatedListTargetingEntityPreviews(r.pk,r.pkSourceEntity,r.pkProperty,r.fkTargetClass,r.isOutgoing,r.limit,r.offset),a=r.pk;e.handleTemporalEntityListAction(t,i,n,o,a)}))})))}),i.createRemoveEpic(),i.createLoadEpic((function(t){return e.statementApi.queryByParams(t.ofProject,t.pk,t.pkEntity,t.pkInfoRange,t.pkInfoDomain,t.pkProperty)}),te.BY_PARAMS,(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.statement.flatten(t),Le(i.getFlattened(),n,"LOAD")})),i.createLoadEpic((function(t){return e.statementApi.sourcesAndDigitalsOfEntity(t.ofProject,t.pk,t.pkEntity)}),te.SOURCES_AND_DIGITALS_OF_ENTITY,(function(t,n){var i=t,r=new Ce(e.infActions,e.datActions,e.proActions);r.statement.flatten(i.statements),Le(r.getFlattened(),n);var o=new Ce(e.infActions,e.datActions,e.proActions);o.digital.flatten(i.digitals),Le(o.getFlattened(),n)})),r.createLoadEpic((function(t){return e.textPropertyApi.findAlternativeTextProperties(t.pk,t.fkEntity,t.fkClassField)}),ne.ALTERNATIVES,(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.text_property.flatten(t),Le(i.getFlattened(),null)})),r.createUpsertEpic((function(t){return e.textPropertyApi.findOrCreateInfTextProperties(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.text_property.flatten(t),Le(i.getFlattened(),n)})),r.createRemoveEpic())},e.prototype.handleTemporalEntityListAction=function(e,t,n,i,r){var o,a,c=this,s=e.meta,p=s.addPending,u=[{fk_property:s.pkProperty},{fk_target_class:s.fkTargetClass},(o={},o[s.isOutgoing?"fk_subject_info":"fk_object_info"]=s.pkSourceEntity,o),(a={},a[s.alternatives?"alternatives":"ofProject"]=s.alternatives,a)];this.infActions.statement.loadPage(u,s.limit,s.offset,r),i.subscribe((function(e){c.schemaObjectService.storeSchemaObject(e.schemas,r),c.infActions.statement.loadPageSucceeded(e.paginatedStatements,e.count,u,s.limit,s.offset,r),t.actions.loadSucceeded([],p,r)}),(function(e){t.onError(n,e,p,r)}))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:x},{type:o.InfPersistentItemApi},{type:o.InfTemporalEntityApi},{type:o.InfStatementApi},{type:o.InfTextPropertyApi},{type:ie},{type:ge},{type:w},{type:o.ProInfoProjRelApi},{type:je}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(x),n.ɵɵinject(o.InfPersistentItemApi),n.ɵɵinject(o.InfTemporalEntityApi),n.ɵɵinject(o.InfStatementApi),n.ɵɵinject(o.InfTextPropertyApi),n.ɵɵinject(ie),n.ɵɵinject(ge),n.ɵɵinject(w),n.ɵɵinject(o.ProInfoProjRelApi),n.ɵɵinject(je))},token:e,providedIn:"root"}),e}();var Me=function(){function e(e,t,n,i,r,o,a,c,s,p,u,l){this.notification=e,this.infActions=t,this.proActions=n,this.datActions=i,this.projectApi=r,this.infoProjRelApi=o,this.classProjRelApi=a,this.profileProjRelApi=c,this.classFieldConfApi=s,this.textPropertyApi=p,this.analysisApi=u,this.schemaObjectService=l}return e.prototype.createEpics=function(){var e=this,t=new Be(re,"project",this.proActions.project,this.notification),n=new Be(re,"info_proj_rel",this.proActions.info_proj_rel,this.notification),i=new Be(re,"dfh_class_proj_rel",this.proActions.dfh_class_proj_rel,this.notification),r=new Be(re,"dfh_profile_proj_rel",this.proActions.dfh_profile_proj_rel,this.notification),o=new Be(re,"class_field_config",this.proActions.class_field_config,this.notification),a=new Be(re,"text_property",this.proActions.text_property,this.notification),c=new Be(re,"analysis",this.proActions.analysis,this.notification);return p.combineEpics(t.createLoadEpic((function(t){return e.projectApi.ofAccount(t.pk)}),pe.OF_ACCOUNT,(function(t){var n=new Ce(e.infActions,e.datActions,e.proActions);n.pro_project.flatten(t),Le(n.getFlattened())})),t.createLoadEpic((function(t){return e.projectApi.getBasics(t.pk)}),pe.LOAD_BASICS,(function(t){var n=new Ce(e.infActions,e.datActions,e.proActions);n.pro_project.flatten(t),Le(n.getFlattened())})),n.createUpsertEpic((function(t){return e.infoProjRelApi.bulkUpdateEprAttributes(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.info_proj_rel.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),n.createLoadEpic((function(t){return e.infoProjRelApi.markStatementAsFavorite(t.pk,t.pkStatement,t.isOutgoing)}),ue.MARK_ROLE_AS_FAVORITE,(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.info_proj_rel.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),o.createLoadEpic((function(t){return e.classFieldConfApi.ofProject(t.pk)}),de.OF_PROJECT,(function(t){var n=new Ce(e.infActions,e.datActions,e.proActions);n.pro_class_field_config.flatten(t),Le(n.getFlattened())})),o.createUpsertEpic((function(t){return e.classFieldConfApi.bulkUpsert(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.pro_class_field_config.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),i.createLoadEpic((function(t){return e.classProjRelApi.ofProject(t.pk)}),le.OF_PROJECT,(function(t){var n=new Ce(e.infActions,e.datActions,e.proActions);n.pro_dfh_class_proj_rel.flatten(t),Le(n.getFlattened())})),i.createUpsertEpic((function(t){return e.classProjRelApi.bulkUpsert(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.pro_dfh_class_proj_rel.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),r.createLoadEpic((function(t){return e.profileProjRelApi.ofProject(t.pk)}),fe.OF_PROJECT,(function(t){var n=new Ce(e.infActions,e.datActions,e.proActions);n.pro_dfh_profile_proj_rel.flatten(t),Le(n.getFlattened())})),r.createUpsertEpic((function(t){return e.profileProjRelApi.bulkUpsert(t.pk,t.items)}),(function(t,n){var i=new Ce(e.infActions,e.datActions,e.proActions);i.pro_dfh_profile_proj_rel.flatten(t),Le(i.getFlattened(),n,"UPSERT")})),a.createLoadEpic((function(t){return e.textPropertyApi.ofProject(t.pk)}),ye.OF_PROJECT,(function(t,n){var i=t;e.schemaObjectService.storeSchemaObject(i,n)})),a.createUpsertEpic((function(t){return e.textPropertyApi.bulkUpsert(t.pk,t.items)}),(function(t,n){var i=t;e.schemaObjectService.storeSchemaObject(i,n)})),a.createDeleteEpic((function(t){return e.textPropertyApi.bulkDelete(t.pk,t.items)})),c.createDeleteEpic((function(t){return e.analysisApi.analysisControllerBulkDelete(t.pk,t.items.map((function(e){return e.pk_entity})))})))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:x},{type:ie},{type:ge},{type:w},{type:o.ProProjectApi},{type:o.ProInfoProjRelApi},{type:o.ProDfhClassProjRelApi},{type:o.ProDfhProfileProjRelApi},{type:o.ProClassFieldConfigApi},{type:o.ProTextPropertyApi},{type:a.AnalysisService},{type:je}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(x),n.ɵɵinject(ie),n.ɵɵinject(ge),n.ɵɵinject(w),n.ɵɵinject(o.ProProjectApi),n.ɵɵinject(o.ProInfoProjRelApi),n.ɵɵinject(o.ProDfhClassProjRelApi),n.ɵɵinject(o.ProDfhProfileProjRelApi),n.ɵɵinject(o.ProClassFieldConfigApi),n.ɵɵinject(o.ProTextPropertyApi),n.ɵɵinject(a.AnalysisService),n.ɵɵinject(je))},token:e,providedIn:"root"}),e}();var Ge=function(){function e(e,t,n,i){this.actions=e,this.notification=t,this.sysRelevantClassApi=n,this.sysConfigApi=i}return e.prototype.createEpics=function(){var e=this,t=new Be(he,"system_relevant_class",this.actions.system_relevant_class,this.notification),n=new Be(he,"config",this.actions.config,this.notification);return p.combineEpics(t.createLoadEpic((function(t){return e.sysRelevantClassApi.find()}),""),t.createUpsertEpic((function(t){return e.sysRelevantClassApi.bulkReplaceOrCreate(t.items)})),n.createLoadEpic((function(){return e.sysConfigApi.sysConfigControllerGetSystemConfig().pipe(l.map((function(e){return[e]})))}),""))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:Ae},{type:x},{type:o.SysSystemRelevantClassApi},{type:a.SystemConfigurationService}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(Ae),n.ɵɵinject(x),n.ɵɵinject(o.SysSystemRelevantClassApi),n.ɵɵinject(a.SystemConfigurationService))},token:e,providedIn:"root"}),e}();var $e=function(){function e(e,t,n,i,r,o,a,c,s,f){var d=this;this.loadingBarEpics=e,this.notificationEpics=t,this.activeProjectEpics=n,this.accountEpics=i,this.systemEpics=r,this.dfhEpics=o,this.infEpics=a,this.datEpics=c,this.proEpics=s,this.actionResolver=f,this.rootEpicStream$=new u.BehaviorSubject(p.combineEpics(this.loadingBarEpics.createEpics(),this.notificationEpics.createEpics(),this.systemEpics.createEpics(),this.activeProjectEpics.createEpics(),this.accountEpics.createEpics(),this.dfhEpics.createEpics(),this.infEpics.createEpics(),this.datEpics.createEpics(),this.proEpics.createEpics(),this.actionResolver.createEpics())),this.rootEpic=function(e,t,n){return void 0===n&&(n=void 0),d.rootEpicStream$.pipe(l.mergeMap((function(i){return i(e,t,n)})))}}return e.prototype.getRootEpic=function(){return this.rootEpic},e.prototype.addEpic=function(e){this.rootEpicStream$.next(e)},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:xe},{type:Te},{type:be},{type:T},{type:Ge},{type:Fe},{type:Ue},{type:Ne},{type:Me},{type:Re}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(xe),n.ɵɵinject(Te),n.ɵɵinject(be),n.ɵɵinject(T),n.ɵɵinject(Ge),n.ɵɵinject(Fe),n.ɵɵinject(Ue),n.ɵɵinject(Ne),n.ɵɵinject(Me),n.ɵɵinject(Re))},token:e,providedIn:"root"}),e}();var Je={account:void 0,roles:void 0},Ke=function(e,t){switch(void 0===e&&(e=Je),t.type){case O.LOGIN_SUCCEEDED:case O.ACCOUNT_UPDATED:e=k({},e,{account:t.meta.account});break;case O.LOAD_ROLES_SUCCEEDED:e=k({},e,{roles:t.meta.accountRoles});break;case O.LOAD_ROLES_FAILED:e=k({},e,{roles:[]})}return e},Ve={loading:!1,progress:0};function Ye(e,t){switch(void 0===e&&(e=Ve),t.type){case b.START:return k({},e,{loading:!0});case b.STOP:case b.COPMLETE:return k({},e,{loading:!1})}return e}var qe={label:"",list:"",uiIdSerial:0,panelSerial:0,focusedPanel:0,panels:[]},He=function(e,t){var n,i,r,o,a,s,p,u,l,f,d,y,_;switch(void 0===e&&(e=qe),t.type){case R.LOAD_PROJECT_BASICS_SUCCEEDED:e=k({},e,t.meta.projectPreview);break;case R.LOAD_PROJECT_CONFIG:e=k({},e,{loadingConfigData:!0});break;case R.LOAD_PROJECT_CONFIG_SUCCEEDED:e=k({},e,{configDataInitialized:!0,loadingConfigData:!1});break;case R.SET_PANELS:e=k({},e,{panels:t.meta.panels,uiIdSerial:t.meta.uiIdSerial,panelSerial:t.meta.panelSerial,focusedPanel:t.meta.focusedPanel});break;case R.SET_LIST_TYPE:e=k({},e,{list:t.meta.list});break;case R.ACTIVATE_TAB:u=t.meta.panelIndex,l=t.meta.tabIndex,e=k({},e,{panels:Object.assign(j(e.panels),(n={},n[u]=k({},e.panels[u],{tabs:j(e.panels[u].tabs).map((function(e,t){return e.active=t===l,e}))}),n))});break;case R.MOVE_TAB:if(f=t.meta.previousPanelIndex,d=t.meta.currentPanelIndex,y=t.meta.previousTabIndex,_=t.meta.currentTabIndex,f===d){var g=j(e.panels[d].tabs);A.moveItemInArray(g,y,_),e=k({},e,{panels:Object.assign(j(e.panels),(i={},i[d]=k({},e.panels[d],{tabs:g}),i))})}else{var h=j(e.panels[f].tabs),m=j(e.panels[d].tabs);A.transferArrayItem(h,m,y,_),e=k({},e,{panels:Object.assign(j(e.panels),(r={},r[f]=k({},e.panels[f],{tabs:h.map((function(e,t){return e.active=t===(y<h.length?y:y-1),e}))}),r[d]=k({},e.panels[d],{tabs:m.map((function(e,t){return e.active=t===_,e}))}),r))})}break;case R.ADD_TAB:0===e.panels.length&&(e=k({},e,{panels:[{id:e.panelSerial,tabs:[]}],focusedPanel:0,panelSerial:e.panelSerial+1})),u=e.focusedPanel,e=k({},e,{panels:Object.assign(j(e.panels),(o={},o[u]=k({},e.panels[u],{tabs:j(e.panels[u].tabs.map((function(e){return e.active=!1,e})),[k({},c.omit(["pathSegment"],t.meta.tab),{path:["activeProject",t.meta.tab.pathSegment,e.uiIdSerial.toString()]})])}),o)),uiIdSerial:e.uiIdSerial+1});break;case R.CLOSE_TAB:u=t.meta.panelIndex,l=t.meta.tabIndex,(e=k({},e,{panels:Object.assign(j(e.panels),(a={},a[u]=k({},e.panels[u],{tabs:j(e.panels[u].tabs).filter((function(e,t){return t!==l}))}),a))})).panels[u].tabs.find((function(e){return e.active}))||(e=k({},e,{panels:Object.assign(j(e.panels),(s={},s[u]=k({},e.panels[u],{tabs:j(e.panels[u].tabs).map((function(t,n){return t.active=n===(l<e.panels[u].tabs.length?l:l-1),t}))}),s))}));break;case R.CLOSE_PANEL:u=t.meta.panelIndex;var E=j(e.panels);E.splice(u,1),e=k({},e,{panels:E});break;case R.FOCUS_PANEL:e=k({},e,{focusedPanel:t.meta.panelIndex});break;case R.SPLIT_PANEL:f=t.meta.previousPanelIndex,l=t.meta.tabIndex,d=t.meta.currentPanelIndex;var v=e.panels[f].tabs[l];e=k({},e,{panels:Object.assign(j(e.panels),(p={},p[f]=k({},e.panels[f],{tabs:j(e.panels[f].tabs).filter((function(e,t){return t!==l})).map((function(e,t){return 0===t&&(e.active=!0),e}))}),p))});var S=j(e.panels);S.splice(d,0,{id:e.panelSerial,tabs:[v]}),e=k({},e,{panels:S,panelSerial:e.panelSerial+1});break;case R.SET_REFINING_CHUNK:e=k({},e,{refiningChunk:t.payload.refiningChunk});break;case R.SET_CREATING_MENTIONING:e=k({},e,{creatingMentioning:t.payload.creatingMentioning});break;case R.SET_MENTIONINGS_FOCUSED_IN_TEXT:e=k({},e,{mentioningsFocusedInText:t.payload.mentioningsFocusedInText});break;case R.SET_MENTIONINGS_FOCUSED_IN_TABLE:e=k({},e,{mentioningsFocusedInTable:t.payload.mentioningsFocusedInTable});break;case R.DESTROY:e=qe}return e},Xe=function(e){Object.assign(this,e)};var We=function(){function e(){this.destroy=function(){return{type:e.DESTROY,meta:null,payload:null}}}return e.DESTROY="Information::DESTROY",e.decorators=[{type:n.Injectable}],S([t.dispatch(),P("design:type",Object)],e.prototype,"destroy",void 0),e}();var Ze=new Xe;function ze(e,t){switch(void 0===e&&(e=Ze),t.type){case We.DESTROY:e={}}return e}var Qe=function(){function e(){this.initializeList=function(t){return{type:e.INITIALIZE_LIST,meta:{pkAllowedClasses:t},payload:null}},this.destroy=function(){return{type:e.DESTROY,meta:null,payload:null}}}return e.INITIALIZE_LIST="SourceList::INITIALIZE_LIST",e.DESTROY="SourceList::DESTROY",e.decorators=[{type:n.Injectable}],S([t.dispatch(),P("design:type",Object)],e.prototype,"initializeList",void 0),S([t.dispatch(),P("design:type",Object)],e.prototype,"destroy",void 0),e}();var et=function(e){Object.assign(this,e)};var tt=new et;function nt(e,t){void 0===e&&(e=tt);var n=t;switch(n.type){case Qe.INITIALIZE_LIST:e=k({},e,{list:{pkAllowedClasses:n.meta.pkAllowedClasses}});break;case Qe.DESTROY:e={}}return e}var it=function(){function e(){}return e.prototype.loadProjectsSucceeded=function(t){return{type:e.LOAD_PROJECTS_SUCCEEDED,payload:t,meta:null}},e.LOAD_PROJECTS_SUCCEEDED="LOAD_PROJECTS_SUCCEEDED",e.decorators=[{type:n.Injectable}],e}();var rt={records:[]},ot=function(e,t){switch(void 0===e&&(e=rt),t.type){case it.LOAD_PROJECTS_SUCCEEDED:return k({},e,{records:t.payload.map((function(e){return{record:e}}))})}return e},at=function(){return ot};var ct=function(e){return"by_"+e},st=function(e){return e.map((function(e){return Object.keys(e)[0]})).join("__")},pt=function(e){return"pag_"+e},ut=function(e){return pt(ct(e))},lt=function(e){return e.map((function(e){return c.values(e)[0]})).join("_")};function ft(e,t){return yt(e,t)+"_"+dt(e,t)}function dt(e,t){return yt(e,t)+e}function yt(e,t){return t}var _t=function(){function e(e,t){this.actionPrefix=e,this.configs=t,this.updatingBy=function(e){return"updating_"+ct(e)},this.deletingBy=function(e){return"deleting_"+ct(e)},this.removingBy=function(e){return"removing_"+ct(e)}}return e.prototype.createReducers=function(){var e=this,t={};d.U.obj2KeyValueArr(this.configs).forEach((function(n){t[n.key]=e.createModelReducers(n.key,n.value)}));var n=c.keys(this.configs).map((function(t){return e.createEntityModelMapReducers(t)}));return t.pkEntityModelMap=g.composeReducers.apply(void 0,j(n)),m.combineReducers(t)},e.prototype.createModelReducers=function(e,t){var n=this,i=this.actionPrefix;return function(r,o){void 0===r&&(r={});var a=n.facette(e,t);if(o.type===i+"."+e+"::LOAD")r=a(o,r,(function(e){return k({},c.omit([ct(t.indexBy.keyInStore)],e),{loading:!0})}));else if(o.type===i+"."+e+"::LOAD_SUCCEEDED")r=a(o,r,(function(e){return k({},n.mergeItemsInState(t,e,o),{loading:!1})}));else if(o.type===i+"."+e+"::UPSERT")r=a(o,r,(function(e){var i;return k({},e,((i={})[n.updatingBy(t.indexBy.keyInStore)]=n.indexKeyObject(o,t),i))}));else if(o.type===i+"."+e+"::UPSERT_SUCCEEDED")r=a(o,r,(function(e){var i;return k({},n.mergeItemsInState(t,e,o),((i={})[n.updatingBy(t.indexBy.keyInStore)]=c.omit(c.values(n.indexKeyObject(o,t)),e[n.updatingBy(t.indexBy.keyInStore)]),i))}));else if(o.type===i+"."+e+"::DELETE")r=a(o,r,(function(e){var i;return k({},e,((i={})[n.deletingBy(t.indexBy.keyInStore)]=n.indexKeyObject(o,t),i))}));else if(o.type===i+"."+e+"::DELETE_SUCCEEDED"){var s=n.deletingBy(t.indexBy.keyInStore);r=a(o,r,(function(e){var i;return e=k({},n.deleteItemsFromState(t,o,e),((i={})[s]=c.omit(c.values(n.indexKeyObject(o,t)),e[n.deletingBy(t.indexBy.keyInStore)]),i)),Object.keys(e[s]).length||(e=c.omit([s],e)),e}))}else if(o.type===i+"."+e+"::REMOVE")r=a(o,r,(function(e){var i;return k({},e,((i={})[n.removingBy(t.indexBy.keyInStore)]=n.indexKeyObject(o,t),i))}));else if(o.type===i+"."+e+"::REMOVE_SUCCEEDED"){var p=n.removingBy(t.indexBy.keyInStore);r=a(o,r,(function(e){var i;return e=k({},n.deleteItemsFromState(t,o,e),((i={})[p]=c.omit(c.values(n.indexKeyObject(o,t)),e[n.removingBy(t.indexBy.keyInStore)]),i)),Object.keys(e[p]).length||(e=c.omit([p],e)),e}))}else if(o.type===i+"."+e+"::FAILED")r=a(o,r,(function(e){return k({},e,c.omit([ct(t.indexBy.keyInStore)],e),{loading:!1})}));else if(o.type===i+"."+e+"::LOAD_PAGE"){var u=o.meta,l=ut(st(u.paginateBy)),f=u.paginateBy.map((function(e){return c.values(e)[0]})).join("_"),d=ft(u.limit,u.offset);r=a(o,r,(function(e){var t,n,i;return k({},e,((t={})[l]=k({},e[l],((n={})[f]=k({},(e[l]||{})[f],{loading:k({},((e[l]||{})[f]||{}).loading,(i={},i[d]=!0,i))}),n)),t))}))}else if(o.type===i+"."+e+"::LOAD_PAGE_FAILED"){u=o.meta;var y=ut(st(u.paginateBy)),_=lt(u.paginateBy),g=ft(u.limit,u.offset);r=a(o,r,(function(e){var t,n,i;return k({},e,((t={})[y]=k({},e[y],((n={})[_]=k({},(e[y]||{})[_],{loading:k({},((e[y]||{})[_]||{}).loading,(i={},i[g]=!1,i))}),n)),t))}))}else if(o.type===i+"."+e+"::LOAD_PAGE_SUCCEEDED"){var h=o.meta,m=ut(st(h.paginateBy)),A=lt(h.paginateBy),E=yt(h.limit,h.offset),v=ft(h.limit,h.offset),S={};h.pks&&h.pks.forEach((function(e,t){S[E+t]=e})),r=a(o,r,(function(e){var t,n,i;return k({},e,((t={})[m]=k({},e[m],((n={})[A]=k({},(e[m]||{})[A],{count:h.count||0,rows:k({},((e[m]||{})[A]||{}).rows,S),loading:k({},((e[m]||{})[A]||{}).loading,(i={},i[v]=!1,i))}),n)),t))}))}return r}},e.prototype.createEntityModelMapReducers=function(e){var t=this.actionPrefix;return function(n,i){void 0===n&&(n={});var r=t+"."+e;if(!(i&&i.meta&&i.meta.items&&i.meta.items.length))return n;var o=i.meta.items;switch(i.type){case r+"::LOAD_SUCCEEDED":case r+"::UPSERT_SUCCEEDED":for(var a={},s=0;s<o.length;s++){(u=o[s]).pk_entity&&(a[u.pk_entity]={modelName:e,fkClass:u.fkClass})}n=k({},n,a);break;case r+"::DELETE_SUCCEEDED":case r+"::REMOVE_SUCCEEDED":var p=[];for(s=0;s<o.length;s++){var u;(u=o[s]).pk_entity&&p.push(u.pk_entity)}n=c.omit(p,n)}return n}},e.prototype.facette=function(e,t){var n=this;return(function(i,r,o){var a,c;c=(a=n.deFacette(e,t,i,c,r)).outerState;var s=o(r=a.state);return n.enFacette(e,t,i,s,c)})},e.prototype.deFacette=function(e,t,n,i,r){if(this.isFacetteByPk(t,n)){var o=n.meta.pk||"repo";return{outerState:r,state:r[t.facetteByPk]&&r[t.facetteByPk][o]||{}}}return{outerState:i,state:r}},e.prototype.enFacette=function(e,t,n,i,r){var o,a;if(this.isFacetteByPk(t,n)){var c=n.meta.pk||"repo";i=k({},r,((o={})[t.facetteByPk]=k({},r[t.facetteByPk],((a={})[c]=i,a)),o))}return i},e.prototype.isFacetteByPk=function(e,t){if(e.facetteByPk){if(t.meta&&void 0!==t.meta.pk)return!0;throw Error("Facette action must provide pk for facette")}return!1},e.prototype.deleteItemsFromState=function(e,t,n){var i=this,r=t.meta.items,o=(e.groupBy&&e.groupBy.length?e.groupBy:[]).map((function(e){return{groupByKey:ct(e.keyInStore),groupByFn:e.groupByFn}})),a=ct(e.indexBy.keyInStore);return r.forEach((function(t){var r,s=e.indexBy.indexByFn(t);(n[a]?n[a][s]:void 0)&&(n=k({},n,((r={})[a]=k({},c.omit([s],n[a])),r)),o.forEach((function(e){var r,o,a=i.getGroupKeyOfItem(e.groupByFn,t);n=k({},n,((r={})[e.groupByKey]=k({},n[e.groupByKey],((o={})[a]=k({},c.omit([s],(n[e.groupByKey]||{})[a])),o)),r))})))})),Object.keys(n[a]).length<1&&(n=k({},c.omit([a],n))),o.forEach((function(e){Object.keys(n[e.groupByKey]).forEach((function(t){var i;Object.keys(n[e.groupByKey][t]).length<1&&(n=k({},n,((i={})[e.groupByKey]=c.omit([t],n[e.groupByKey]),i)))})),Object.keys(n[e.groupByKey]).length<1&&(n=k({},c.omit([e.groupByKey],n)))})),n},e.prototype.mergeItemsInState=function(e,t,n){var i=this,r=n.meta.items,o=(e.groupBy&&e.groupBy.length?e.groupBy:[]).map((function(e){return{groupByKey:ct(e.keyInStore),groupByFn:e.groupByFn}})),a=ct(e.indexBy.keyInStore);return r.forEach((function(n){var r,s,p,u=e.indexBy.indexByFn(n),l=t[a]?t[a][u]:void 0,f=e.equals||c.equals;l&&f(n,l)?p=l:(p=n,t=k({},t,((r={})[a]=k({},t[a],((s={})[u]=p,s)),r)),o.forEach((function(e){var n,r,o,a,s,f=i.getGroupKeyOfItem(e.groupByFn,l);t=k({},t,((n={})[e.groupByKey]=k({},t[e.groupByKey],((r={})[f]=k({},c.omit([u],(t[e.groupByKey]||{})[f])),r)),n));var d=i.getGroupKeyOfItem(e.groupByFn,p);void 0!==d&&(t=k({},t,((o={})[e.groupByKey]=k({},t[e.groupByKey],((a={})[d]=k({},(t[e.groupByKey]||{})[d],((s={})[u]=p,s)),a)),o)))})))})),t},e.prototype.indexKeyObject=function(e,t){return c.indexBy((function(e){return e}),e.meta.items.filter((function(e){try{return t.indexBy.indexByFn(e),!0}catch(e){return!1}})).map((function(e){return t.indexBy.indexByFn(e)})))},e.prototype.groupBy=function(e,t,n){var i=this,r={};return e.forEach((function(e){var o,a=i.getGroupKeyOfItem(t,e);if(a){var c=n(e);r[a]=k({},r[a],((o={})[c]=e,o))}})),r},e.prototype.getGroupKeyOfItem=function(e,t){var n;try{n=e(t)}catch(e){}return n},e}();function gt(){return new _t(he,me).createReducers()}function ht(){return new _t("dfh",M).createReducers()}function mt(){return new _t(Y,q).createReducers()}function At(){return new _t(D,C).createReducers()}function Et(){return new _t(re,se).createReducers()}function vt(){return new _t(Se,Pe).createReducers()}function kt(){return new _t(Ee,ve).createReducers()}var St=function(e,t){return void 0===e&&(e={}),"INIT_SANDBOX_STATE"===t.type&&(e=k({},e,t.payload)),e},Pt=function(e,t){var n;if(void 0===e&&(e={}),t&&t.meta&&t.meta.addPending){var i=t.meta.addPending;e=k({},e,((n={})[i]=!0,n))}if(t&&t.meta&&t.meta.removePending){i=t.meta.removePending;e=k({},c.omit([i],e))}return e},It=function(e,t){var n;if(void 0===e&&(e={}),t&&t.meta&&t.meta.removePending){var i=t.meta.removePending;e=k({},e,((n={})[i]=t.meta,n))}return e},jt=function(e,t){if(void 0===e&&(e={}),t&&"CLEAN_UP_RESOLVED"===t.type){var n=t.meta.uuid;e=k({},c.omit([n],e))}return e},Ot=function(e,t){return void 0===e&&(e={}),t&&"SET_APP_STATE"===t.type&&(e=t.payload),e},bt=g.composeReducers(g.defaultFormReducer(),m.combineReducers({account:Ke,loadingBar:Ye,activeProject:He,routes:h.routerReducer,information:ze,sources:nt,sandboxState:St,projects:at(),sys:gt(),dfh:ht(),inf:mt(),dat:At(),pro:Et(),war:vt(),tab:kt(),pending:Pt,resolved:g.composeReducers(It,jt)}),Ot),xt=new n.InjectionToken("app.INITIAL_STATE");var Tt=function(){function e(e,t,n,i,r,o,a){this.ngRedux=e;var c=[];if(r&&c.push("ReduxModule is already loaded. Import in your base AppModule only."),o||c.push("You need to import the SdkLb3Module in your AppModule!"),a||c.push("You need to import the SdkLb4Module in your AppModule!"),c.length)throw new Error(c.join("\n"));var u=p.createEpicMiddleware();e.configureStore(bt,i,[u,s],t.isEnabled()?[t.enhancer()]:[]),u.run(n.getRootEpic())}return e.forRoot=function(){return{ngModule:e,providers:[{provide:xt,useValue:{}}]}},e.decorators=[{type:n.NgModule,args:[{imports:[t.NgReduxModule,i.SlimLoadingBarModule,r.ToastyModule.forRoot()],providers:[]}]}],e.ctorParameters=function(){return[{type:t.NgRedux},{type:t.DevToolsExtension},{type:$e},{type:void 0,decorators:[{type:n.Inject,args:[xt]}]},{type:e,decorators:[{type:n.Optional},{type:n.SkipSelf}]},{type:o.SdkLb3Module,decorators:[{type:n.Optional}]},{type:a.SdkLb4Module,decorators:[{type:n.Optional}]}]},e}();var Rt=function(e){this.showProperties=!1,this.showRightArea=!0,this.rightPanelTabs=[],this.rightPanelActiveTab=0,this.showHeader=!0,Object.assign(this,e)};var Dt=function(e){Object.assign(this,e)};var Ct=function(e){Object.assign(this,e)};var Lt=function(e){Object.assign(this,e)};var Bt=function(e){Object.assign(this,e)};var Nt=function(e){Object.assign(this,e)};var Ft=function(){};var wt=function(){};var Ut=function(){};var Mt=function(){};var Gt=function(){};var $t=function(){};var Jt=function(){};var Kt=function(){};var Vt=function(){};var Yt=function(){};var qt=function(){};var Ht=function(){};var Xt=function(){};var Wt=function(){};var Zt=function(){};var zt=function(){};var Qt=function(){};var en=function(){};var tn=function(){};var nn=function(){};var rn=function(){};e.AccountActions=O,e.ActiveProjectActions=R,e.ChunkActionsFactory=N,e.ChunkSlice=wt,e.ClassColumnMappingSlice=Mt,e.ColumnActionsFactory=F,e.ColumnSlice=Ut,e.DatActions=w,e.DfhActions=V,e.DfhClassActionFactory=$,e.DfhClassSlice=Kt,e.DfhLabelActionFactory=K,e.DfhLabelSlice=Yt,e.DfhProfileActionFactory=G,e.DfhProfileSlice=Jt,e.DfhPropertyActionFactory=J,e.DfhPropertySlice=Vt,e.DigitalActionsFactory=B,e.DigitalSlice=Ft,e.EntityDetail=Rt,e.Flattener=Ce,e.INIT_SANDBOX_STATE="INIT_SANDBOX_STATE",e.InfActionFactory=z,e.InfActions=ie,e.InfAppellationSlice=Qt,e.InfDimensionSlice=tn,e.InfEpicsFactory=we,e.InfLangStringSlice=en,e.InfLanguageSlice=zt,e.InfPersistentItemActionFactory=Q,e.InfPersistentItemSlice=qt,e.InfPlaceSlice=Wt,e.InfStatementActionFactory=te,e.InfStatementSlice=Xt,e.InfTemporalEntityActionFactory=ee,e.InfTemporalEntitySlice=Ht,e.InfTextPropertyActionFactory=ne,e.InfTextPropertySlice=nn,e.InfTimePrimitiveSlice=Zt,e.Information=Xe,e.List=Bt,e.LoadingBarActions=b,e.NamespaceSlice=$t,e.Notifications=Nt,e.NotificationsAPIActions=x,e.PR_ENTITY_MODEL_MAP="pkEntityModelMap",e.ProActions=ge,e.ProAnalysisActionFactory=_e,e.ProClassFieldConfigActionFactory=de,e.ProDfhClassProjRelActionFactory=le,e.ProDfhProfileProjRelActionFactory=fe,e.ProInfoProjRelActionFactory=ue,e.ProProjectActionFactory=pe,e.ProTextPropertyActionFactory=ye,e.ProjectSettingsData=Dt,e.ProjectsActions=it,e.ReducerFactory=_t,e.ReduxModule=Tt,e.RootEpics=$e,e.SET_APP_STATE="SET_APP_STATE",e.SchemaActionsFactory=L,e.SchemaEpicsFactory=Be,e.SchemaObjectService=je,e.SourceList=et,e.SysActions=Ae,e.TabActions=ke,e.TabBase=Ct,e.TabCellSlice=rn,e.TextPropertySlice=Gt,e.Types=Lt,e.WarActions=Ie,e.by=ct,e.cleanupResolved=jt,e.createDatReducer=At,e.createDfhReducer=ht,e.createInfReducer=mt,e.createProReducer=Et,e.createSysReducer=gt,e.createTabReducer=kt,e.createWarReducer=vt,e.datDefinitions=C,e.datRoot=D,e.dfhDefinitions=M,e.dfhLabelByFksKey=U,e.dfhRoot="dfh",e.facetteByPk="by_namespace",e.getEnd=dt,e.getFromTo=ft,e.getStart=yt,e.indexStatementByObject=X,e.indexStatementByObjectProperty=Z,e.indexStatementBySubject=H,e.indexStatementBySubjectProperty=W,e.infDefinitions=q,e.infRoot=Y,e.ofSubstore=function(e){return function(t){if(!("@angular-redux::fractalkey"in t))return!1;var n=JSON.parse(t["@angular-redux::fractalkey"]);return c.equals(n,e)}},e.pag=pt,e.paginateKey=lt,e.paginateName=st,e.paginatedBy=ut,e.pendingRequestReducer=Pt,e.proClassFieldConfgByProjectAndClassKey=ce,e.proDefinitions=se,e.proRoot=re,e.resolvedRequestReducer=It,e.rootReducer=bt,e.sandboxStateReducer=St,e.setAppState=Ot,e.storeFlattened=Le,e.sysDefinitions=me,e.sysRoot=he,e.tabDefinitions=ve,e.tabRoot=Ee,e.textPropertyByFksKey=oe,e.textPropertyByFksWithoutLang=ae,e.warDefinitions=Pe,e.warRoot=Se,e.ɵa=xt,e.ɵb=xe,e.ɵc=Te,e.ɵd=be,e.ɵe=T,e.ɵf=Ge,e.ɵg=Fe,e.ɵh=Ue,e.ɵi=Ne,e.ɵj=Me,e.ɵk=Re,e.ɵl=Ke,e.ɵm=Ye,e.ɵn=He,e.ɵo=ze,e.ɵp=nt,e.ɵq=at,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kleiolab-lib-redux-src-lib-redux-store.umd.min.js.map