{"version":3,"file":"kleiolab-lib-sockets-src-lib-sockets.js","sources":["ng://@kleiolab/lib-sockets/src/lib/sockets/models/SocketsConfig.ts","ng://@kleiolab/lib-sockets/src/lib/sockets/services/entity-preview-socket.service.ts","ng://@kleiolab/lib-sockets/src/lib/sockets/services/import-table-socket-socket.service.ts","ng://@kleiolab/lib-sockets/src/lib/sockets/services/sys-status-socket.service.ts","ng://@kleiolab/lib-sockets/src/lib/sockets/sockets.module.ts"],"sourcesContent":["export class SocketsConfig {\n  baseUrl = '';\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { WarEntityPreview } from \"@kleiolab/lib-sdk-lb4\";\nimport { SocketsConfig } from \"../models/SocketsConfig\";\nimport { WarActions } from '@kleiolab/lib-redux';\n@Injectable()\nexport class EntityPreviewSocket extends Socket {\n\n  constructor(\n    warActions: WarActions,\n    @Optional() config?: SocketsConfig\n  ) {\n\n    super({ url: config.baseUrl + '/WarEntityPreview' });\n\n    // dispatch a method to put the EntityPreview to the store\n    this.fromEvent<WarEntityPreview>('entityPreview').subscribe(data => {\n      warActions.entity_preview.loadSucceeded([data], '');\n    });\n\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { SocketsConfig } from '../models/SocketsConfig';\n@Injectable()\nexport class ImportTableSocket extends Socket {\n  connected = false;\n\n  constructor(\n    @Optional() config?: SocketsConfig\n  ) {\n\n    super({ url: config.baseUrl + '/ImportTable' });\n\n    this.connected = true;\n\n  }\n\n  cleanConnect() {\n    if (!this.connected) this.connect();\n  }\n\n  cleanDisconnect() {\n    this.disconnect();\n    this.connected = false;\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { SocketsConfig } from '../models/SocketsConfig';\n@Injectable()\nexport class SysStatusSocket extends Socket {\n\n  constructor(\n    @Optional() config?: SocketsConfig\n  ) {\n\n    super({ url: config.baseUrl + '/SysStatus' });\n\n  }\n}\n","import { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\nimport { SocketIoModule } from 'ngx-socket-io';\nimport { SocketsConfig } from './models/SocketsConfig';\nimport { EntityPreviewSocket } from './services/entity-preview-socket.service';\nimport { ImportTableSocket } from './services/import-table-socket-socket.service';\nimport { SysStatusSocket } from './services/sys-status-socket.service';\n\n@NgModule({\n  declarations: [\n    // components\n  ],\n  imports: [\n    SocketIoModule,\n    // ...\n  ],\n  providers: [EntityPreviewSocket, ImportTableSocket, SysStatusSocket],\n  bootstrap: [/** AppComponent **/]\n})\nexport class SocketsModule {\n\n  static forRoot(config: SocketsConfig): ModuleWithProviders<SocketsModule> {\n    return {\n      ngModule: SocketsModule,\n      providers: [\n        { provide: SocketsConfig, useValue: config },\n        EntityPreviewSocket,\n        ImportTableSocket,\n        SysStatusSocket\n      ],\n    }\n  }\n  constructor(@Optional() @SkipSelf() parentModule?: SocketsModule) {\n    if (parentModule) {\n      throw new Error(\n        'SocketsModule is already loaded. Import it in the AppModule only');\n    }\n  }\n\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA,MAAa,aAAa;IAA1B;QACE,YAAO,GAAG,EAAE,CAAC;KACd;CAAA;;;IADC,gCAAa;;;;;;;;ACDf,MAMa,mBAAoB,SAAQ,MAAM;;;;;IAE7C,YACE,UAAsB,EACV,MAAsB;QAGlC,KAAK,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,OAAO,GAAG,mBAAmB,EAAE,CAAC,CAAC;;QAGrD,IAAI,CAAC,SAAS,CAAmB,eAAe,CAAC,CAAC,SAAS;;;;QAAC,IAAI;YAC9D,UAAU,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;SACrD,EAAC,CAAC;KAEJ;;;YAfF,UAAU;;;;YADF,UAAU;YADV,aAAa,uBAOjB,QAAQ;;;;;;;;ACVb,MAIa,iBAAkB,SAAQ,MAAM;;;;IAG3C,YACc,MAAsB;QAGlC,KAAK,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,OAAO,GAAG,cAAc,EAAE,CAAC,CAAC;QANlD,cAAS,GAAG,KAAK,CAAC;QAQhB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KAEvB;;;;IAED,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,OAAO,EAAE,CAAC;KACrC;;;;IAED,eAAe;QACb,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;KACxB;;;YArBF,UAAU;;;;YADF,aAAa,uBAMjB,QAAQ;;;;IAHX,sCAAkB;;;;;;;;ACLpB,MAIa,eAAgB,SAAQ,MAAM;;;;IAEzC,YACc,MAAsB;QAGlC,KAAK,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,OAAO,GAAG,YAAY,EAAE,CAAC,CAAC;KAE/C;;;YATF,UAAU;;;;YADF,aAAa,uBAKjB,QAAQ;;;;;;;;ACPb,MAkBa,aAAa;;;;IAaxB,YAAoC,YAA4B;QAC9D,IAAI,YAAY,EAAE;YAChB,MAAM,IAAI,KAAK,CACb,kEAAkE,CAAC,CAAC;SACvE;KACF;;;;;IAhBD,OAAO,OAAO,CAAC,MAAqB;QAClC,OAAO;YACL,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE;gBACT,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAE;gBAC5C,mBAAmB;gBACnB,iBAAiB;gBACjB,eAAe;aAChB;SACF,CAAA;KACF;;;YAvBF,QAAQ,SAAC;gBACR,YAAY,EAAE;;iBAEb;gBACD,OAAO,EAAE;oBACP,cAAc;iBAEf;gBACD,SAAS,EAAE,CAAC,mBAAmB,EAAE,iBAAiB,EAAE,eAAe,CAAC;gBACpE,SAAS,EAAE,uBAAsB;aAClC;;;;YAcoD,aAAa,uBAAnD,QAAQ,YAAI,QAAQ;;;;;;;;;;;;;;;;;"}