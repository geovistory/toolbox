{"version":3,"file":"kleiolab-lib-sockets.js","sources":["ng://@kleiolab/lib-sockets/lib/sockets/models/SocketsConfig.ts","ng://@kleiolab/lib-sockets/lib/sockets/services/entity-preview-socket.service.ts","ng://@kleiolab/lib-sockets/lib/sockets/services/import-table-socket-socket.service.ts","ng://@kleiolab/lib-sockets/lib/sockets/services/sys-status-socket.service.ts","ng://@kleiolab/lib-sockets/lib/sockets/sockets.module.ts"],"sourcesContent":["export class SocketsConfig {\n  baseUrl = '';\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { WarEntityPreview } from \"@kleiolab/lib-sdk-lb4\";\nimport { SocketsConfig } from \"../models/SocketsConfig\";\nimport { WarActions } from '@kleiolab/lib-redux';\n@Injectable()\nexport class EntityPreviewSocket extends Socket {\n\n  constructor(\n    warActions: WarActions,\n    @Optional() config?: SocketsConfig\n  ) {\n\n    super({ url: config.baseUrl + '/WarEntityPreview' });\n\n    // dispatch a method to put the EntityPreview to the store\n    this.fromEvent<WarEntityPreview>('entityPreview').subscribe(data => {\n      warActions.entity_preview.loadSucceeded([data], '');\n    });\n\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { SocketsConfig } from '../models/SocketsConfig';\n@Injectable()\nexport class ImportTableSocket extends Socket {\n  connected = false;\n\n  constructor(\n    @Optional() config?: SocketsConfig\n  ) {\n\n    super({ url: config.baseUrl + '/ImportTable' });\n\n    this.connected = true;\n\n  }\n\n  cleanConnect() {\n    if (!this.connected) this.connect();\n  }\n\n  cleanDisconnect() {\n    this.disconnect();\n    this.connected = false;\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { SocketsConfig } from '../models/SocketsConfig';\n@Injectable()\nexport class SysStatusSocket extends Socket {\n\n  constructor(\n    @Optional() config?: SocketsConfig\n  ) {\n\n    super({ url: config.baseUrl + '/SysStatus' });\n\n  }\n}\n","import { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\nimport { SocketIoModule } from 'ngx-socket-io';\nimport { SocketsConfig } from './models/SocketsConfig';\nimport { EntityPreviewSocket } from './services/entity-preview-socket.service';\nimport { ImportTableSocket } from './services/import-table-socket-socket.service';\nimport { SysStatusSocket } from './services/sys-status-socket.service';\n\n@NgModule({\n  declarations: [\n    // components\n  ],\n  imports: [\n    SocketIoModule,\n    // ...\n  ],\n  providers: [EntityPreviewSocket, ImportTableSocket, SysStatusSocket],\n  bootstrap: [/** AppComponent **/]\n})\nexport class SocketsModule {\n\n  static forRoot(config: SocketsConfig): ModuleWithProviders<SocketsModule> {\n    return {\n      ngModule: SocketsModule,\n      providers: [\n        { provide: SocketsConfig, useValue: config },\n        EntityPreviewSocket,\n        ImportTableSocket,\n        SysStatusSocket\n      ],\n    }\n  }\n  constructor(@Optional() @SkipSelf() parentModule?: SocketsModule) {\n    if (parentModule) {\n      throw new Error(\n        'SocketsModule is already loaded. Import it in the AppModule only');\n    }\n  }\n\n}\n"],"names":["tslib_1.__extends"],"mappings":";;;;;;;;;;AAAA;IAAA;QACE,YAAO,GAAG,EAAE,CAAC;KACd;IAAD,oBAAC;CAAA,IAAA;;;IADC,gCAAa;;;;;;;;;ICK0BA,uCAAM;IAE7C,6BACE,UAAsB,EACV,MAAsB;QAFpC,YAKE,kBAAM,EAAE,GAAG,EAAE,MAAM,CAAC,OAAO,GAAG,mBAAmB,EAAE,CAAC,SAOrD;;QAJC,KAAI,CAAC,SAAS,CAAmB,eAAe,CAAC,CAAC,SAAS;;;;QAAC,UAAA,IAAI;YAC9D,UAAU,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;SACrD,EAAC,CAAC;;KAEJ;;gBAfF,UAAU;;;;gBADF,UAAU;gBADV,aAAa,uBAOjB,QAAQ;;IAWb,0BAAC;CAAA,CAfwC,MAAM;;;;;;;;ICFRA,qCAAM;IAG3C,2BACc,MAAsB;QADpC,YAIE,kBAAM,EAAE,GAAG,EAAE,MAAM,CAAC,OAAO,GAAG,cAAc,EAAE,CAAC,SAIhD;QAVD,eAAS,GAAG,KAAK,CAAC;QAQhB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;KAEvB;;;;IAED,wCAAY;;;IAAZ;QACE,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,OAAO,EAAE,CAAC;KACrC;;;;IAED,2CAAe;;;IAAf;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;KACxB;;gBArBF,UAAU;;;;gBADF,aAAa,uBAMjB,QAAQ;;IAiBb,wBAAC;CAAA,CArBsC,MAAM,GAqB5C;;;IApBC,sCAAkB;;;;;;;;;ICDiBA,mCAAM;IAEzC,yBACc,MAAsB;eAGlC,kBAAM,EAAE,GAAG,EAAE,MAAM,CAAC,OAAO,GAAG,YAAY,EAAE,CAAC;KAE9C;;gBATF,UAAU;;;;gBADF,aAAa,uBAKjB,QAAQ;;IAMb,sBAAC;CAAA,CAToC,MAAM;;;;;;;ACJ3C;IA+BE,uBAAoC,YAA4B;QAC9D,IAAI,YAAY,EAAE;YAChB,MAAM,IAAI,KAAK,CACb,kEAAkE,CAAC,CAAC;SACvE;KACF;;;;;IAhBM,qBAAO;;;;IAAd,UAAe,MAAqB;QAClC,OAAO;YACL,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE;gBACT,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAE;gBAC5C,mBAAmB;gBACnB,iBAAiB;gBACjB,eAAe;aAChB;SACF,CAAA;KACF;;gBAvBF,QAAQ,SAAC;oBACR,YAAY,EAAE;;qBAEb;oBACD,OAAO,EAAE;wBACP,cAAc;qBAEf;oBACD,SAAS,EAAE,CAAC,mBAAmB,EAAE,iBAAiB,EAAE,eAAe,CAAC;oBACpE,SAAS,EAAE,uBAAsB;iBAClC;;;;gBAcoD,aAAa,uBAAnD,QAAQ,YAAI,QAAQ;;IAOnC,oBAAC;CA/BD;;;;;;;;;;;;;;;;;;;;;;"}