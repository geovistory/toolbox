!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@kleiolab/lib-utils/src/lib/date-time",["exports","@angular/core"],e):e(((t=t||self).kleiolab=t.kleiolab||{},t.kleiolab["lib-utils"]=t.kleiolab["lib-utils"]||{},t.kleiolab["lib-utils"].src=t.kleiolab["lib-utils"].src||{},t.kleiolab["lib-utils"].src.lib=t.kleiolab["lib-utils"].src.lib||{},t.kleiolab["lib-utils"].src.lib["date-time"]={}),t.ng.core)}(this,(function(t,e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){function t(t){this.onDateChange=new e.EventEmitter,Object.assign(this,t)}return Object.defineProperty(t.prototype,"year",{get:function(){return this._year},set:function(t){this._year=t,this.emitDateChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"month",{get:function(){return this._month},set:function(t){this._month=t,this.emitDateChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"day",{get:function(){return this._day},set:function(t){this._day=t,this.emitDateChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hours",{get:function(){return this._hours},set:function(t){this._hours=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minutes",{get:function(){return this._minutes},set:function(t){this._minutes=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=t},enumerable:!0,configurable:!0}),t.prototype.calcRunningDay=function(t,e,i){t=null==t?1:t;var n=0;return i&&t>2&&(n=1),(e=null==e?1:e)+30*(t-1)+(n+[-1,0,-2,-1,-1,0,0,1,2,2,3,3][t-1])},t.prototype.calcDateByRunningDay=function(t,e){var i=[-1,0,-2,-1,-1,0,0,1,2,2,3,3],n=Math.floor((t+1)/30)+1,o=i[n-1],r=0;e&&n>2&&(r=1);var s=t-30*(n-1)-(r+o);return(n>12||s<1)&&(--n<1&&(e=!e),r=0,e&&n>2&&(r=1),s=t-30*(n-1)-(r+(o=i[n-1]))),{day:s,month:n}},t.prototype.emitDateChange=function(){this.onDateChange.emit({year:this.year,month:this.month,day:this.day})},t.prototype.getGranularity=function(){var t;return this.year&&(t="1 year"),this.month&&(t="1 month"),this.day&&(t="1 day"),this.hours&&(t="1 hour"),this.minutes&&(t="1 minute"),this.seconds&&(t="1 second"),t},t.prototype.getTimeStamp=function(){var t="";return t=this.year?this.pad(Math.abs(this.year),4):"01",t+="-",t+=this.month?this.pad(this.month,2):"01",t+="-",t+=this.day?this.pad(this.day,2):"01",t+=" ",t+=this.hours?this.pad(this.hours,2):"00",t+=":",t+=this.minutes?this.pad(this.minutes,2):"00",t+=":",t+=this.seconds?this.pad(this.seconds,2):"00",t+=this.year<0?" BC":""},t.prototype.getDate=function(){if(!this.year&&0!==this.year)return null;if(this.day&&!this.month)return null;if(this.hours&&!this.day)return null;if(this.minutes&&!this.hours)return null;if(this.seconds&&!this.hours)return null;var t=new Date;return t.setFullYear(this.year<0?this.year+1:this.year),t.setMonth(this.month?this.month-1:0),t.setDate(this.day?this.day:1),t.setHours(this.hours?this.hours:0),t.setMinutes(this.minutes?this.minutes:0),t.setSeconds(this.seconds?this.seconds:0),t},t.prototype.pad=function(t,e,i){void 0===i&&(i="0");var n=t.toString();return n.length>=e?n:new Array(e-n.length+1).join(i)+n},t.prototype.addYear=function(){this.year++,0===this.year&&this.year++,this.day>this.lengthOfMonth()&&(this.day=this.lengthOfMonth())},t.prototype.addMonth=function(){this.month++,this.month>12?(this.month=1,this.addYear()):this.day>this.lengthOfMonth()&&(this.day=this.lengthOfMonth())},t.prototype.addDay=function(){this.day++,this.day>this.lengthOfMonth()&&(this.day=1,this.addMonth())},t.prototype.addHour=function(){this.hours++,this.hours>23&&(this.hours=0,this.addDay())},t.prototype.addMinute=function(){this.minutes++,this.minutes>59&&(this.minutes=0,this.addHour())},t.prototype.addSecond=function(){this.seconds++,this.seconds>59&&(this.seconds=0,this.addMinute())},t.prototype.removeYear=function(){this.year--,0===this.year&&(this.year=-1),this.day>this.lengthOfMonth()&&(this.day=this.lengthOfMonth())},t.prototype.removeMonth=function(){this.month--,this.month<1?(this.month=12,this.removeYear()):this.day>this.lengthOfMonth()&&(this.day=this.lengthOfMonth())},t.prototype.removeDay=function(){this.day--,this.day<1&&(this.removeMonth(),this.day=this.lengthOfMonth())},t.prototype.removeHour=function(){this.hours--,(this.hours<0||!this.hours)&&(this.hours=23,this.removeDay())},t.prototype.removeMinute=function(){this.minutes--,(this.minutes<0||!this.minutes)&&(this.minutes=59,this.removeHour())},t.prototype.removeSecond=function(){this.seconds--,(this.seconds<0||!this.seconds)&&(this.seconds=59,this.removeMinute())},t.prototype.addDays=function(t){for(var e=0;e<t;e++)this.addDay()},t.prototype.addMonths=function(t){for(var e=0;e<t;e++)this.addMonth()},t.prototype.addYears=function(t){for(var e=0;e<t;e++)this.addYear()},t.prototype.add=function(t){"1 year"===t?this.addYear():"1 month"===t?this.addMonth():"1 day"===t?this.addDay():"1 hour"===t?this.addHour():"1 minute"===t?this.addMinute():"1 second"===t&&this.addSecond()},t.prototype.toLastSecondOf=function(t){this.add(t),this.removeSecond()},t}();var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getEndOf=function(t){void 0===t&&(t=this.getGranularity());var i=new e(this);return i.toLastSecondOf(t),i},e.prototype.lengthOfMonth=function(){var t=this.year,e=this.month,i=[31,28,31,30,31,30,31,31,30,31,30,31];return t%4||-5==t||-1==t||4==t||(i[1]=29),i[--e]},e.prototype.getJulianDay=function(){var t,e=this.calcRunningDay(this.month,this.day,this.isLeapYear());return t=this.year<0?4716+this.year:4715+this.year,1461*Math.floor(t/4)+365*(t%4-3)+e},e.prototype.fromJulianDay=function(t){"string"==typeof t&&(t=parseInt(t,10));var e=Math.floor((t+1095)/1461),i=(t+1095)%1461,n=Math.floor(i/365),o=i%365;4===n&&(n=3,o=365);var r=4*e+n;this.year=r<=4715?r-4716:r-4715;var s=this.calcDateByRunningDay(o,this.isLeapYear());return this.month=s.month,this.day=s.day,this},e.prototype.isLeapYear=function(){return!(this.year%4)},e.prototype.getJulianSecond=function(){var t=60*this.getJulianDay()*60*24;return this.seconds>0&&(t+=this.seconds),this.minutes>0&&(t+=60*this.minutes),this.hours>0&&(t+=60*this.hours*60),t},e.prototype.fromJulianSecond=function(t){var e=Math.floor(t/86400),i=t%86400;this.hours=Math.floor(i/3600);var n=this.hours%3600;return this.minutes=Math.floor(n/60),this.seconds=this.minutes%60,this.fromJulianDay(e)},e}(o),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.lengthOfMonth=function(){this.year;var t=this.month;if(t>0||t<=12){var e=[31,28,31,30,31,30,31,31,30,31,30,31];return this.isLeapYear()&&(e[1]=29),e[--t]}},e.prototype.getEndOf=function(t){void 0===t&&(t=this.getGranularity());var i=new e(this);return i.toLastSecondOf(t),i},e.prototype.getJulianDay=function(){var t=this.calcRunningDay(this.month,this.day,this.isLeapYear()),e=this.year-1,i=e%400,n=i%100;return 1721426+146097*Math.floor(e/400)+36524*Math.floor(i/100)+1461*Math.floor(n/4)+365*(n%4)+t},e.prototype.fromJulianDay=function(t){"string"==typeof t&&(t=parseInt(t));if(t<2299161){var e=(new r).fromJulianDay(t);this.year=e.year,this.month=e.month,this.day=e.day}else{var i=Math.floor((t-1721426)/146097),n=(t-1721426)%146097,o=Math.floor(n/36524),s=n%36524;4===o&&(o=3,s=36524);var a=Math.floor(s/1461),h=s%1461,u=Math.floor(h/365),y=h%365;4===u&&(u=3,y=365);var d=400*i+100*o+4*a+u;this.year=d+1;var c=this.calcDateByRunningDay(y,this.isLeapYear());this.month=c.month,this.day=c.day}return(this)},e.prototype.isLeapYear=function(){var t=this.year;return!((t%4||!(t%100))&&t%400)},e.prototype.getJulianSecond=function(){var t=60*this.getJulianDay()*60*24;return this.seconds>0&&(t+=this.seconds),this.minutes>0&&(t+=60*this.minutes),this.hours>0&&(t+=60*this.hours*60),t},e.prototype.fromJulianSecond=function(t){var e=Math.floor(t/86400),i=t%86400;this.hours=Math.floor(i/3600);var n=this.hours%3600;return this.minutes=Math.floor(n/60),this.seconds=this.minutes%60,this.fromJulianDay(e)},e}(o);var a=function(){function t(t){this.LAST_DAY_BC=1721422,Object.assign(this,t),t.julian_day&&(this.julianDay=t.julian_day)}return t.prototype.getGregorianDateTime=function(){var t=new s;return t.fromJulianDay(this.julianDay),t},t.prototype.getJulianDateTime=function(){var t=new r;return t.fromJulianDay(this.julianDay),t},t.prototype.getDateTime=function(t){return void 0===t&&(t=this.calendar),t?"gregorian"===t?this.getGregorianDateTime():"julian"===t?this.getJulianDateTime():void 0:null},t.prototype.getDate=function(t){return void 0===t&&(t=this.calendar),this.getDateTime(t).getDate()},t.prototype.getDateFormatString=function(t){if(this.julianDay<=this.LAST_DAY_BC)switch(t){case"1 year":return"y GG";case"1 month":return"MMM, y GG";case"1 day":return"MMM d, y GG";case"1 hour":return"MMM d, y GG, HH";case"1 minute":return"MMM d, y GG, HH:mm";case"1 second":return"MMM d, y GG, HH:mm:ss";default:return""}else switch(t){case"1 year":return"y";case"1 month":return"MMM, y";case"1 day":return"MMM d, y";case"1 hour":return"MMM d, y, HH";case"1 minute":return"MMM d, y, HH:mm";case"1 second":return"MMM d, y, HH:mm:ss";default:return""}},t.prototype.getShortesDateFormatString=function(){return this.getDateFormatString(this.duration)},t.prototype.getJulianSecond=function(){return 60*this.julianDay*60*24},t.prototype.getLastSecond=function(t){return void 0===t&&(t=this.calendar),this.getDateTime().getEndOf(this.duration).getJulianSecond()},t}();t.DateTimeCommons=o,t.GregorianDateTime=s,t.JulianDateTime=r,t.TimePrimitive=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=kleiolab-lib-utils-src-lib-date-time.umd.min.js.map