<!-- Title / Standard Appellations of PeIt -->

<div class="gv-edit-panel-header">
  <gv-pe-it-label [children]="(_children$ | async)" [classConfig]="classConfig" [labelInEdit]="labelInEdit"></gv-pe-it-label>
</div>

<!-- Tools to edit PeIt  -->

<div class="d-flex flex-row gv-flex-grow-1 m-3" style="flex-basis:100%">
  <div class="d-flex flex-column gv-flex-grow-1" style="flex-basis:35%;">

    <div class="gv-footer mb-3">

      <ng-container *ngTemplateOutlet="propertiesHeader"></ng-container>

      <!-- Step 1 for adding a new property -->

      <button class="btn btn-outline-secondary btn-block" (click)="startSelectProperty()" *ngIf="(selectPropState$ | async) === 'init'">
        <i class="fa fa-plus"></i> Add a property ...
      </button>

      <!-- Step 2 for adding new Property section -->

      <!-- <div class="card gv-naming bg-gray-700" *ngIf="(selectPropState$ | async) === 'selectProp'">

        <div class="card-header bt-1">
          <div class="d-flex">
            <div class="gv-h4 text-white gv-flex-grow-1 align-self-center">
              What do you want to add?
            </div>
            <button type="button" name="button" class="btn btn-link text-white align-self-center btn-sm" (click)="stopSelectProperty()">
              <i class="fa fa-close"></i>
            </button>
          </div>
        </div>

        
      </div> -->
      <gv-add-info-pe-it *ngIf="(selectPropState$ | async) === 'selectProp'" [uiElements]="uiElementsForAddInfo" [classConfig]="classConfig"
        [addedChildren$]="_children$" (addOptionSelected)="addOptionSelected($event)" (cancel)="stopSelectProperty()"></gv-add-info-pe-it>
    </div>


    <div class="gv-body gv-flex-grow-1" style="overflow-y:auto">
      <div *ngFor="let item of (_children$ | async) | keys; trackBy:getKey">
        <gv-pe-it-role-set-editable [parentPath]="basePath" [index]="item.key" (onRemoveRoleSet)="removeRoleSet(item.key)"></gv-pe-it-role-set-editable>
      </div>
    </div>

  </div>

  <div class="d-flex ml-3" style="flex-basis:65%; overflow:hidden">
    <div class="d-flex flex-column gv-flex-grow-1" style="overflow:hidden">

      <div class="btn-group d-flex mb-3" role="group" aria-label="Basic example">
        <div class="gv-flex-grow-1 bg-gray-700 text-white rounded-left gv-card-spacer-x align-self-stretch d-flex">
          <div class="align-self-center">
            <i class="fa fa-compass"></i> Map
          </div>
        </div>
        <button class="btn btn-gray-700">
          <i class="fa fa-ellipsis-v"></i>
        </button>
      </div>

      <div class="card gv-flex-grow-1 mb-3">
        <div class="card-body p-0" style="overflow: hidden;">
          <img src="/assets/images/map.jpg" class="img-fluid" alt="Responsive image">

        </div>
      </div>

      <gv-pe-it-timeline [path]="basePath"></gv-pe-it-timeline>

    </div>
  </div>
</div>



<!-- ************************** NG TEMPLATES ****************************** -->

<ng-template #propertiesHeader>
  <div class="btn-group gv-flex-shrink-0 d-flex mb-3" role="group" aria-label="Basic example">
    <div class="gv-flex-grow-1 bg-gray-700 text-white rounded-left gv-card-spacer-x align-self-stretch d-flex">
      <div class="align-self-center">
        <i class="fa fa-lightbulb-o"></i> Properties
      </div>
    </div>
    <div class="btn-group" ngbDropdown placement="bottom-right">
      <button class="btn btn-gray-700" ngbDropdownToggle>
        <i class="fa fa-ellipsis-v"></i>
      </button>
      <div ngbDropdownMenu aria-labelledby="dropdown" class="dropdown-menu">
        <button class="dropdown-item" (click)="showCommunityStats()" *ngIf="!(communityStatsVisible$|async)">Show Community Statistics</button>
        <button class="dropdown-item" (click)="hideCommunityStats()" *ngIf="(communityStatsVisible$|async)">Hide Community Statistics</button>
        <button class="dropdown-item" (click)="showOntoInfo()" *ngIf="!(ontoInfoVisible$|async)">Show Ontology Info</button>
        <button class="dropdown-item" (click)="hideOntoInfo()" *ngIf="(ontoInfoVisible$|async)">Hide Ontology Info</button>

      </div>
    </div>
  </div>
</ng-template>