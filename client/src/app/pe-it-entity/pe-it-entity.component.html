<div [ngClass]="{'dev-view': entityEditor.devView}">

  <!-- Preview State -->

  <div *ngIf="peItEntityState=='preview'">

  </div>


  <!-- Create State -->

  <div *ngIf="peItEntityState === 'create'">

    <span *ngIf="entityEditor.devView">
      [ready: {{isReadyToCreate}}]
    </span>

    <gv-prop-section-list
    [propSectionListState]="'create'"
    [parentPeIt]="peItToCreate"
    [outgoingProperties]="outgoingProperties"
    [ingoingProperties]="ingoingProperties"
    (readyToCreate)="emitReadyToCreate($event)"
    (notReadyToCreate)="emitNotReadyToCreate()"
    ></gv-prop-section-list>


  </div>

  <!-- Add State -->

  <div *ngIf="peItEntityState === 'add-pe-it' && !loading">

    <small class="text-muted">Person</small> {{stdAppeString}}

    <gv-prop-section-list
    [roles]="peIt.pi_roles"
    [propSectionListState]="peItEntityState"
    [parentPeIt]="peIt"
    [outgoingProperties]="outgoingProperties"
    [ingoingProperties]="ingoingProperties"
    (readyToCreate)="emitReadyToCreate($event)"
    (notReadyToCreate)="emitNotReadyToCreate()"
    (readyToAdd)="onRolesReadyToAdd($event)"
    (notReadyToAdd)="onRolesNotReadyToAdd()"
    ></gv-prop-section-list>


  </div>


  <!-- Edit and ViewCommunity States  -->

  <div *ngIf="['edit', 'viewCommunity'].indexOf(peItEntityState) > -1 && !loading">

    <!-- Title / Standard Appellations of PeIt -->

    <div class="gv-edit-panel-header">
      <section class="row">
        <div class="col-md-8">
          <h2>
            <small class="text-muted">Person</small> {{stdAppeString}}
          </h2>
        </div>
        <span *ngIf="entityEditor.devView" class="">
          [pk: {{peIt?.pk_entity}}]
        </span>
        <gv-entity-editor-settings class="col-md-4 text-right"></gv-entity-editor-settings>


      </section>
    </div>

    <!-- Tools to edit PeIt  -->

    <div class="d-flex flex-row gv-flex-grow-1 m-3">

      <div class="d-flex gv-flex-grow-1" style="max-width:450px">
        <gv-prop-section-list
        class="gv-flex-grow-1 d-flex flex-row"
        [roles]="peIt.pi_roles"
        [propSectionListState]="peItEntityState"
        [pkEntity]="pkEntity"
        [parentPeIt]="peIt"
        [outgoingProperties]="outgoingProperties"
        [ingoingProperties]="ingoingProperties"
        (appeChange)="whenAppeChange($event)"
        ></gv-prop-section-list>
      </div>

      <div class="d-flex gv-flex-grow-1 ml-3">
        <div class="d-flex flex-column gv-flex-grow-1">
          <div class="card bg-gray-700 text-white mb-3">
            <div class="card-header">
              <i class="fa fa-compass"></i>  Map
            </div>
          </div>

          <div class="card gv-flex-grow-1 mb-3">
            <div class="card-body">
              Map
            </div>
          </div>

          <div class="card bg-gray-700 text-white mb-3">
            <div class="card-header">
              <i class="fa fa-calendar"></i>  Timeline
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              Timeline
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
