
<div [ngClass]="{'alt-pressed': keyboard.altPressed}">

  <!-- Component in Create State -->
  <span *ngIf="keyboard.altPressed">
    [ready: {{isReadyToCreate}}]
  </span>

  <div *ngIf="roleState === 'create'">
    <gv-te-ent *ngIf="pointTo=='TeEnt'"
    [fkClass]="pkTargetClass"
    [teEntState]="'create'"
    [parentProperty]="parentProperty"
    [parentRole]="role"
    [isOutgoing]="isOutgoing"
    (readyToCreate)="teEntReadyToCreate($event)"
    (notReadyToCreate)="teEntNotReadyToCreate()"
    ></gv-te-ent>

    <gv-pe-it *ngIf="pointTo=='PeIt'"
    [peItState]="'create'"
    [fkClass]="pkTargetClass"
    (readyToCreate)="peItReadyToCreate($event)"
    (notReadyToCreate)="peItNotReadyToCreate()"
    ></gv-pe-it>

  </div>


  <div *ngIf="roleState === 'add-pe-it'">
    <!-- if the role points to a temporal entity -->

    <div *ngIf="pointTo=='TeEnt'">


      <!-- TeEnt Component (passing the temporal entity) -->
      <gv-te-ent
      [teEntState]="roleState"
      [teEnt]="role.temporal_entity"
      [parentProperty]="parentProperty"
      [parentRole]="role"
      [isOutgoing]="isOutgoing"
      (appeChange)="emitAppeChange($event)"> <div eprUi>

        <!-- UI for is in project -->

        <div class="gv-in-project">

          <!-- Is in project -->
          <button type="button" name="button" class="btn btn-link btn-sm"
          *ngIf="inProject"
          [attr.disabled]="entityProjectRel.is_standard_in_project || changeIsInProjectLoading ? 'disabled' : null"
          (click)="inProject=false">
          <i class="fa fa-check-square-o" ></i> </button>

          <!-- Is not in project -->
          <button type="button" name="button" class="btn btn-link btn-sm"
          [attr.disabled]="changeIsInProjectLoading ? 'disabled' : null"
          *ngIf="!inProject"  (click)="inProject=true">
          <i class="fa fa-square-o"></i></button>

        </div>

      </div> </gv-te-ent>

    </div>

    <!-- if the role points to a persistent item -->

    <div *ngIf="pointTo=='PeIt'">

      <!-- include component PeIt (passing the PeIt) -->
      <gv-pe-it
      [peItState]="roleState"
      [appellation]="role?.appellation"
      [language]="role?.language"
      [pkEntity]="role.fk_entity"
      (appeChange)="emitAppeChange($event)"
      ></gv-pe-it>

    </div>

  </div>



  <!-- Component in Edit State -->

  <div *ngIf="roleState === 'edit'">

    <!-- if the role points to a persistent item -->

    <div *ngIf="pointTo=='PeIt'">
      <!-- include component PeIt (passing the PeIt) -->
      <gv-pe-it
      [peItState]="roleState"
      [appellation]="role?.appellation"
      [language]="role?.language"
      [pkEntity]="role.fk_entity"
      (appeChange)="emitAppeChange($event)"
      ></gv-pe-it>

    </div>

    <!-- if the role points to a temporal entity -->

    <div *ngIf="pointTo=='TeEnt'">


      <!-- TeEnt Component (passing the temporal entity) -->
      <gv-te-ent
      [teEntState]="roleState"
      [teEnt]="role.temporal_entity"
      [parentProperty]="parentProperty"
      [parentRole]="role"
      [isOutgoing]="isOutgoing"
      (appeChange)="emitAppeChange($event)"> <div eprUi>

        <!-- UI for standard in project -->

        <div class="gv-standard-in-project" *ngIf="standardInProjectVisible">

          <!-- If is standard -->

          <i class="fa fa-eye gv-true" title="Is standard" *ngIf="isStandardInProject"></i>

          <!-- If not standard -->

          <button type="button" name="button" class="btn btn-link btn-sm"
          *ngIf="!isStandardInProject"
          [attr.disabled]="loadingStdChange ? 'disabled' : null"
          (click)="requestStandard()" title="Set as standard"
          ><i class="fa fa-eye-slash gv-false"></i></button>

        </div>

      </div> </gv-te-ent>


    </div>
  </div>
</div>
