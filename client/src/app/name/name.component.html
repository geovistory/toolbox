<div class="card gv-name">
  <div class="card-header gv-name-header d-flex flex-row">
    <div class="gv-in-project">
      <i class="fa fa-check-square-o"></i>
    </div>
    <div class="gv-pref-alternative">
      <i class="fa fa-eye"></i>
    </div>

    <!-- Not editing state -->
    <div class="gv-label gv-display-label gv-flex-grow-1 gv-pointer" *ngIf="!editingAppellation" (click)="toggleCardBody()">
      {{appellationString}}
    </div>

    <!-- Editing state -->
    <div class="gv-label gv-editing-name gv-flex-grow-1" *ngIf="editingAppellation">


      <form (submit)="stopEditAppellation()">
        <div class="form-group">
          <span *ngFor="let token of appellation.tokens; let i = index;">
            <gv-name-part-input [appellation]="appellation" [token]="token" (enterKey)="stopEditAppellation()"></gv-name-part-input>
          </span>
        </div>
        <fieldset *ngIf="notEmptyAppellation">
          <hr>
          <div class="form-group" *ngFor="let token of appellation.tokens; let i=index">
            <gv-name-part [nameComponent]="this" [appellation]="appellation" [token]="token"></gv-name-part>
          </div>
          <div class="form-group">
            <button type="submit" class="gv-stop-edit-btn btn btn-primary">
              Save
            </button>
          </div>
        </fieldset>
      </form>

      <!--
      <span *ngFor="let token of appellation.tokens; let i = index;">
        <gv-name-part-input [appellation]="appellation" [token]="token" (enterKey)="stopEditAppellation()"></gv-name-part-input>
      </span>
      <div class="gv-name-section" >
        <span *ngFor="let token of appellation.tokens; let i=index">
          <gv-name-part [nameComponent]="this" [appellation]="appellation" [token]="token"></gv-name-part>
        </span>
      </div>
      <button type="button" class="gv-stop-edit-btn btn btn-primary" (click)="stopEditAppellation()">
        Save
      </button> -->



    </div>

    <div ngbDropdown placement="bottom-right" class="ml-auto d-inline-block gv-name-dropdown">
      <button class="btn btn-outline-primary" id="dropdown" ngbDropdownToggle><i class="fa fa-ellipsis-v"></i></button>
      <div ngbDropdownMenu aria-labelledby="dropdown" class="dropdown-menu">
        <button *ngIf="cardBodyState==='collapsed'" class="dropdown-item" (click)="showDetails()">Show Details</button>
        <button *ngIf="cardBodyState==='expanded'" class="dropdown-item" (click)="hideDetails()">Hide Details</button>
        <button class="dropdown-item" *ngIf="!editingAppellation" (click)="editAppellation()">Edit name</button>
        <button class="dropdown-item">Add a section</button>
        <button class="dropdown-item">Show annotations</button>
        <button class="dropdown-item">Add annotations</button>
        <button class="dropdown-item">Remove from project</button>
      </div>
    </div>
  </div>

  <div class="gv-card-body-wrapper" [@slideInOut]="cardBodyState">

    <!-- <div class="gv-label" *ngIf="!editingAppellation">
      <button type="button" class="gv-edit-btn btn btn-link" name="button" (click)="editAppellation()">
        <i class="fa fa-edit"></i> Edit name
      </button>
    </div> -->

    <div class="gv-name-section" *ngIf="showNamePartSection()">
      <div class="card-body gv-name-section-header d-flex flex-row">
        <div class="gv-label gv-flex-grow-1">Name Parts</div>
        <button type="button" class="gv-edit-btn btn btn-link btn-sm" name="button" (click)="editAppellation()">
          <i class="fa fa-edit"></i> Edit
        </button>
      </div>
      <span *ngFor="let token of appellation.tokens; let i=index">
        <div class="card-body gv-name-part" *ngIf="isNamePartToken(token)">
          <div class="d-flex">
            <div class="gv-label">
              <div class="gv-name-part-token d-flex">
                <div class="gv-token-label gv-flex-grow-1">
                  {{token.string}}
                </div>
                <div class="gv-token-type">
                  <i>{{token.type.label}}</i>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex gv-revisions">
            <div class="ml-auto text-success">
            </div>
          </div>
        </div>
      </span>
    </div>
    <div class="card-footer gv-name-footer">
      <div class="btn btn-block btn-light">
        Add a property sectionâ€¦
      </div>
    </div>

  </div>
</div>