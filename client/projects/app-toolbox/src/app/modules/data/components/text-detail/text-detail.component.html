<as-split class="gv-split-style" [ngClass]="{'gv-hide-split-gutter': t.layoutMode!=='both'}" [direction]="'horizontal'"
  [gutterSize]="1" [useTransition]="t.useTransition" (dragEnd)="t.onResizeArea($event)">

  <!-------------------------------------------------------------------
       Text Editor
    -------------------------------------------------------------------->
  <as-split-area [size]="t.splitSizeLeft" class="gv-flex-fh">

    <gv-detail-top-bar [openRightAreaBtn]="t.layoutMode=='left-only'" [closeLeftAreaBtn]="t.layoutMode=='both'"
      (closeLeft)="t.setLayoutMode('right-only')"
      (openRight)="t.setLayoutMode('both');  annotationsVisible$.next(true);">

      <!--  *ngIf="(readOnly$|async)" -->
      <gv-version-picker class="d-inline-block ml-2" [versionList]="(versions$ | async)"
        [selectedVersion]="(digital$ | async)?.entity_version" (versionChange)="changeVersion($event)">
      </gv-version-picker>

      <div class="ml-3 mat-caption"
        [ngClass]="{'mat-text-warn':(textLength/maxLength > 0.9), 'text-muted': (textLength/maxLength <= 0.9)}">
        {{textLength}} / {{maxLength}} characters
      </div>
      <span class="ml-auto">
        <button class="btn btn-sm btn-link" (click)="annotate()" *ngIf="(showAnnotateBtn$|async)">
          <i class="fa fa-plus" aria-hidden="true"></i> Annotate…
        </button>
        <button class="btn btn-sm btn-link" (click)="t.setLayoutMode('both'); annotationsVisible$.next(true)"
          *ngIf="!(annotationsVisible$|async)">
          Show Annotations
        </button>
        <button class="btn btn-sm btn-link" (click)="annotationsVisible$.next(false)"
          *ngIf="(annotationsVisible$|async)">
          Hide Annotations
        </button>
        <!-- <button class="btn btn-link btn-sm" (click)="startEdit()" *ngIf="(readOnly$|async)">
          <i class="fa fa-edit" aria-hidden="true"></i> Edit
        </button>
        <button class="btn btn-link-gray btn-sm" (click)="cancel()" *ngIf="!(readOnly$|async)">
          Cancel
        </button> -->
        <!-- *ngIf="!(readOnly$|async)" -->
        <button class="btn btn-link btn-sm ml-2" (click)="save()">
          <i class="fa fa-save" aria-hidden="true"></i> Save
        </button>
      </span>
    </gv-detail-top-bar>
    <gv-detail-content>

      <gv-quill-edit class="gv-flex-fh gv-quill-borderless" [quillDoc]="quillDoc$ | async" [maxLength]="maxLength"
        [readOnly]="(readOnly$ | async)" [annotationsVisible$]="annotationsVisible$" [annotatedNodes$]="annotatedNodes$"
        [accentuatedNodes$]="accentuatedNodes$" [creatingAnnotation]="false" (textLengthChange)="textLength = $event"
        (selectedDeltaChange)="selectedDeltaChange($event)" (nodeMouseenter)="textNodeMouseenter($event)"
        (nodeMouseleave)="textNodeMouseleave()"></gv-quill-edit>

    </gv-detail-content>
  </as-split-area>

  <!-------------------------------------------------------------------
      Annotations
    -------------------------------------------------------------------->
  <as-split-area [size]="t.splitSizeRight" class="gv-flex-fh">
    <gv-detail-top-bar [openLeftAreaBtn]="t.layoutMode=='right-only'" [closeRightAreaBtn]="t.layoutMode=='both'"
      (closeRight)="t.setLayoutMode('left-only')" (openLeft)="t.setLayoutMode('both');">
      Annotations
      <span class="ml-auto">
        <button class="btn btn-link btn-sm ml-2" (click)="onAdd()">
          <i class="fa fa-plus" aria-hidden="true"></i> Add
        </button>
      </span>
    </gv-detail-top-bar>
    <gv-detail-content>
      <gv-mentioning-list class="gv-tile" [chunksToHighligt$]="chunksToHighlightInList$" [listOf]="listOf"
        (rowMouseenter)="mentioningRowMousenter($event)" (rowMouseleave)="mentioningRowMouseleave($event)"
        (dataChange)="mentioningListChange($event)">
      </gv-mentioning-list>
    </gv-detail-content>


  </as-split-area>
</as-split>
