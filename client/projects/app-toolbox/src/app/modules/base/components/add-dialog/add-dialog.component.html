<gv-slider class="gv-fh" [slide]="selectedPkEntity ? 'right' : 'left'">

    <!-- Slide 1: header -->
    <div left-header class="loc-slider-header">
        <gv-entity-preview class="gv-col-center ml-2" [pkEntity]="data.source.fkInfo" [dragEnabled]="false"
            [openTabOnClick]="false">
        </gv-entity-preview>
        <span class="mat-h2 gv-col-center ml-2 gv-fh">
            {{data.field.label}} a new {{this.fieldTargetClass.targetClassLabel}}
        </span>
    </div>

    <!-- Slide 1: body -->
    <div left-body class="gv-flex-fh gv-ovf-auto">
        <gv-form-create-entity [field]="data.field" [targetClass]="data.targetClass" [source]="data.source"
            [hideTitle]="true" [hideButtons]="true" (saved)="onSaved()" [hideButtons]="true" #f>
        </gv-form-create-entity>
    </div>

    <!-- Slide 1: footer -->
    <div left-footer class="loc-slider-footer mt-3">
        <div class="gv-col-space-between">
            <button mat-flat-button color="primary"
                [disabled]="(f?.submitted && f?.formFactory?.formGroup.invalid) || f?.saving" (click)="f.save()">
                <span *ngIf="!f?.saving">OK</span>
                <div *ngIf="f?.saving" style="margin: 6px;">
                    <mat-spinner [diameter]="20"></mat-spinner>
                </div>
            </button>
        </div>

        <div class="gv-col-space-between">
            <button mat-button type="button" class="ml-2 mr-2" (click)="dialogRef.close()">Cancel</button>
        </div>
    </div>

    <!-- Slide 2: header -->
    <div center-header class="loc-slider-header mat-h2">
        ... or choose an existing {{this.fieldTargetClass.targetClassLabel}}
    </div>

    <!-- Slide 2: body -->
    <div center-body class="gv-fh gv-col-start">
        <gv-search-existing-entity [pkClass]="classAndTypePk.pkClass" [searchString$]="searchString$"
            [mode]="selectedPkEntity ? 'searchAndBack' : 'filtered'" (onMore)="onMoreClick($event)"
            (onBack)="onBackClick()">
        </gv-search-existing-entity>
    </div>

</gv-slider>









<!-- 

<h1 mat-dialog-title style="display: flex; flex-wrap:wrap">
    <div class="mat-body py-2" style="flex: 0 1 auto;">
        <gv-entity-preview [pkEntity]="data.source.fkInfo" [dragEnabled]="false" [openTabOnClick]="false">
        </gv-entity-preview>
    </div>
    <div style="flex: 0 0 auto;">
        <mat-divider class="h-100 mx-3" [vertical]="true"></mat-divider>
    </div>
    <div class="d-flex align-items-center" style="flex: 0 1 auto; overflow:hidden; text-overflow: ellipsis;">
        Add item to field&nbsp;
    </div>
    <div class="d-flex align-items-center" style="flex: 1 1 auto; overflow:hidden; text-overflow: ellipsis;">
        '{{data.field.label}}'
        <mat-icon class="mat-text-secondary">arrow_right_alt</mat-icon>
        <span class="mat-text-secondary">{{ this.fieldTargetClass.targetClassLabel}}</span>
    </div>
    <mat-divider class="w-100"></mat-divider>

    <div *ngIf="(activeElement$ | async) === 'create-or-add'" class="gv-aoc-container mt-2">
        <div class="gv-aoc-left">
            Define a new {{ this.fieldTargetClass.targetClassLabel}}
        </div>
        <div class="gv-aoc-center">
            or
        </div>
        <div class="gv-aoc-right">
            Choose an existing {{ this.fieldTargetClass.targetClassLabel}}
        </div>
    </div>

</h1>
<div mat-dialog-content class="mat-typography gv-flex-fh">
    <div *ngIf="loading$|async" class="gv-table-spinner">
        <mat-spinner [diameter]="20"></mat-spinner>
    </div>
    <ng-container *ngIf="(activeElement$ | async) === 'add-existing-statements'">
        <gv-subfield #s *ngIf="(notInProjectCount$|async)>0" [source]="data.source" [field]="fieldWithOneTarget"
            [scope]="scope$|async" [showOntoInfo$]="showOntoInfo$" [addMode$]="addMode$" (close)="onClose()"
            (next)="onNext()"></gv-subfield>
    </ng-container>


    <ng-container *ngIf="(activeElement$ | async) === 'create-form'">
        <gv-form-create-entity [field]="data.field" [targetClass]="data.targetClass" [source]="data.source"
            (cancel)="onClose()" (saved)="onSaved()">
        </gv-form-create-entity>
    </ng-container>


    <ng-container *ngIf="(activeElement$ | async) === 'create-or-add'">

        <div class="gv-aoc-container">
            <div class="gv-aoc-left gv-flex-fh">
                <gv-form-create-entity class="gv-flex-fh gv-aoc-scroll my-2" [field]="data.field"
                    [targetClass]="data.targetClass" [source]="data.source" (cancel)="onClose()" (saved)="onClose()"
                    (searchString)="searchStringChange($event)" [hideTitle]="true">
                </gv-form-create-entity>
            </div>
            <div class="gv-aoc-center">
                <mat-divider [vertical]="true"></mat-divider>
            </div>
            <div class="gv-aoc-right gv-flex-fh">
                <mat-form-field appearance="outline">
                    <mat-label>Search</mat-label>
                    <input matInput type="text" autocomplete="off" [ngModel]="searchString$|async"
                        (keyup)="searchStringChange($any($event).target.value)">
                </mat-form-field>
                <gv-search-existing-entity class="gv-flex-fh gv-aoc-scroll" [pkClass]="classAndTypePk.pkClass"
                    [searchString$]="searchString$" (onMore)="onMoreClick($event)">
                </gv-search-existing-entity>
            </div>

        </div>

    </ng-container>

</div> -->