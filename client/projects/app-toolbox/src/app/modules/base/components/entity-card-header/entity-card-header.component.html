<gv-class-info class="loc-icon" *ngIf="classLabel$|async" dnd-draggable [dragData]="preview$ | async"
  [showOntoInfo$]="showOntoInfo$" shade [size]="24" [pkClass]="fkClass$|async" [classLabel]="classLabel$|async"
  [isFavorite]="false" [shade]="'secondary'">
</gv-class-info>

<div class="loc-texts mat-typography">
  <h2 class="loc-text-item" [matTooltip]="(classLabel$ | async) +' – '+ ((preview$|async)?.entity_label)">
    <ng-container *ngIf="(preview$|async)?.entity_type == 'teEn'">{{classLabel$ | async}} –</ng-container>
    {{(preview$|async)?.entity_label}}
  </h2>
  <span class="loc-text-item mat-caption mat-text-secondary" [matTooltip]="'Class: ' + (classLabel$ | async)">
    {{classLabel$ | async}}</span>
  <span class="loc-text-item mat-caption mat-text-secondary" [matTooltip]="'Type: ' + ((preview$|async)?.type_label)"
    *ngIf="(preview$|async)?.fk_type">{{(preview$|async)?.type_label}}</span>
  <span class="loc-text-item mat-caption mat-text-secondary loc-id" [matTooltip]="'id: ' + pkEntity">id
    {{pkEntity}}</span>
</div>
<div class="loc-buttons">
  <button mat-icon-button color="primary" [matMenuTriggerFor]="mainMenu">
    <mat-icon>more_vert</mat-icon>
  </button>
  <mat-menu #mainMenu="matMenu" xPosition="before">

    <!-- toggle onto info -->
    <button mat-menu-item (click)="$event.stopPropagation();toggleOntoInfo();">
      <mat-slide-toggle color="accent" [checked]="(showOntoInfo$|async)">
        Ontology Info [Shift + O]
      </mat-slide-toggle>
    </button>

    <button *ngIf="!readonly" mat-menu-item (click)="editMode.toggleValue();$event.stopPropagation();">
      <mat-slide-toggle color="accent" [checked]="editMode.value$|async">
        Edit mode [Shift + E]
      </mat-slide-toggle>
    </button>

    <mat-divider *ngIf="!readonly"></mat-divider>
    <div class="dropdown-header" *ngIf="!readonly">Settings for class {{classLabel$|async}}
    </div>
    <gv-entity-label-config-open-btn *ngIf="fkClass$|async" [fkClass]="fkClass$ | async">
      <button mat-menu-item *ngIf="!readonly">
        <mat-icon svgIcon="cogs"></mat-icon>
        <span>Configure Labels</span>
      </button>
    </gv-entity-label-config-open-btn>
    <button *ngIf="!readonly" mat-menu-item (click)="openClassConfig()">
      <mat-icon svgIcon="cogs"></mat-icon>
      Configure Fields
    </button>
    <!-- remove -->
    <mat-divider *ngIf="!readonly"></mat-divider>
    <div class="dropdown-header" *ngIf="!readonly">Danger Zone</div>
    <button mat-menu-item (click)="openRemoveDialog();" *ngIf="!readonly">
      <mat-icon color="warn">delete</mat-icon>
      <span>Remove</span>
    </button>

  </mat-menu>
  <gv-toggle-btn *ngIf="!readonly" class="loc-toolbar-item" [value$]="editMode.value$"
    (change)="editMode.setValue($event)">
    <a gv-toggle-off mat-icon-button color="primary" style="margin: 0 32px 0 0px;"
      [matTooltip]="'Switch to read mode [Shift + E]'">
      <mat-icon [svgIcon]="'eye'"></mat-icon>
    </a>

    <a gv-toggle-on mat-flat-button color="primary"
      style="height: 48px; padding-top: 4px; border-radius: 0; padding-right: 32px;"
      [matTooltip]="'Switch to edit mode [Shift + E]'">
      <mat-icon [svgIcon]="'pencil'"></mat-icon>
    </a>
  </gv-toggle-btn>
</div>
